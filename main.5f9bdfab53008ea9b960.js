(self.webpackChunkangular_pwa=self.webpackChunkangular_pwa||[]).push([[179],{255:fn=>{function K(Me){return Promise.resolve().then(()=>{var ye=new Error("Cannot find module '"+Me+"'");throw ye.code="MODULE_NOT_FOUND",ye})}K.keys=()=>[],K.resolve=K,K.id=255,fn.exports=K},279:(fn,K,Me)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});var rt,ze,ye=Me(796),ie=Me(704),I=Me(100),fe=Me(300),yt=((rt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",rt["bad-app-name"]="Illegal App name: '{$appName}",rt["duplicate-app"]="Firebase App named '{$appName}' already exists",rt["app-deleted"]="Firebase App named '{$appName}' already deleted",rt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",rt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",rt),bt=new ie.ErrorFactory("app","Firebase",yt),Gt="@firebase/app",_e="[DEFAULT]",ht=((ze={})[Gt]="fire-core",ze["@firebase/analytics"]="fire-analytics",ze["@firebase/auth"]="fire-auth",ze["@firebase/database"]="fire-rtdb",ze["@firebase/functions"]="fire-fn",ze["@firebase/installations"]="fire-iid",ze["@firebase/messaging"]="fire-fcm",ze["@firebase/performance"]="fire-perf",ze["@firebase/remote-config"]="fire-rc",ze["@firebase/storage"]="fire-gcs",ze["@firebase/firestore"]="fire-fst",ze["fire-js"]="fire-js",ze["firebase-wrapper"]="fire-js-all",ze),Je=new fe.Logger("@firebase/app"),v=function(){function le(Q,de,nt){var zt,kn,In=this;this.firebase_=nt,this.isDeleted_=!1,this.name_=de.name,this.automaticDataCollectionEnabled_=de.automaticDataCollectionEnabled||!1,this.options_=ie.deepCopy(Q),this.container=new I.ComponentContainer(de.name),this._addComponent(new I.Component("app",function(){return In},"PUBLIC"));try{for(var Ln=ye.__values(this.firebase_.INTERNAL.components.values()),nn=Ln.next();!nn.done;nn=Ln.next())this._addComponent(nn.value)}catch(yr){zt={error:yr}}finally{try{nn&&!nn.done&&(kn=Ln.return)&&kn.call(Ln)}finally{if(zt)throw zt.error}}}return Object.defineProperty(le.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Q){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Q},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),le.prototype.delete=function(){var Q=this;return new Promise(function(de){Q.checkDestroyed_(),de()}).then(function(){return Q.firebase_.INTERNAL.removeApp(Q.name_),Promise.all(Q.container.getProviders().map(function(de){return de.delete()}))}).then(function(){Q.isDeleted_=!0})},le.prototype._getService=function(Q,de){return void 0===de&&(de=_e),this.checkDestroyed_(),this.container.getProvider(Q).getImmediate({identifier:de})},le.prototype._removeServiceInstance=function(Q,de){void 0===de&&(de=_e),this.container.getProvider(Q).clearInstance(de)},le.prototype._addComponent=function(Q){try{this.container.addComponent(Q)}catch(de){Je.debug("Component "+Q.name+" failed to register with FirebaseApp "+this.name,de)}},le.prototype._addOrOverwriteComponent=function(Q){this.container.addOrOverwriteComponent(Q)},le.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw bt.create("app-deleted",{appName:this.name_})},le}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var N=function A(){var le=function(le){var Q={},de=new Map,nt={__esModule:!0,initializeApp:function(Xe,_t){void 0===_t&&(_t={}),("object"!=typeof _t||null===_t)&&(_t={name:_t});var je=_t;void 0===je.name&&(je.name=_e);var vt=je.name;if("string"!=typeof vt||!vt)throw bt.create("bad-app-name",{appName:String(vt)});if(ie.contains(Q,vt))throw bt.create("duplicate-app",{appName:vt});var hn=new le(Xe,je,nt);return Q[vt]=hn,hn},app:kn,registerVersion:function(Xe,_t,rn){var je,vt=null!==(je=ht[Xe])&&void 0!==je?je:Xe;rn&&(vt+="-"+rn);var hn=vt.match(/\s|\//),pn=_t.match(/\s|\//);if(hn||pn){var Xn=['Unable to register library "'+vt+'" with version "'+_t+'":'];return hn&&Xn.push('library name "'+vt+'" contains illegal characters (whitespace or "/")'),hn&&pn&&Xn.push("and"),pn&&Xn.push('version name "'+_t+'" contains illegal characters (whitespace or "/")'),void Je.warn(Xn.join(" "))}nn(new I.Component(vt+"-version",function(){return{library:vt,version:_t}},"VERSION"))},setLogLevel:fe.setLogLevel,onLog:function(Xe,_t){if(null!==Xe&&"function"!=typeof Xe)throw bt.create("invalid-log-argument",{appName:name});fe.setUserLogHandler(Xe,_t)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:nn,removeApp:function(Xe){delete Q[Xe]},components:de,useAsService:function(Xe,_t){return"serverAuth"===_t?null:_t}}};function kn(Xe){if(!ie.contains(Q,Xe=Xe||_e))throw bt.create("no-app",{appName:Xe});return Q[Xe]}function nn(Xe){var _t,rn,je=Xe.name;if(de.has(je))return Je.debug("There were multiple attempts to register component "+je+"."),"PUBLIC"===Xe.type?nt[je]:null;if(de.set(je,Xe),"PUBLIC"===Xe.type){var vt=function(on){if(void 0===on&&(on=kn()),"function"!=typeof on[je])throw bt.create("invalid-app-argument",{appName:je});return on[je]()};void 0!==Xe.serviceProps&&ie.deepExtend(vt,Xe.serviceProps),nt[je]=vt,le.prototype[je]=function(){for(var on=[],Et=0;Et<arguments.length;Et++)on[Et]=arguments[Et];return this._getService.bind(this,je).apply(this,Xe.multipleInstances?on:[])}}try{for(var hn=ye.__values(Object.keys(Q)),pn=hn.next();!pn.done;pn=hn.next())Q[pn.value]._addComponent(Xe)}catch(on){_t={error:on}}finally{try{pn&&!pn.done&&(rn=hn.return)&&rn.call(hn)}finally{if(_t)throw _t.error}}return"PUBLIC"===Xe.type?nt[je]:null}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function(){return Object.keys(Q).map(function(Xe){return Q[Xe]})}}),kn.App=le,nt}(v);return le.INTERNAL=ye.__assign(ye.__assign({},le.INTERNAL),{createFirebaseNamespace:A,extendNamespace:function(de){ie.deepExtend(le,de)},createSubscribe:ie.createSubscribe,ErrorFactory:ie.ErrorFactory,deepExtend:ie.deepExtend}),le}(),T=function(){function le(Q){this.container=Q}return le.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(de){if(function(le){var Q=le.getComponent();return"VERSION"===(null==Q?void 0:Q.type)}(de)){var nt=de.getImmediate();return nt.library+"/"+nt.version}return null}).filter(function(de){return de}).join(" ")},le}();if(ie.isBrowser()&&void 0!==self.firebase){Je.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ie=self.firebase.SDK_VERSION;Ie&&Ie.indexOf("LITE")>=0&&Je.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var U=N.initializeApp;N.initializeApp=function(){for(var le=[],Q=0;Q<arguments.length;Q++)le[Q]=arguments[Q];return ie.isNode()&&Je.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),U.apply(void 0,le)};var le,ee=N;(le=ee).INTERNAL.registerComponent(new I.Component("platform-logger",function(de){return new T(de)},"PRIVATE")),le.registerVersion(Gt,"0.6.11",undefined),le.registerVersion("fire-js",""),K.default=ee,K.firebase=ee},100:(fn,K,Me)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});var ye=Me(385),ie=Me(704),I=function(){function Te(Z,pe,ne){this.name=Z,this.instanceFactory=pe,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return Te.prototype.setInstantiationMode=function(Z){return this.instantiationMode=Z,this},Te.prototype.setMultipleInstances=function(Z){return this.multipleInstances=Z,this},Te.prototype.setServiceProps=function(Z){return this.serviceProps=Z,this},Te}(),fe="[DEFAULT]",rt=function(){function Te(Z,pe){this.name=Z,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return Te.prototype.get=function(Z){void 0===Z&&(Z=fe);var pe=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(pe)){var ne=new ie.Deferred;this.instancesDeferred.set(pe,ne);try{var J=this.getOrInitializeService(pe);J&&ne.resolve(J)}catch(X){}}return this.instancesDeferred.get(pe).promise},Te.prototype.getImmediate=function(Z){var pe=ye.__assign({identifier:fe,optional:!1},Z),J=pe.optional,X=this.normalizeInstanceIdentifier(pe.identifier);try{var Ze=this.getOrInitializeService(X);if(!Ze){if(J)return null;throw Error("Service "+this.name+" is not available")}return Ze}catch(xe){if(J)return null;throw xe}},Te.prototype.getComponent=function(){return this.component},Te.prototype.setComponent=function(Z){var pe,ne;if(Z.name!==this.name)throw Error("Mismatching Component "+Z.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=Z,function(Te){return"EAGER"===Te.instantiationMode}(Z))try{this.getOrInitializeService(fe)}catch(Ge){}try{for(var J=ye.__values(this.instancesDeferred.entries()),X=J.next();!X.done;X=J.next()){var Ze=ye.__read(X.value,2),ot=Ze[1],dt=this.normalizeInstanceIdentifier(Ze[0]);try{var ft=this.getOrInitializeService(dt);ot.resolve(ft)}catch(Ge){}}}catch(Ge){pe={error:Ge}}finally{try{X&&!X.done&&(ne=J.return)&&ne.call(J)}finally{if(pe)throw pe.error}}},Te.prototype.clearInstance=function(Z){void 0===Z&&(Z=fe),this.instancesDeferred.delete(Z),this.instances.delete(Z)},Te.prototype.delete=function(){return ye.__awaiter(this,void 0,void 0,function(){var Z;return ye.__generator(this,function(pe){switch(pe.label){case 0:return Z=Array.from(this.instances.values()),[4,Promise.all(ye.__spread(Z.filter(function(ne){return"INTERNAL"in ne}).map(function(ne){return ne.INTERNAL.delete()}),Z.filter(function(ne){return"_delete"in ne}).map(function(ne){return ne._delete()})))];case 1:return pe.sent(),[2]}})})},Te.prototype.isComponentSet=function(){return null!=this.component},Te.prototype.getOrInitializeService=function(Z){var pe=this.instances.get(Z);return!pe&&this.component&&(pe=this.component.instanceFactory(this.container,function(Te){return Te===fe?void 0:Te}(Z)),this.instances.set(Z,pe)),pe||null},Te.prototype.normalizeInstanceIdentifier=function(Z){return this.component?this.component.multipleInstances?Z:fe:Z},Te}(),Gt=function(){function Te(Z){this.name=Z,this.providers=new Map}return Te.prototype.addComponent=function(Z){var pe=this.getProvider(Z.name);if(pe.isComponentSet())throw new Error("Component "+Z.name+" has already been registered with "+this.name);pe.setComponent(Z)},Te.prototype.addOrOverwriteComponent=function(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)},Te.prototype.getProvider=function(Z){if(this.providers.has(Z))return this.providers.get(Z);var pe=new rt(Z,this);return this.providers.set(Z,pe),pe},Te.prototype.getProviders=function(){return Array.from(this.providers.values())},Te}();K.Component=I,K.ComponentContainer=Gt,K.Provider=rt},614:(fn,K,Me)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});var ye=Me(279),ie=Me(209),I=Me(704),fe=Me(300),rt=Me(100);function yt(c){return c&&"object"==typeof c&&"default"in c?c:{default:c}}var c,bt=yt(ye),Gt=function(){function c(s){this.domStorage_=s,this.prefix_="firebase:"}return c.prototype.set=function(s,u){null==u?this.domStorage_.removeItem(this.prefixedName_(s)):this.domStorage_.setItem(this.prefixedName_(s),I.stringify(u))},c.prototype.get=function(s){var u=this.domStorage_.getItem(this.prefixedName_(s));return null==u?null:I.jsonEval(u)},c.prototype.remove=function(s){this.domStorage_.removeItem(this.prefixedName_(s))},c.prototype.prefixedName_=function(s){return this.prefix_+s},c.prototype.toString=function(){return this.domStorage_.toString()},c}(),Te=function(){function c(){this.cache_={},this.isInMemoryStorage=!0}return c.prototype.set=function(s,u){null==u?delete this.cache_[s]:this.cache_[s]=u},c.prototype.get=function(s){return I.contains(this.cache_,s)?this.cache_[s]:null},c.prototype.remove=function(s){delete this.cache_[s]},c}(),Z=function(c){try{if("undefined"!=typeof window&&void 0!==window[c]){var s=window[c];return s.setItem("firebase:sentinel","cache"),s.removeItem("firebase:sentinel"),new Gt(s)}}catch(u){}return new Te},pe=Z("localStorage"),ne=Z("sessionStorage"),J=new fe.Logger("@firebase/database"),X=(c=1,function(){return c++}),Ze=function(c){var s=I.stringToByteArray(c),u=new I.Sha1;u.update(s);var d=u.digest();return I.base64.encodeByteArray(d)},xe=function(){for(var c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];for(var u="",d=0;d<c.length;d++){var h=c[d];Array.isArray(h)||h&&"object"==typeof h&&"number"==typeof h.length?u+=xe.apply(null,h):u+="object"==typeof h?I.stringify(h):h,u+=" "}return u},ot=null,dt=!0,ft=function(c,s){I.assert(!s||!0===c||!1===c,"Can't turn on custom loggers persistently."),!0===c?(J.logLevel=fe.LogLevel.VERBOSE,ot=J.log.bind(J),s&&ne.set("logging_enabled",!0)):"function"==typeof c?ot=c:(ot=null,ne.remove("logging_enabled"))},Ge=function(){for(var c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];if(!0===dt&&(dt=!1,null===ot&&!0===ne.get("logging_enabled")&&ft(!0)),ot){var u=xe.apply(null,c);ot(u)}},ze=function(c){return function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];Ge.apply(void 0,ie.__spread([c],s))}},_e=function(){for(var c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];var u="FIREBASE INTERNAL ERROR: "+xe.apply(void 0,ie.__spread(c));J.error(u)},ht=function(){for(var c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];var u="FIREBASE FATAL ERROR: "+xe.apply(void 0,ie.__spread(c));throw J.error(u),new Error(u)},Je=function(){for(var c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];var u="FIREBASE WARNING: "+xe.apply(void 0,ie.__spread(c));J.warn(u)},D=function(c){return"number"==typeof c&&(c!=c||c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",N="[MAX_NAME]",T=function(c,s){if(c===s)return 0;if(c===A||s===N)return-1;if(s===A||c===N)return 1;var u=kn(c),d=kn(s);return null!==u?null!==d?u-d==0?c.length-s.length:u-d:-1:null!==d?1:c<s?-1:1},O=function(c,s){return c===s?0:c<s?-1:1},z=function(c,s){if(s&&c in s)return s[c];throw new Error("Missing required key ("+c+") in object: "+I.stringify(s))},Ie=function(c){if("object"!=typeof c||null===c)return I.stringify(c);var s=[];for(var u in c)s.push(u);s.sort();for(var d="{",h=0;h<s.length;h++)0!==h&&(d+=","),d+=I.stringify(s[h]),d+=":",d+=Ie(c[s[h]]);return d+"}"},U=function(c,s){var u=c.length;if(u<=s)return[c];for(var d=[],h=0;h<u;h+=s)d.push(c.substring(h,h+s>u?u:h+s));return d};function ee(c,s){for(var u in c)c.hasOwnProperty(u)&&s(u,c[u])}var Xs,Kt,ro,rd,Fu,gt,le=function(c){I.assert(!D(c),"Invalid JSON number");var h,g,y,E,w,d=1023;0===c?(g=0,y=0,h=1/c==-1/0?1:0):(h=c<0,(c=Math.abs(c))>=Math.pow(2,1-d)?(g=(E=Math.min(Math.floor(Math.log(c)/Math.LN2),d))+d,y=Math.round(c*Math.pow(2,52-E)-Math.pow(2,52))):(g=0,y=Math.round(c/Math.pow(2,-1074))));var S=[];for(w=52;w;w-=1)S.push(y%2?1:0),y=Math.floor(y/2);for(w=11;w;w-=1)S.push(g%2?1:0),g=Math.floor(g/2);S.push(h?1:0),S.reverse();var P=S.join(""),B="";for(w=0;w<64;w+=8){var W=parseInt(P.substr(w,8),2).toString(16);1===W.length&&(W="0"+W),B+=W}return B.toLowerCase()},zt=new RegExp("^-?(0*)\\d{1,10}$"),kn=function(c){if(zt.test(c)){var s=Number(c);if(s>=-2147483648&&s<=2147483647)return s}return null},In=function(c){try{c()}catch(s){setTimeout(function(){throw Je("Exception was thrown by user callback.",s.stack||""),s},Math.floor(0))}},nn=function(c,s){var u=setTimeout(c,s);return"object"==typeof u&&u.unref&&u.unref(),u},re=function(){function c(s,u){if(void 0===u){this.pieces_=s.split("/");for(var d=0,h=0;h<this.pieces_.length;h++)this.pieces_[h].length>0&&(this.pieces_[d]=this.pieces_[h],d++);this.pieces_.length=d,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=u}return Object.defineProperty(c,"Empty",{get:function(){return new c("")},enumerable:!1,configurable:!0}),c.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},c.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},c.prototype.popFront=function(){var s=this.pieceNum_;return s<this.pieces_.length&&s++,new c(this.pieces_,s)},c.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},c.prototype.toString=function(){for(var s="",u=this.pieceNum_;u<this.pieces_.length;u++)""!==this.pieces_[u]&&(s+="/"+this.pieces_[u]);return s||"/"},c.prototype.toUrlEncodedString=function(){for(var s="",u=this.pieceNum_;u<this.pieces_.length;u++)""!==this.pieces_[u]&&(s+="/"+encodeURIComponent(String(this.pieces_[u])));return s||"/"},c.prototype.slice=function(s){return void 0===s&&(s=0),this.pieces_.slice(this.pieceNum_+s)},c.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var s=[],u=this.pieceNum_;u<this.pieces_.length-1;u++)s.push(this.pieces_[u]);return new c(s,0)},c.prototype.child=function(s){for(var u=[],d=this.pieceNum_;d<this.pieces_.length;d++)u.push(this.pieces_[d]);if(s instanceof c)for(d=s.pieceNum_;d<s.pieces_.length;d++)u.push(s.pieces_[d]);else{var h=s.split("/");for(d=0;d<h.length;d++)h[d].length>0&&u.push(h[d])}return new c(u,0)},c.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},c.relativePath=function(s,u){var d=s.getFront(),h=u.getFront();if(null===d)return u;if(d===h)return c.relativePath(s.popFront(),u.popFront());throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+s+")")},c.comparePaths=function(s,u){for(var d=s.slice(),h=u.slice(),g=0;g<d.length&&g<h.length;g++){var y=T(d[g],h[g]);if(0!==y)return y}return d.length===h.length?0:d.length<h.length?-1:1},c.prototype.equals=function(s){if(this.getLength()!==s.getLength())return!1;for(var u=this.pieceNum_,d=s.pieceNum_;u<=this.pieces_.length;u++,d++)if(this.pieces_[u]!==s.pieces_[d])return!1;return!0},c.prototype.contains=function(s){var u=this.pieceNum_,d=s.pieceNum_;if(this.getLength()>s.getLength())return!1;for(;u<this.pieces_.length;){if(this.pieces_[u]!==s.pieces_[d])return!1;++u,++d}return!0},c}(),yr=function(){function c(s,u){this.errorPrefix_=u,this.parts_=s.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var d=0;d<this.parts_.length;d++)this.byteLength_+=I.stringLength(this.parts_[d]);this.checkValid_()}return Object.defineProperty(c,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(c,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),c.prototype.push=function(s){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(s),this.byteLength_+=I.stringLength(s),this.checkValid_()},c.prototype.pop=function(){var s=this.parts_.pop();this.byteLength_-=I.stringLength(s),this.parts_.length>0&&(this.byteLength_-=1)},c.prototype.checkValid_=function(){if(this.byteLength_>c.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+c.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>c.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+c.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},c.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},c}(),vt="firebaseio.com",Xn="websocket",on="long_polling",Et=function(){function c(s,u,d,h,g,y,E){void 0===g&&(g=!1),void 0===y&&(y=""),void 0===E&&(E=!1),this.secure=u,this.namespace=d,this.webSocketOnly=h,this.nodeAdmin=g,this.persistenceKey=y,this.includeNamespaceInQueryParams=E,this.host=s.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=pe.get("host:"+s)||this.host}return c.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},c.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},c.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},c.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},c.prototype.updateHost=function(s){s!==this.internalHost&&(this.internalHost=s,this.isCacheableHost()&&pe.set("host:"+this.host,this.internalHost))},c.prototype.connectionURL=function(s,u){var d;if(I.assert("string"==typeof s,"typeof type must == string"),I.assert("object"==typeof u,"typeof params must == object"),s===Xn)d=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(s!==on)throw new Error("Unknown connection type: "+s);d=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(u.ns=this.namespace);var h=[];return ee(u,function(g,y){h.push(g+"="+y)}),d+h.join("&")},c.prototype.toString=function(){var s=this.toURLString();return this.persistenceKey&&(s+="<"+this.persistenceKey+">"),s},c.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},c}(),eo=function(c,s){var u=jr(c),d=u.namespace;return"firebase.com"===u.domain&&ht(u.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!d||"undefined"===d)&&"localhost"!==u.domain&&ht("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),u.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Je("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Et(u.host,u.secure,d,s,"ws"===u.scheme||"wss"===u.scheme,"",d!==u.subdomain),path:new re(u.pathString)}},jr=function(c){var s="",u="",d="",h="",g="",y=!0,E="https",w=443;if("string"==typeof c){var S=c.indexOf("//");S>=0&&(E=c.substring(0,S-1),c=c.substring(S+2));var P=c.indexOf("/");-1===P&&(P=c.length);var B=c.indexOf("?");-1===B&&(B=c.length),s=c.substring(0,Math.min(P,B)),P<B&&(h=function(c){for(var s="",u=c.split("/"),d=0;d<u.length;d++)if(u[d].length>0){var h=u[d];try{h=decodeURIComponent(h.replace(/\+/g," "))}catch(g){}s+="/"+h}return s}(c.substring(P,B)));var W=function(c){var s,u,d={};"?"===c.charAt(0)&&(c=c.substring(1));try{for(var h=ie.__values(c.split("&")),g=h.next();!g.done;g=h.next()){var y=g.value;if(0!==y.length){var E=y.split("=");2===E.length?d[decodeURIComponent(E[0])]=decodeURIComponent(E[1]):Je("Invalid query segment '"+y+"' in query '"+c+"'")}}}catch(w){s={error:w}}finally{try{g&&!g.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return d}(c.substring(Math.min(c.length,B)));(S=s.indexOf(":"))>=0?(y="https"===E||"wss"===E,w=parseInt(s.substring(S+1),10)):S=s.length;var G=s.slice(0,S);if("localhost"===G.toLowerCase())u="localhost";else if(G.split(".").length<=2)u=G;else{var te=s.indexOf(".");d=s.substring(0,te).toLowerCase(),u=s.substring(te+1),g=d}"ns"in W&&(g=W.ns)}return{host:s,port:w,domain:u,subdomain:d,secure:y,scheme:E,pathString:h,namespace:g}},to=/[\[\].#$\/\u0000-\u001F\u007F]/,k=/[\[\].#$\u0000-\u001F\u007F]/,x=10485760,V=function(c){return"string"==typeof c&&0!==c.length&&!to.test(c)},H=function(c){return"string"==typeof c&&0!==c.length&&!k.test(c)},ce=function(c){return null===c||"string"==typeof c||"number"==typeof c&&!D(c)||c&&"object"==typeof c&&I.contains(c,".sv")},Pe=function(c,s,u,d,h){h&&void 0===u||at(I.errorPrefix(c,s,h),u,d)},at=function(c,s,u){var d=u instanceof re?new yr(u,c):u;if(void 0===s)throw new Error(c+"contains undefined "+d.toErrorString());if("function"==typeof s)throw new Error(c+"contains a function "+d.toErrorString()+" with contents = "+s.toString());if(D(s))throw new Error(c+"contains "+s.toString()+" "+d.toErrorString());if("string"==typeof s&&s.length>x/3&&I.stringLength(s)>x)throw new Error(c+"contains a string greater than "+x+" utf8 bytes "+d.toErrorString()+" ('"+s.substring(0,50)+"...')");if(s&&"object"==typeof s){var h=!1,g=!1;if(ee(s,function(y,E){if(".value"===y)h=!0;else if(".priority"!==y&&".sv"!==y&&(g=!0,!V(y)))throw new Error(c+" contains an invalid key ("+y+") "+d.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');d.push(y),at(c,E,d),d.pop()}),h&&g)throw new Error(c+' contains ".value" child '+d.toErrorString()+" in addition to actual children.")}},st=function(c,s,u,d,h){if(!h||void 0!==u){var g=I.errorPrefix(c,s,h);if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(g+" must be an object containing the children to replace.");var y=[];ee(u,function(E,w){var S=new re(E);if(at(g,w,d.child(S)),".priority"===S.getBack()&&!ce(w))throw new Error(g+"contains an invalid value for '"+S.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");y.push(S)}),function(c,s){var u,d;for(u=0;u<s.length;u++)for(var h=(d=s[u]).slice(),g=0;g<h.length;g++)if((".priority"!==h[g]||g!==h.length-1)&&!V(h[g]))throw new Error(c+"contains an invalid key ("+h[g]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');s.sort(re.comparePaths);var y=null;for(u=0;u<s.length;u++){if(d=s[u],null!==y&&y.contains(d))throw new Error(c+"contains a path "+y.toString()+" that is ancestor of another path "+d.toString());y=d}}(g,y)}},Yt=function(c,s,u,d){if(!d||void 0!==u){if(D(u))throw new Error(I.errorPrefix(c,s,d)+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ce(u))throw new Error(I.errorPrefix(c,s,d)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ht=function(c,s,u,d){if(!d||void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(I.errorPrefix(c,s,d)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Nt=function(c,s,u,d){if(!(d&&void 0===u||V(u)))throw new Error(I.errorPrefix(c,s,d)+'was an invalid key = "'+u+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},$e=function(c,s,u,d){if(!(d&&void 0===u||H(u)))throw new Error(I.errorPrefix(c,s,d)+'was an invalid path = "'+u+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},no=function(c,s,u,d){u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),$e(c,s,u,d)},be=function(c,s){if(".info"===s.getFront())throw new Error(c+" failed = Can't modify data under /.info/")},Fo=function(c,s,u){var d=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!V(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==d.length&&!function(c){return c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),H(c)}(d))throw new Error(I.errorPrefix(c,s,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Xc=function(c,s,u,d){if((!d||void 0!==u)&&"boolean"!=typeof u)throw new Error(I.errorPrefix(c,s,d)+"must be a boolean.")},ko=function(){function c(s,u){this.repo_=s,this.path_=u}return c.prototype.cancel=function(s){I.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),I.validateCallback("OnDisconnect.cancel",1,s,!0);var u=new I.Deferred;return this.repo_.onDisconnectCancel(this.path_,u.wrapCallback(s)),u.promise},c.prototype.remove=function(s){I.validateArgCount("OnDisconnect.remove",0,1,arguments.length),be("OnDisconnect.remove",this.path_),I.validateCallback("OnDisconnect.remove",1,s,!0);var u=new I.Deferred;return this.repo_.onDisconnectSet(this.path_,null,u.wrapCallback(s)),u.promise},c.prototype.set=function(s,u){I.validateArgCount("OnDisconnect.set",1,2,arguments.length),be("OnDisconnect.set",this.path_),Pe("OnDisconnect.set",1,s,this.path_,!1),I.validateCallback("OnDisconnect.set",2,u,!0);var d=new I.Deferred;return this.repo_.onDisconnectSet(this.path_,s,d.wrapCallback(u)),d.promise},c.prototype.setWithPriority=function(s,u,d){I.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),be("OnDisconnect.setWithPriority",this.path_),Pe("OnDisconnect.setWithPriority",1,s,this.path_,!1),Yt("OnDisconnect.setWithPriority",2,u,!1),I.validateCallback("OnDisconnect.setWithPriority",3,d,!0);var h=new I.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,s,u,h.wrapCallback(d)),h.promise},c.prototype.update=function(s,u){if(I.validateArgCount("OnDisconnect.update",1,2,arguments.length),be("OnDisconnect.update",this.path_),Array.isArray(s)){for(var d={},h=0;h<s.length;++h)d[""+h]=s[h];s=d,Je("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}st("OnDisconnect.update",1,s,this.path_,!1),I.validateCallback("OnDisconnect.update",2,u,!0);var g=new I.Deferred;return this.repo_.onDisconnectUpdate(this.path_,s,g.wrapCallback(u)),g.promise},c}(),ge=function(){function c(s,u){this.committed=s,this.snapshot=u}return c.prototype.toJSON=function(){return I.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},c}(),Ou=function(){var c="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",s=0,u=[];return function(d){var h=d===s;s=d;var g,y=new Array(8);for(g=7;g>=0;g--)y[g]=c.charAt(d%64),d=Math.floor(d/64);I.assert(0===d,"Cannot push at time == 0");var E=y.join("");if(h){for(g=11;g>=0&&63===u[g];g--)u[g]=0;u[g]++}else for(g=0;g<12;g++)u[g]=Math.floor(64*Math.random());for(g=0;g<12;g++)E+=c.charAt(u[g]);return I.assert(20===E.length,"nextPushId: Length should be 20."),E}}(),Ye=function(){function c(s,u){this.name=s,this.node=u}return c.Wrap=function(s,u){return new c(s,u)},c}(),er=function(){function c(){}return c.prototype.getCompare=function(){return this.compare.bind(this)},c.prototype.indexedValueChanged=function(s,u){var d=new Ye(A,s),h=new Ye(A,u);return 0!==this.compare(d,h)},c.prototype.minPost=function(){return Ye.MIN},c}(),Lo=function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return ie.__extends(s,c),Object.defineProperty(s,"__EMPTY_NODE",{get:function(){return Xs},set:function(u){Xs=u},enumerable:!1,configurable:!0}),s.prototype.compare=function(u,d){return T(u.name,d.name)},s.prototype.isDefinedOn=function(u){throw I.assertionError("KeyIndex.isDefinedOn not expected to be called.")},s.prototype.indexedValueChanged=function(u,d){return!1},s.prototype.minPost=function(){return Ye.MIN},s.prototype.maxPost=function(){return new Ye(N,Xs)},s.prototype.makePost=function(u,d){return I.assert("string"==typeof u,"KeyIndex indexValue must always be a string."),new Ye(u,Xs)},s.prototype.toString=function(){return".key"},s}(er),we=new Lo,td=function(c){return"number"==typeof c?"number:"+le(c):"string:"+c},nd=function(c){if(c.isLeafNode()){var s=c.val();I.assert("string"==typeof s||"number"==typeof s||"object"==typeof s&&I.contains(s,".sv"),"Priority must be a string or number.")}else I.assert(c===Kt||c.isEmpty(),"priority of unexpected type.");I.assert(c===Kt||c.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},$t=function(){function c(s,u){void 0===u&&(u=c.__childrenNodeConstructor.EMPTY_NODE),this.value_=s,this.priorityNode_=u,this.lazyHash_=null,I.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nd(this.priorityNode_)}return Object.defineProperty(c,"__childrenNodeConstructor",{get:function(){return ro},set:function(s){ro=s},enumerable:!1,configurable:!0}),c.prototype.isLeafNode=function(){return!0},c.prototype.getPriority=function(){return this.priorityNode_},c.prototype.updatePriority=function(s){return new c(this.value_,s)},c.prototype.getImmediateChild=function(s){return".priority"===s?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE},c.prototype.getChild=function(s){return s.isEmpty()?this:".priority"===s.getFront()?this.priorityNode_:c.__childrenNodeConstructor.EMPTY_NODE},c.prototype.hasChild=function(){return!1},c.prototype.getPredecessorChildName=function(s,u){return null},c.prototype.updateImmediateChild=function(s,u){return".priority"===s?this.updatePriority(u):u.isEmpty()&&".priority"!==s?this:c.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(s,u).updatePriority(this.priorityNode_)},c.prototype.updateChild=function(s,u){var d=s.getFront();return null===d?u:u.isEmpty()&&".priority"!==d?this:(I.assert(".priority"!==d||1===s.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(d,c.__childrenNodeConstructor.EMPTY_NODE.updateChild(s.popFront(),u)))},c.prototype.isEmpty=function(){return!1},c.prototype.numChildren=function(){return 0},c.prototype.forEachChild=function(s,u){return!1},c.prototype.val=function(s){return s&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},c.prototype.hash=function(){if(null===this.lazyHash_){var s="";this.priorityNode_.isEmpty()||(s+="priority:"+td(this.priorityNode_.val())+":");var u=typeof this.value_;s+=u+":",s+="number"===u?le(this.value_):this.value_,this.lazyHash_=Ze(s)}return this.lazyHash_},c.prototype.getValue=function(){return this.value_},c.prototype.compareTo=function(s){return s===c.__childrenNodeConstructor.EMPTY_NODE?1:s instanceof c.__childrenNodeConstructor?-1:(I.assert(s.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(s))},c.prototype.compareToLeafNode_=function(s){var u=typeof s.value_,d=typeof this.value_,h=c.VALUE_TYPE_ORDER.indexOf(u),g=c.VALUE_TYPE_ORDER.indexOf(d);return I.assert(h>=0,"Unknown leaf type: "+u),I.assert(g>=0,"Unknown leaf type: "+d),h===g?"object"===d?0:this.value_<s.value_?-1:this.value_===s.value_?0:1:g-h},c.prototype.withIndex=function(){return this},c.prototype.isIndexed=function(){return!0},c.prototype.equals=function(s){return s===this||!!s.isLeafNode()&&(this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_))},c.VALUE_TYPE_ORDER=["object","boolean","number","string"],c}(),pt=new(function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return ie.__extends(s,c),s.prototype.compare=function(u,d){var h=u.node.getPriority(),g=d.node.getPriority(),y=h.compareTo(g);return 0===y?T(u.name,d.name):y},s.prototype.isDefinedOn=function(u){return!u.getPriority().isEmpty()},s.prototype.indexedValueChanged=function(u,d){return!u.getPriority().equals(d.getPriority())},s.prototype.minPost=function(){return Ye.MIN},s.prototype.maxPost=function(){return new Ye(N,new $t("[PRIORITY-POST]",Fu))},s.prototype.makePost=function(u,d){var h=rd(u);return new Ye(d,new $t("[PRIORITY-POST]",h))},s.prototype.toString=function(){return".priority"},s}(er)),ea=function(){function c(s,u,d,h,g){void 0===g&&(g=null),this.isReverse_=h,this.resultGenerator_=g,this.nodeStack_=[];for(var y=1;!s.isEmpty();)if(s=s,y=u?d(s.key,u):1,h&&(y*=-1),y<0)s=this.isReverse_?s.left:s.right;else{if(0===y){this.nodeStack_.push(s);break}this.nodeStack_.push(s),s=this.isReverse_?s.right:s.left}}return c.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var u,s=this.nodeStack_.pop();if(u=this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value},this.isReverse_)for(s=s.left;!s.isEmpty();)this.nodeStack_.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack_.push(s),s=s.left;return u},c.prototype.hasNext=function(){return this.nodeStack_.length>0},c.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var s=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(s.key,s.value):{key:s.key,value:s.value}},c}(),tr=function(){function c(s,u,d,h,g){this.key=s,this.value=u,this.color=null!=d?d:c.RED,this.left=null!=h?h:Ur.EMPTY_NODE,this.right=null!=g?g:Ur.EMPTY_NODE}return c.prototype.copy=function(s,u,d,h,g){return new c(null!=s?s:this.key,null!=u?u:this.value,null!=d?d:this.color,null!=h?h:this.left,null!=g?g:this.right)},c.prototype.count=function(){return this.left.count()+1+this.right.count()},c.prototype.isEmpty=function(){return!1},c.prototype.inorderTraversal=function(s){return this.left.inorderTraversal(s)||!!s(this.key,this.value)||this.right.inorderTraversal(s)},c.prototype.reverseTraversal=function(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)},c.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},c.prototype.minKey=function(){return this.min_().key},c.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},c.prototype.insert=function(s,u,d){var h=this,g=d(s,h.key);return(h=g<0?h.copy(null,null,null,h.left.insert(s,u,d),null):0===g?h.copy(null,u,null,null,null):h.copy(null,null,null,null,h.right.insert(s,u,d))).fixUp_()},c.prototype.removeMin_=function(){if(this.left.isEmpty())return Ur.EMPTY_NODE;var s=this;return!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),(s=s.copy(null,null,null,s.left.removeMin_(),null)).fixUp_()},c.prototype.remove=function(s,u){var d,h;if(u(s,(d=this).key)<0)!d.left.isEmpty()&&!d.left.isRed_()&&!d.left.left.isRed_()&&(d=d.moveRedLeft_()),d=d.copy(null,null,null,d.left.remove(s,u),null);else{if(d.left.isRed_()&&(d=d.rotateRight_()),!d.right.isEmpty()&&!d.right.isRed_()&&!d.right.left.isRed_()&&(d=d.moveRedRight_()),0===u(s,d.key)){if(d.right.isEmpty())return Ur.EMPTY_NODE;h=d.right.min_(),d=d.copy(h.key,h.value,null,null,d.right.removeMin_())}d=d.copy(null,null,null,null,d.right.remove(s,u))}return d.fixUp_()},c.prototype.isRed_=function(){return this.color},c.prototype.fixUp_=function(){var s=this;return s.right.isRed_()&&!s.left.isRed_()&&(s=s.rotateLeft_()),s.left.isRed_()&&s.left.left.isRed_()&&(s=s.rotateRight_()),s.left.isRed_()&&s.right.isRed_()&&(s=s.colorFlip_()),s},c.prototype.moveRedLeft_=function(){var s=this.colorFlip_();return s.right.left.isRed_()&&(s=(s=(s=s.copy(null,null,null,null,s.right.rotateRight_())).rotateLeft_()).colorFlip_()),s},c.prototype.moveRedRight_=function(){var s=this.colorFlip_();return s.left.left.isRed_()&&(s=(s=s.rotateRight_()).colorFlip_()),s},c.prototype.rotateLeft_=function(){var s=this.copy(null,null,c.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)},c.prototype.rotateRight_=function(){var s=this.copy(null,null,c.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)},c.prototype.colorFlip_=function(){var s=this.left.copy(null,null,!this.left.color,null,null),u=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,u)},c.prototype.checkMaxDepth_=function(){var s=this.check_();return Math.pow(2,s)<=this.count()+1},c.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var s=this.left.check_();if(s!==this.right.check_())throw new Error("Black depths differ");return s+(this.isRed_()?0:1)},c.RED=!0,c.BLACK=!1,c}(),id=function(){function c(){}return c.prototype.copy=function(s,u,d,h,g){return this},c.prototype.insert=function(s,u,d){return new tr(s,u,null)},c.prototype.remove=function(s,u){return this},c.prototype.count=function(){return 0},c.prototype.isEmpty=function(){return!0},c.prototype.inorderTraversal=function(s){return!1},c.prototype.reverseTraversal=function(s){return!1},c.prototype.minKey=function(){return null},c.prototype.maxKey=function(){return null},c.prototype.check_=function(){return 0},c.prototype.isRed_=function(){return!1},c}(),Ur=function(){function c(s,u){void 0===u&&(u=c.EMPTY_NODE),this.comparator_=s,this.root_=u}return c.prototype.insert=function(s,u){return new c(this.comparator_,this.root_.insert(s,u,this.comparator_).copy(null,null,tr.BLACK,null,null))},c.prototype.remove=function(s){return new c(this.comparator_,this.root_.remove(s,this.comparator_).copy(null,null,tr.BLACK,null,null))},c.prototype.get=function(s){for(var u,d=this.root_;!d.isEmpty();){if(0===(u=this.comparator_(s,d.key)))return d.value;u<0?d=d.left:u>0&&(d=d.right)}return null},c.prototype.getPredecessorKey=function(s){for(var u,d=this.root_,h=null;!d.isEmpty();){if(0===(u=this.comparator_(s,d.key))){if(d.left.isEmpty())return h?h.key:null;for(d=d.left;!d.right.isEmpty();)d=d.right;return d.key}u<0?d=d.left:u>0&&(h=d,d=d.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},c.prototype.isEmpty=function(){return this.root_.isEmpty()},c.prototype.count=function(){return this.root_.count()},c.prototype.minKey=function(){return this.root_.minKey()},c.prototype.maxKey=function(){return this.root_.maxKey()},c.prototype.inorderTraversal=function(s){return this.root_.inorderTraversal(s)},c.prototype.reverseTraversal=function(s){return this.root_.reverseTraversal(s)},c.prototype.getIterator=function(s){return new ea(this.root_,null,this.comparator_,!1,s)},c.prototype.getIteratorFrom=function(s,u){return new ea(this.root_,s,this.comparator_,!1,u)},c.prototype.getReverseIteratorFrom=function(s,u){return new ea(this.root_,s,this.comparator_,!0,u)},c.prototype.getReverseIterator=function(s){return new ea(this.root_,null,this.comparator_,!0,s)},c.EMPTY_NODE=new id,c}(),od=Math.log(2),Tg=function(){function c(s){this.count=parseInt(Math.log(s+1)/od,10),this.current_=this.count-1;var h=parseInt(Array(this.count+1).join("1"),2);this.bits_=s+1&h}return c.prototype.nextBitIsOne=function(){var s=!(this.bits_&1<<this.current_);return this.current_--,s},c}(),sn=function(c,s,u,d){c.sort(s);var h=function(w,S){var B,W,P=S-w;if(0===P)return null;if(1===P)return B=c[w],W=u?u(B):B,new tr(W,B.node,tr.BLACK,null,null);var G=parseInt(P/2,10)+w,te=h(w,G),se=h(G+1,S);return B=c[G],W=u?u(B):B,new tr(W,B.node,tr.BLACK,te,se)},E=function(w){for(var S=null,P=null,B=c.length,W=function(Oe,mn){var Zt=B-Oe,yn=B;B-=Oe;var gi=h(Zt+1,yn),Zo=c[Zt],Nd=u?u(Zo):Zo;G(new tr(Nd,Zo.node,mn,null,gi))},G=function(Oe){S?(S.left=Oe,S=Oe):(P=Oe,S=Oe)},te=0;te<w.count;++te){var se=w.nextBitIsOne(),De=Math.pow(2,w.count-(te+1));se?W(De,tr.BLACK):(W(De,tr.BLACK),W(De,tr.RED))}return P}(new Tg(c.length));return new Ur(d||s,E)},io={},ta=function(){function c(s,u){this.indexes_=s,this.indexSet_=u}return Object.defineProperty(c,"Default",{get:function(){return I.assert(io&&pt,"ChildrenNode.ts has not been loaded"),gt=gt||new c({".priority":io},{".priority":pt})},enumerable:!1,configurable:!0}),c.prototype.get=function(s){var u=I.safeGet(this.indexes_,s);if(!u)throw new Error("No index defined for "+s);return u instanceof Ur?u:null},c.prototype.hasIndex=function(s){return I.contains(this.indexSet_,s.toString())},c.prototype.addIndex=function(s,u){I.assert(s!==we,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],h=!1,g=u.getIterator(Ye.Wrap),y=g.getNext();y;)h=h||s.isDefinedOn(y.node),d.push(y),y=g.getNext();var E;E=h?sn(d,s.getCompare()):io;var w=s.toString(),S=ie.__assign({},this.indexSet_);S[w]=s;var P=ie.__assign({},this.indexes_);return P[w]=E,new c(P,S)},c.prototype.addToIndexes=function(s,u){var d=this;return new c(I.map(this.indexes_,function(g,y){var E=I.safeGet(d.indexSet_,y);if(I.assert(E,"Missing index implementation for "+y),g===io){if(E.isDefinedOn(s.node)){for(var w=[],S=u.getIterator(Ye.Wrap),P=S.getNext();P;)P.name!==s.name&&w.push(P),P=S.getNext();return w.push(s),sn(w,E.getCompare())}return io}var B=u.get(s.name),W=g;return B&&(W=W.remove(new Ye(s.name,B))),W.insert(s,s.node)}),this.indexSet_)},c.prototype.removeFromIndexes=function(s,u){return new c(I.map(this.indexes_,function(h){if(h===io)return h;var g=u.get(s.name);return g?h.remove(new Ye(s.name,g)):h}),this.indexSet_)},c}();function Rg(c,s){return T(c.name,s.name)}function Re(c,s){return T(c,s)}var Vo,he=function(){function c(s,u,d){this.children_=s,this.priorityNode_=u,this.indexMap_=d,this.lazyHash_=null,this.priorityNode_&&nd(this.priorityNode_),this.children_.isEmpty()&&I.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(c,"EMPTY_NODE",{get:function(){return Vo||(Vo=new c(new Ur(Re),null,ta.Default))},enumerable:!1,configurable:!0}),c.prototype.isLeafNode=function(){return!1},c.prototype.getPriority=function(){return this.priorityNode_||Vo},c.prototype.updatePriority=function(s){return this.children_.isEmpty()?this:new c(this.children_,s,this.indexMap_)},c.prototype.getImmediateChild=function(s){if(".priority"===s)return this.getPriority();var u=this.children_.get(s);return null===u?Vo:u},c.prototype.getChild=function(s){var u=s.getFront();return null===u?this:this.getImmediateChild(u).getChild(s.popFront())},c.prototype.hasChild=function(s){return null!==this.children_.get(s)},c.prototype.updateImmediateChild=function(s,u){if(I.assert(u,"We should always be passing snapshot nodes"),".priority"===s)return this.updatePriority(u);var d=new Ye(s,u),h=void 0,g=void 0;u.isEmpty()?(h=this.children_.remove(s),g=this.indexMap_.removeFromIndexes(d,this.children_)):(h=this.children_.insert(s,u),g=this.indexMap_.addToIndexes(d,this.children_));var y=h.isEmpty()?Vo:this.priorityNode_;return new c(h,y,g)},c.prototype.updateChild=function(s,u){var d=s.getFront();if(null===d)return u;I.assert(".priority"!==s.getFront()||1===s.getLength(),".priority must be the last token in a path");var h=this.getImmediateChild(d).updateChild(s.popFront(),u);return this.updateImmediateChild(d,h)},c.prototype.isEmpty=function(){return this.children_.isEmpty()},c.prototype.numChildren=function(){return this.children_.count()},c.prototype.val=function(s){if(this.isEmpty())return null;var u={},d=0,h=0,g=!0;if(this.forEachChild(pt,function(w,S){u[w]=S.val(s),d++,g&&c.INTEGER_REGEXP_.test(w)?h=Math.max(h,Number(w)):g=!1}),!s&&g&&h<2*d){var y=[];for(var E in u)y[E]=u[E];return y}return s&&!this.getPriority().isEmpty()&&(u[".priority"]=this.getPriority().val()),u},c.prototype.hash=function(){if(null===this.lazyHash_){var s="";this.getPriority().isEmpty()||(s+="priority:"+td(this.getPriority().val())+":"),this.forEachChild(pt,function(u,d){var h=d.hash();""!==h&&(s+=":"+u+":"+h)}),this.lazyHash_=""===s?"":Ze(s)}return this.lazyHash_},c.prototype.getPredecessorChildName=function(s,u,d){var h=this.resolveIndex_(d);if(h){var g=h.getPredecessorKey(new Ye(s,u));return g?g.name:null}return this.children_.getPredecessorKey(s)},c.prototype.getFirstChildName=function(s){var u=this.resolveIndex_(s);if(u){var d=u.minKey();return d&&d.name}return this.children_.minKey()},c.prototype.getFirstChild=function(s){var u=this.getFirstChildName(s);return u?new Ye(u,this.children_.get(u)):null},c.prototype.getLastChildName=function(s){var u=this.resolveIndex_(s);if(u){var d=u.maxKey();return d&&d.name}return this.children_.maxKey()},c.prototype.getLastChild=function(s){var u=this.getLastChildName(s);return u?new Ye(u,this.children_.get(u)):null},c.prototype.forEachChild=function(s,u){var d=this.resolveIndex_(s);return d?d.inorderTraversal(function(h){return u(h.name,h.node)}):this.children_.inorderTraversal(u)},c.prototype.getIterator=function(s){return this.getIteratorFrom(s.minPost(),s)},c.prototype.getIteratorFrom=function(s,u){var d=this.resolveIndex_(u);if(d)return d.getIteratorFrom(s,function(y){return y});for(var h=this.children_.getIteratorFrom(s.name,Ye.Wrap),g=h.peek();null!=g&&u.compare(g,s)<0;)h.getNext(),g=h.peek();return h},c.prototype.getReverseIterator=function(s){return this.getReverseIteratorFrom(s.maxPost(),s)},c.prototype.getReverseIteratorFrom=function(s,u){var d=this.resolveIndex_(u);if(d)return d.getReverseIteratorFrom(s,function(y){return y});for(var h=this.children_.getReverseIteratorFrom(s.name,Ye.Wrap),g=h.peek();null!=g&&u.compare(g,s)>0;)h.getNext(),g=h.peek();return h},c.prototype.compareTo=function(s){return this.isEmpty()?s.isEmpty()?0:-1:s.isLeafNode()||s.isEmpty()?1:s===Ai?-1:0},c.prototype.withIndex=function(s){if(s===we||this.indexMap_.hasIndex(s))return this;var u=this.indexMap_.addIndex(s,this.children_);return new c(this.children_,this.priorityNode_,u)},c.prototype.isIndexed=function(s){return s===we||this.indexMap_.hasIndex(s)},c.prototype.equals=function(s){if(s===this)return!0;if(s.isLeafNode())return!1;var u=s;if(this.getPriority().equals(u.getPriority())){if(this.children_.count()===u.children_.count()){for(var d=this.getIterator(pt),h=u.getIterator(pt),g=d.getNext(),y=h.getNext();g&&y;){if(g.name!==y.name||!g.node.equals(y.node))return!1;g=d.getNext(),y=h.getNext()}return null===g&&null===y}return!1}return!1},c.prototype.resolveIndex_=function(s){return s===we?null:this.indexMap_.get(s.toString())},c.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,c}(),Ai=new(function(c){function s(){return c.call(this,new Ur(Re),he.EMPTY_NODE,ta.Default)||this}return ie.__extends(s,c),s.prototype.compareTo=function(u){return u===this?0:1},s.prototype.equals=function(u){return u===this},s.prototype.getPriority=function(){return this},s.prototype.getImmediateChild=function(u){return he.EMPTY_NODE},s.prototype.isEmpty=function(){return!1},s}(he));function At(c,s){if(void 0===s&&(s=null),null===c)return he.EMPTY_NODE;if("object"==typeof c&&".priority"in c&&(s=c[".priority"]),I.assert(null===s||"string"==typeof s||"number"==typeof s||"object"==typeof s&&".sv"in s,"Invalid priority type found: "+typeof s),"object"==typeof c&&".value"in c&&null!==c[".value"]&&(c=c[".value"]),"object"!=typeof c||".sv"in c)return new $t(c,At(s));if(c instanceof Array){var w=he.EMPTY_NODE;return ee(c,function(S,P){if(I.contains(c,S)&&"."!==S.substring(0,1)){var B=At(P);(B.isLeafNode()||!B.isEmpty())&&(w=w.updateImmediateChild(S,B))}}),w.updatePriority(At(s))}var d=[],h=!1;if(ee(c,function(S,P){if("."!==S.substring(0,1)){var B=At(P);B.isEmpty()||(h=h||!B.getPriority().isEmpty(),d.push(new Ye(S,B)))}}),0===d.length)return he.EMPTY_NODE;var y=sn(d,Rg,function(S){return S.name},Re);if(h){var E=sn(d,pt.getCompare());return new he(y,At(s),new ta({".priority":E},{".priority":pt}))}return new he(y,At(s),ta.Default)}Object.defineProperties(Ye,{MIN:{value:new Ye(A,he.EMPTY_NODE)},MAX:{value:new Ye(N,Ai)}}),Lo.__EMPTY_NODE=he.EMPTY_NODE,$t.__childrenNodeConstructor=he,function(c){Kt=c}(Ai),function(c){Fu=c}(Ai),function(c){rd=c}(At);var nr,Ni=new(function(c){function s(){return null!==c&&c.apply(this,arguments)||this}return ie.__extends(s,c),s.prototype.compare=function(u,d){var h=u.node.compareTo(d.node);return 0===h?T(u.name,d.name):h},s.prototype.isDefinedOn=function(u){return!0},s.prototype.indexedValueChanged=function(u,d){return!u.equals(d)},s.prototype.minPost=function(){return Ye.MIN},s.prototype.maxPost=function(){return Ye.MAX},s.prototype.makePost=function(u,d){var h=At(u);return new Ye(d,h)},s.prototype.toString=function(){return".value"},s}(er)),oo=function(c){function s(u){var d=c.call(this)||this;return d.indexPath_=u,I.assert(!u.isEmpty()&&".priority"!==u.getFront(),"Can't create PathIndex with empty path or .priority key"),d}return ie.__extends(s,c),s.prototype.extractChild=function(u){return u.getChild(this.indexPath_)},s.prototype.isDefinedOn=function(u){return!u.getChild(this.indexPath_).isEmpty()},s.prototype.compare=function(u,d){var h=this.extractChild(u.node),g=this.extractChild(d.node),y=h.compareTo(g);return 0===y?T(u.name,d.name):y},s.prototype.makePost=function(u,d){var h=At(u),g=he.EMPTY_NODE.updateChild(this.indexPath_,h);return new Ye(d,g)},s.prototype.maxPost=function(){var u=he.EMPTY_NODE.updateChild(this.indexPath_,Ai);return new Ye(N,u)},s.prototype.toString=function(){return this.indexPath_.slice().join("/")},s}(er),Br=function(){function c(s,u,d){this.node_=s,this.ref_=u,this.index_=d}return c.prototype.val=function(){return I.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},c.prototype.exportVal=function(){return I.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},c.prototype.toJSON=function(){return I.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},c.prototype.exists=function(){return I.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},c.prototype.child=function(s){I.validateArgCount("DataSnapshot.child",0,1,arguments.length),s=String(s),$e("DataSnapshot.child",1,s,!1);var u=new re(s),d=this.ref_.child(u);return new c(this.node_.getChild(u),d,pt)},c.prototype.hasChild=function(s){I.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),$e("DataSnapshot.hasChild",1,s,!1);var u=new re(s);return!this.node_.getChild(u).isEmpty()},c.prototype.getPriority=function(){return I.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},c.prototype.forEach=function(s){var u=this;if(I.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),I.validateCallback("DataSnapshot.forEach",1,s,!1),this.node_.isLeafNode())return!1;var d=this.node_;return!!d.forEachChild(this.index_,function(h,g){return s(new c(g,u.ref_.child(h),pt))})},c.prototype.hasChildren=function(){return I.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(c.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),c.prototype.numChildren=function(){return I.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},c.prototype.getRef=function(){return I.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(c.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),c}(),Lu=function(){function c(s,u,d,h){this.eventType=s,this.eventRegistration=u,this.snapshot=d,this.prevName=h}return c.prototype.getPath=function(){var s=this.snapshot.getRef();return"value"===this.eventType?s.path:s.getParent().path},c.prototype.getEventType=function(){return this.eventType},c.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},c.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+I.stringify(this.snapshot.exportVal())},c}(),ve=function(){function c(s,u,d){this.eventRegistration=s,this.error=u,this.path=d}return c.prototype.getPath=function(){return this.path},c.prototype.getEventType=function(){return"cancel"},c.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},c.prototype.toString=function(){return this.path.toString()+":cancel"},c}(),jo=function(){function c(s,u,d){this.callback_=s,this.cancelCallback_=u,this.context_=d}return c.prototype.respondsTo=function(s){return"value"===s},c.prototype.createEvent=function(s,u){var d=u.getQueryParams().getIndex();return new Lu("value",this,new Br(s.snapshotNode,u.getRef(),d))},c.prototype.getEventRunner=function(s){var u=this.context_;if("cancel"===s.getEventType()){I.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var d=this.cancelCallback_;return function(){d.call(u,s.error)}}var h=this.callback_;return function(){h.call(u,s.snapshot)}},c.prototype.createCancelEvent=function(s,u){return this.cancelCallback_?new ve(this,s,u):null},c.prototype.matches=function(s){return s instanceof c&&(!s.callback_||!this.callback_||s.callback_===this.callback_&&s.context_===this.context_)},c.prototype.hasAnyCallback=function(){return null!==this.callback_},c}(),Vu=function(){function c(s,u,d){this.callbacks_=s,this.cancelCallback_=u,this.context_=d}return c.prototype.respondsTo=function(s){var u="children_added"===s?"child_added":s;return I.contains(this.callbacks_,u="children_removed"===u?"child_removed":u)},c.prototype.createCancelEvent=function(s,u){return this.cancelCallback_?new ve(this,s,u):null},c.prototype.createEvent=function(s,u){I.assert(null!=s.childName,"Child events should have a childName.");var d=u.getRef().child(s.childName),h=u.getQueryParams().getIndex();return new Lu(s.type,this,new Br(s.snapshotNode,d,h),s.prevName)},c.prototype.getEventRunner=function(s){var u=this.context_;if("cancel"===s.getEventType()){I.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var d=this.cancelCallback_;return function(){d.call(u,s.error)}}var h=this.callbacks_[s.eventType];return function(){h.call(u,s.snapshot,s.prevName)}},c.prototype.matches=function(s){var u=this;if(s instanceof c){if(!this.callbacks_||!s.callbacks_)return!0;if(this.context_===s.context_){var d=Object.keys(s.callbacks_),h=Object.keys(this.callbacks_),g=d.length;if(g===h.length){if(1===g){var E=d[0],w=h[0];return!(w!==E||s.callbacks_[E]&&this.callbacks_[w]&&s.callbacks_[E]!==this.callbacks_[w])}return h.every(function(S){return s.callbacks_[S]===u.callbacks_[S]})}}}return!1},c.prototype.hasAnyCallback=function(){return null!==this.callbacks_},c}(),so=function(){function c(s,u,d,h){this.repo=s,this.path=u,this.queryParams_=d,this.orderByCalled_=h}return Object.defineProperty(c,"__referenceConstructor",{get:function(){return I.assert(nr,"Reference.ts has not been loaded"),nr},set:function(s){nr=s},enumerable:!1,configurable:!0}),c.validateQueryEndpoints_=function(s){var u=null,d=null;if(s.hasStart()&&(u=s.getIndexStartValue()),s.hasEnd()&&(d=s.getIndexEndValue()),s.getIndex()===we){var h="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",g="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(s.hasStart()){if(s.getIndexStartName()!==A)throw new Error(h);if("string"!=typeof u)throw new Error(g)}if(s.hasEnd()){if(s.getIndexEndName()!==N)throw new Error(h);if("string"!=typeof d)throw new Error(g)}}else if(s.getIndex()===pt){if(null!=u&&!ce(u)||null!=d&&!ce(d))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(I.assert(s.getIndex()instanceof oo||s.getIndex()===Ni,"unknown index type."),null!=u&&"object"==typeof u||null!=d&&"object"==typeof d)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},c.validateLimit_=function(s){if(s.hasStart()&&s.hasEnd()&&s.hasLimit()&&!s.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},c.prototype.validateNoPreviousOrderByCall_=function(s){if(!0===this.orderByCalled_)throw new Error(s+": You can't combine multiple orderBy calls.")},c.prototype.getQueryParams=function(){return this.queryParams_},c.prototype.getRef=function(){return I.validateArgCount("Query.ref",0,0,arguments.length),new c.__referenceConstructor(this.repo,this.path)},c.prototype.on=function(s,u,d,h){I.validateArgCount("Query.on",2,4,arguments.length),Ht("Query.on",1,s,!1),I.validateCallback("Query.on",2,u,!1);var g=c.getCancelAndContextArgs_("Query.on",d,h);if("value"===s)this.onValueEvent(u,g.cancel,g.context);else{var y={};y[s]=u,this.onChildEvent(y,g.cancel,g.context)}return u},c.prototype.onValueEvent=function(s,u,d){var h=new jo(s,u||null,d||null);this.repo.addEventCallbackForQuery(this,h)},c.prototype.onChildEvent=function(s,u,d){var h=new Vu(s,u,d);this.repo.addEventCallbackForQuery(this,h)},c.prototype.off=function(s,u,d){I.validateArgCount("Query.off",0,3,arguments.length),Ht("Query.off",1,s,!0),I.validateCallback("Query.off",2,u,!0),I.validateContextObject("Query.off",3,d,!0);var h=null,g=null;if("value"===s){var y=u||null;h=new jo(y,null,d||null)}else s&&(u&&((g={})[s]=u),h=new Vu(g,null,d||null));this.repo.removeEventCallbackForQuery(this,h)},c.prototype.once=function(s,u,d,h){var g=this;I.validateArgCount("Query.once",1,4,arguments.length),Ht("Query.once",1,s,!1),I.validateCallback("Query.once",2,u,!0);var y=c.getCancelAndContextArgs_("Query.once",d,h),E=!0,w=new I.Deferred;w.promise.catch(function(){});var S=function(P){E&&(E=!1,g.off(s,S),u&&u.bind(y.context)(P),w.resolve(P))};return this.on(s,S,function(P){g.off(s,S),y.cancel&&y.cancel.bind(y.context)(P),w.reject(P)}),w.promise},c.prototype.limitToFirst=function(s){if(I.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof s||Math.floor(s)!==s||s<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new c(this.repo,this.path,this.queryParams_.limitToFirst(s),this.orderByCalled_)},c.prototype.limitToLast=function(s){if(I.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof s||Math.floor(s)!==s||s<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new c(this.repo,this.path,this.queryParams_.limitToLast(s),this.orderByCalled_)},c.prototype.orderByChild=function(s){if(I.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===s)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===s)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===s)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');$e("Query.orderByChild",1,s,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var u=new re(s);if(u.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var d=new oo(u),h=this.queryParams_.orderBy(d);return c.validateQueryEndpoints_(h),new c(this.repo,this.path,h,!0)},c.prototype.orderByKey=function(){I.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var s=this.queryParams_.orderBy(we);return c.validateQueryEndpoints_(s),new c(this.repo,this.path,s,!0)},c.prototype.orderByPriority=function(){I.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var s=this.queryParams_.orderBy(pt);return c.validateQueryEndpoints_(s),new c(this.repo,this.path,s,!0)},c.prototype.orderByValue=function(){I.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var s=this.queryParams_.orderBy(Ni);return c.validateQueryEndpoints_(s),new c(this.repo,this.path,s,!0)},c.prototype.startAt=function(s,u){void 0===s&&(s=null),I.validateArgCount("Query.startAt",0,2,arguments.length),Pe("Query.startAt",1,s,this.path,!0),Nt("Query.startAt",2,u,!0);var d=this.queryParams_.startAt(s,u);if(c.validateLimit_(d),c.validateQueryEndpoints_(d),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===s&&(s=null,u=null),new c(this.repo,this.path,d,this.orderByCalled_)},c.prototype.endAt=function(s,u){void 0===s&&(s=null),I.validateArgCount("Query.endAt",0,2,arguments.length),Pe("Query.endAt",1,s,this.path,!0),Nt("Query.endAt",2,u,!0);var d=this.queryParams_.endAt(s,u);if(c.validateLimit_(d),c.validateQueryEndpoints_(d),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new c(this.repo,this.path,d,this.orderByCalled_)},c.prototype.equalTo=function(s,u){if(I.validateArgCount("Query.equalTo",1,2,arguments.length),Pe("Query.equalTo",1,s,this.path,!1),Nt("Query.equalTo",2,u,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(s,u).endAt(s,u)},c.prototype.toString=function(){return I.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},c.prototype.toJSON=function(){return I.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},c.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},c.prototype.queryIdentifier=function(){var s=this.queryObject(),u=Ie(s);return"{}"===u?"default":u},c.prototype.isEqual=function(s){if(I.validateArgCount("Query.isEqual",1,1,arguments.length),!(s instanceof c)){var u="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(u)}var d=this.repo===s.repo,h=this.path.equals(s.path),g=this.queryIdentifier()===s.queryIdentifier();return d&&h&&g},c.getCancelAndContextArgs_=function(s,u,d){var h={cancel:null,context:null};if(u&&d)h.cancel=u,I.validateCallback(s,3,h.cancel,!0),h.context=d,I.validateContextObject(s,4,h.context,!0);else if(u)if("object"==typeof u&&null!==u)h.context=u;else{if("function"!=typeof u)throw new Error(I.errorPrefix(s,3,!0)+" must either be a cancel callback or a context object.");h.cancel=u}return h},Object.defineProperty(c.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),c}(),Ag=function(){function c(s){this.node_=s}return c.prototype.getImmediateChild=function(s){return new c(this.node_.getImmediateChild(s))},c.prototype.node=function(){return this.node_},c}(),Hr=function(){function c(s,u){this.syncTree_=s,this.path_=u}return c.prototype.getImmediateChild=function(s){var u=this.path_.child(s);return new c(this.syncTree_,u)},c.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},c}(),ad=function(c,s,u){return c&&"object"==typeof c?(I.assert(".sv"in c,"Unexpected leaf node or priority contents"),"string"==typeof c[".sv"]?Ng(c[".sv"],s,u):"object"==typeof c[".sv"]?Vt(c[".sv"],s):void I.assert(!1,"Unexpected server value: "+JSON.stringify(c,null,2))):c},Ng=function(c,s,u){switch(c){case"timestamp":return u.timestamp;default:I.assert(!1,"Unexpected server value: "+c)}},Vt=function(c,s,u){c.hasOwnProperty("increment")||I.assert(!1,"Unexpected server value: "+JSON.stringify(c,null,2));var d=c.increment;"number"!=typeof d&&I.assert(!1,"Unexpected increment value: "+d);var h=s.node();if(I.assert(null!=h,"Expected ChildrenNode.EMPTY_NODE for nulls"),!h.isLeafNode())return d;var y=h.getValue();return"number"!=typeof y?d:y+d},ju=function(c,s,u,d){return ra(s,new Hr(u,c),d)},na=function(c,s,u){return ra(c,new Ag(s),u)};function ra(c,s,u){var g,d=c.getPriority().val(),h=ad(d,s.getImmediateChild(".priority"),u);if(c.isLeafNode()){var y=c,E=ad(y.getValue(),s,u);return E!==y.getValue()||h!==y.getPriority().val()?new $t(E,At(h)):c}var w=c;return g=w,h!==w.getPriority().val()&&(g=g.updatePriority(new $t(h))),w.forEachChild(pt,function(S,P){var B=ra(P,s.getImmediateChild(S),u);B!==P&&(g=g.updateImmediateChild(S,B))}),g}var Wr,jt,ia=function(){function c(){this.value=null,this.children=new Map}return c.prototype.find=function(s){if(null!=this.value)return this.value.getChild(s);if(!s.isEmpty()&&this.children.size>0){var u=s.getFront();return s=s.popFront(),this.children.has(u)?this.children.get(u).find(s):null}return null},c.prototype.remember=function(s,u){if(s.isEmpty())this.value=u,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(s,u);else{var d=s.getFront();this.children.has(d)||this.children.set(d,new c);var h=this.children.get(d);s=s.popFront(),h.remember(s,u)}},c.prototype.forget=function(s){if(s.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var u=this.value;this.value=null;var d=this;return u.forEachChild(pt,function(y,E){d.remember(new re(y),E)}),this.forget(s)}if(this.children.size>0){var h=s.getFront();return s=s.popFront(),this.children.has(h)&&this.children.get(h).forget(s)&&this.children.delete(h),0===this.children.size}return!0},c.prototype.forEachTree=function(s,u){null!==this.value?u(s,this.value):this.forEachChild(function(d,h){var g=new re(s.toString()+"/"+d);h.forEachTree(g,u)})},c.prototype.forEachChild=function(s){this.children.forEach(function(u,d){s(d,u)})},c}(),Ue=(()=>(function(c){c[c.OVERWRITE=0]="OVERWRITE",c[c.MERGE=1]="MERGE",c[c.ACK_USER_WRITE=2]="ACK_USER_WRITE",c[c.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ue||(Ue={})),Ue))(),$r=function(){function c(s,u,d,h){this.fromUser=s,this.fromServer=u,this.queryId=d,this.tagged=h,I.assert(!h||u,"Tagged queries must be from server.")}return c.User=new c(!0,!1,null,!1),c.Server=new c(!1,!0,null,!1),c.forServerTaggedQuery=function(s){return new c(!1,!0,s,!0)},c}(),Mg=function(){function c(s,u,d){this.path=s,this.affectedTree=u,this.revert=d,this.type=Ue.ACK_USER_WRITE,this.source=$r.User}return c.prototype.operationForChild=function(s){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return I.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var u=this.affectedTree.subtree(new re(s));return new c(re.Empty,u,this.revert)}return I.assert(this.path.getFront()===s,"operationForChild called for unrelated child."),new c(this.path.popFront(),this.affectedTree,this.revert)},c}(),an=function(){function c(s,u){void 0===u&&(Wr||(Wr=new Ur(O)),u=Wr),this.value=s,this.children=u}return c.fromObject=function(s){var u=c.Empty;return ee(s,function(d,h){u=u.set(new re(d),h)}),u},c.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},c.prototype.findRootMostMatchingPathAndValue=function(s,u){if(null!=this.value&&u(this.value))return{path:re.Empty,value:this.value};if(s.isEmpty())return null;var d=s.getFront(),h=this.children.get(d);if(null!==h){var g=h.findRootMostMatchingPathAndValue(s.popFront(),u);return null!=g?{path:new re(d).child(g.path),value:g.value}:null}return null},c.prototype.findRootMostValueAndPath=function(s){return this.findRootMostMatchingPathAndValue(s,function(){return!0})},c.prototype.subtree=function(s){if(s.isEmpty())return this;var u=s.getFront(),d=this.children.get(u);return null!==d?d.subtree(s.popFront()):c.Empty},c.prototype.set=function(s,u){if(s.isEmpty())return new c(u,this.children);var d=s.getFront(),g=(this.children.get(d)||c.Empty).set(s.popFront(),u),y=this.children.insert(d,g);return new c(this.value,y)},c.prototype.remove=function(s){if(s.isEmpty())return this.children.isEmpty()?c.Empty:new c(null,this.children);var u=s.getFront(),d=this.children.get(u);if(d){var h=d.remove(s.popFront()),g=void 0;return g=h.isEmpty()?this.children.remove(u):this.children.insert(u,h),null===this.value&&g.isEmpty()?c.Empty:new c(this.value,g)}return this},c.prototype.get=function(s){if(s.isEmpty())return this.value;var u=s.getFront(),d=this.children.get(u);return d?d.get(s.popFront()):null},c.prototype.setTree=function(s,u){if(s.isEmpty())return u;var y,d=s.getFront(),g=(this.children.get(d)||c.Empty).setTree(s.popFront(),u);return y=g.isEmpty()?this.children.remove(d):this.children.insert(d,g),new c(this.value,y)},c.prototype.fold=function(s){return this.fold_(re.Empty,s)},c.prototype.fold_=function(s,u){var d={};return this.children.inorderTraversal(function(h,g){d[h]=g.fold_(s.child(h),u)}),u(s,this.value,d)},c.prototype.findOnPath=function(s,u){return this.findOnPath_(s,re.Empty,u)},c.prototype.findOnPath_=function(s,u,d){var h=!!this.value&&d(u,this.value);if(h)return h;if(s.isEmpty())return null;var g=s.getFront(),y=this.children.get(g);return y?y.findOnPath_(s.popFront(),u.child(g),d):null},c.prototype.foreachOnPath=function(s,u){return this.foreachOnPath_(s,re.Empty,u)},c.prototype.foreachOnPath_=function(s,u,d){if(s.isEmpty())return this;this.value&&d(u,this.value);var h=s.getFront(),g=this.children.get(h);return g?g.foreachOnPath_(s.popFront(),u.child(h),d):c.Empty},c.prototype.foreach=function(s){this.foreach_(re.Empty,s)},c.prototype.foreach_=function(s,u){this.children.inorderTraversal(function(d,h){h.foreach_(s.child(d),u)}),this.value&&u(s,this.value)},c.prototype.foreachChild=function(s){this.children.inorderTraversal(function(u,d){d.value&&s(u,d.value)})},c.Empty=new c(null),c}(),Uo=function(){function c(s,u){this.source=s,this.path=u,this.type=Ue.LISTEN_COMPLETE}return c.prototype.operationForChild=function(s){return this.path.isEmpty()?new c(this.source,re.Empty):new c(this.source,this.path.popFront())},c}(),Mi=function(){function c(s,u,d){this.source=s,this.path=u,this.snap=d,this.type=Ue.OVERWRITE}return c.prototype.operationForChild=function(s){return this.path.isEmpty()?new c(this.source,re.Empty,this.snap.getImmediateChild(s)):new c(this.source,this.path.popFront(),this.snap)},c}(),Bo=function(){function c(s,u,d){this.source=s,this.path=u,this.children=d,this.type=Ue.MERGE}return c.prototype.operationForChild=function(s){if(this.path.isEmpty()){var u=this.children.subtree(new re(s));return u.isEmpty()?null:u.value?new Mi(this.source,re.Empty,u.value):new c(this.source,re.Empty,u)}return I.assert(this.path.getFront()===s,"Can't get a merge for a child not on the path of the operation"),new c(this.source,this.path.popFront(),this.children)},c.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},c}(),Er=function(){function c(s,u,d){this.node_=s,this.fullyInitialized_=u,this.filtered_=d}return c.prototype.isFullyInitialized=function(){return this.fullyInitialized_},c.prototype.isFiltered=function(){return this.filtered_},c.prototype.isCompleteForPath=function(s){if(s.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var u=s.getFront();return this.isCompleteForChild(u)},c.prototype.isCompleteForChild=function(s){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(s)},c.prototype.getNode=function(){return this.node_},c}(),rr=function(){function c(s,u){this.eventCache_=s,this.serverCache_=u}return c.prototype.updateEventSnap=function(s,u,d){return new c(new Er(s,u,d),this.serverCache_)},c.prototype.updateServerSnap=function(s,u,d){return new c(this.eventCache_,new Er(s,u,d))},c.prototype.getEventCache=function(){return this.eventCache_},c.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},c.prototype.getServerCache=function(){return this.serverCache_},c.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},c.Empty=new c(new Er(he.EMPTY_NODE,!1,!1),new Er(he.EMPTY_NODE,!1,!1)),c}(),Ve=function(){function c(s,u,d,h,g){this.type=s,this.snapshotNode=u,this.childName=d,this.oldSnap=h,this.prevName=g}return c.valueChange=function(s){return new c(c.VALUE,s)},c.childAddedChange=function(s,u){return new c(c.CHILD_ADDED,u,s)},c.childRemovedChange=function(s,u){return new c(c.CHILD_REMOVED,u,s)},c.childChangedChange=function(s,u,d){return new c(c.CHILD_CHANGED,u,s,d)},c.childMovedChange=function(s,u){return new c(c.CHILD_MOVED,u,s)},c.CHILD_ADDED="child_added",c.CHILD_REMOVED="child_removed",c.CHILD_CHANGED="child_changed",c.CHILD_MOVED="child_moved",c.VALUE="value",c}(),oa=function(){function c(s){this.index_=s}return c.prototype.updateChild=function(s,u,d,h,g,y){I.assert(s.isIndexed(this.index_),"A node must be indexed if only a child is updated");var E=s.getImmediateChild(u);return E.getChild(h).equals(d.getChild(h))&&E.isEmpty()===d.isEmpty()||(null!=y&&(d.isEmpty()?s.hasChild(u)?y.trackChildChange(Ve.childRemovedChange(u,E)):I.assert(s.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):E.isEmpty()?y.trackChildChange(Ve.childAddedChange(u,d)):y.trackChildChange(Ve.childChangedChange(u,d,E))),s.isLeafNode()&&d.isEmpty())?s:s.updateImmediateChild(u,d).withIndex(this.index_)},c.prototype.updateFullNode=function(s,u,d){return null!=d&&(s.isLeafNode()||s.forEachChild(pt,function(h,g){u.hasChild(h)||d.trackChildChange(Ve.childRemovedChange(h,g))}),u.isLeafNode()||u.forEachChild(pt,function(h,g){if(s.hasChild(h)){var y=s.getImmediateChild(h);y.equals(g)||d.trackChildChange(Ve.childChangedChange(h,g,y))}else d.trackChildChange(Ve.childAddedChange(h,g))})),u.withIndex(this.index_)},c.prototype.updatePriority=function(s,u){return s.isEmpty()?he.EMPTY_NODE:s.updatePriority(u)},c.prototype.filtersNodes=function(){return!1},c.prototype.getIndexedFilter=function(){return this},c.prototype.getIndex=function(){return this.index_},c}(),Ho=function(){function c(){this.changeMap=new Map}return c.prototype.trackChildChange=function(s){var u=s.type,d=s.childName;I.assert(u===Ve.CHILD_ADDED||u===Ve.CHILD_CHANGED||u===Ve.CHILD_REMOVED,"Only child changes supported for tracking"),I.assert(".priority"!==d,"Only non-priority child changes can be tracked.");var h=this.changeMap.get(d);if(h){var g=h.type;if(u===Ve.CHILD_ADDED&&g===Ve.CHILD_REMOVED)this.changeMap.set(d,Ve.childChangedChange(d,s.snapshotNode,h.snapshotNode));else if(u===Ve.CHILD_REMOVED&&g===Ve.CHILD_ADDED)this.changeMap.delete(d);else if(u===Ve.CHILD_REMOVED&&g===Ve.CHILD_CHANGED)this.changeMap.set(d,Ve.childRemovedChange(d,h.oldSnap));else if(u===Ve.CHILD_CHANGED&&g===Ve.CHILD_ADDED)this.changeMap.set(d,Ve.childAddedChange(d,s.snapshotNode));else{if(u!==Ve.CHILD_CHANGED||g!==Ve.CHILD_CHANGED)throw I.assertionError("Illegal combination of changes: "+s+" occurred after "+h);this.changeMap.set(d,Ve.childChangedChange(d,s.snapshotNode,h.oldSnap))}}else this.changeMap.set(d,s)},c.prototype.getChanges=function(){return Array.from(this.changeMap.values())},c}(),sa=new(function(){function c(){}return c.prototype.getCompleteChild=function(s){return null},c.prototype.getChildAfterChild=function(s,u,d){return null},c}()),$o=function(){function c(s,u,d){void 0===d&&(d=null),this.writes_=s,this.viewCache_=u,this.optCompleteServerCache_=d}return c.prototype.getCompleteChild=function(s){var u=this.viewCache_.getEventCache();if(u.isCompleteForChild(s))return u.getNode().getImmediateChild(s);var d=null!=this.optCompleteServerCache_?new Er(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(s,d)},c.prototype.getChildAfterChild=function(s,u,d){var h=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),g=this.writes_.calcIndexedSlice(h,u,1,d,s);return 0===g.length?null:g[0]},c}(),Uu=function(s,u){this.viewCache=s,this.changes=u},jn=function(){function c(s){this.filter_=s}return c.prototype.assertIndexed=function(s){I.assert(s.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),I.assert(s.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},c.prototype.applyOperation=function(s,u,d,h){var y,E,g=new Ho;if(u.type===Ue.OVERWRITE){var w=u;w.source.fromUser?y=this.applyUserOverwrite_(s,w.path,w.snap,d,h,g):(I.assert(w.source.fromServer,"Unknown source."),E=w.source.tagged||s.getServerCache().isFiltered()&&!w.path.isEmpty(),y=this.applyServerOverwrite_(s,w.path,w.snap,d,h,E,g))}else if(u.type===Ue.MERGE){var S=u;S.source.fromUser?y=this.applyUserMerge_(s,S.path,S.children,d,h,g):(I.assert(S.source.fromServer,"Unknown source."),E=S.source.tagged||s.getServerCache().isFiltered(),y=this.applyServerMerge_(s,S.path,S.children,d,h,E,g))}else if(u.type===Ue.ACK_USER_WRITE){var P=u;y=P.revert?this.revertUserWrite_(s,P.path,d,h,g):this.ackUserWrite_(s,P.path,P.affectedTree,d,h,g)}else{if(u.type!==Ue.LISTEN_COMPLETE)throw I.assertionError("Unknown operation type: "+u.type);y=this.listenComplete_(s,u.path,d,g)}var B=g.getChanges();return c.maybeAddValueEvent_(s,y,B),new Uu(y,B)},c.maybeAddValueEvent_=function(s,u,d){var h=u.getEventCache();if(h.isFullyInitialized()){var g=h.getNode().isLeafNode()||h.getNode().isEmpty(),y=s.getCompleteEventSnap();(d.length>0||!s.getEventCache().isFullyInitialized()||g&&!h.getNode().equals(y)||!h.getNode().getPriority().equals(y.getPriority()))&&d.push(Ve.valueChange(u.getCompleteEventSnap()))}},c.prototype.generateEventCacheAfterServerEvent_=function(s,u,d,h,g){var y=s.getEventCache();if(null!=d.shadowingWrite(u))return s;var E=void 0,w=void 0;if(u.isEmpty())if(I.assert(s.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),s.getServerCache().isFiltered()){var S=s.getCompleteServerSnap(),B=d.calcCompleteEventChildren(S instanceof he?S:he.EMPTY_NODE);E=this.filter_.updateFullNode(s.getEventCache().getNode(),B,g)}else{var W=d.calcCompleteEventCache(s.getCompleteServerSnap());E=this.filter_.updateFullNode(s.getEventCache().getNode(),W,g)}else{var G=u.getFront();if(".priority"===G){I.assert(1===u.getLength(),"Can't have a priority with additional path components");var te=y.getNode();w=s.getServerCache().getNode();var se=d.calcEventCacheAfterServerOverwrite(u,te,w);E=null!=se?this.filter_.updatePriority(te,se):y.getNode()}else{var De=u.popFront(),Oe=void 0;if(y.isCompleteForChild(G)){w=s.getServerCache().getNode();var mn=d.calcEventCacheAfterServerOverwrite(u,y.getNode(),w);Oe=null!=mn?y.getNode().getImmediateChild(G).updateChild(De,mn):y.getNode().getImmediateChild(G)}else Oe=d.calcCompleteChild(G,s.getServerCache());E=null!=Oe?this.filter_.updateChild(y.getNode(),G,Oe,De,h,g):y.getNode()}}return s.updateEventSnap(E,y.isFullyInitialized()||u.isEmpty(),this.filter_.filtersNodes())},c.prototype.applyServerOverwrite_=function(s,u,d,h,g,y,E){var S,w=s.getServerCache(),P=y?this.filter_:this.filter_.getIndexedFilter();if(u.isEmpty())S=P.updateFullNode(w.getNode(),d,null);else if(P.filtersNodes()&&!w.isFiltered()){var B=w.getNode().updateChild(u,d);S=P.updateFullNode(w.getNode(),B,null)}else{var W=u.getFront();if(!w.isCompleteForPath(u)&&u.getLength()>1)return s;var G=u.popFront(),se=w.getNode().getImmediateChild(W).updateChild(G,d);S=".priority"===W?P.updatePriority(w.getNode(),se):P.updateChild(w.getNode(),W,se,G,sa,null)}var De=s.updateServerSnap(S,w.isFullyInitialized()||u.isEmpty(),P.filtersNodes()),Oe=new $o(h,De,g);return this.generateEventCacheAfterServerEvent_(De,u,h,Oe,E)},c.prototype.applyUserOverwrite_=function(s,u,d,h,g,y){var w,S,E=s.getEventCache(),P=new $o(h,s,g);if(u.isEmpty())S=this.filter_.updateFullNode(s.getEventCache().getNode(),d,y),w=s.updateEventSnap(S,!0,this.filter_.filtersNodes());else{var B=u.getFront();if(".priority"===B)S=this.filter_.updatePriority(s.getEventCache().getNode(),d),w=s.updateEventSnap(S,E.isFullyInitialized(),E.isFiltered());else{var W=u.popFront(),G=E.getNode().getImmediateChild(B),te=void 0;if(W.isEmpty())te=d;else{var se=P.getCompleteChild(B);te=null!=se?".priority"===W.getBack()&&se.getChild(W.parent()).isEmpty()?se:se.updateChild(W,d):he.EMPTY_NODE}if(G.equals(te))w=s;else{var De=this.filter_.updateChild(E.getNode(),B,te,W,P,y);w=s.updateEventSnap(De,E.isFullyInitialized(),this.filter_.filtersNodes())}}}return w},c.cacheHasChild_=function(s,u){return s.getEventCache().isCompleteForChild(u)},c.prototype.applyUserMerge_=function(s,u,d,h,g,y){var E=this,w=s;return d.foreach(function(S,P){var B=u.child(S);c.cacheHasChild_(s,B.getFront())&&(w=E.applyUserOverwrite_(w,B,P,h,g,y))}),d.foreach(function(S,P){var B=u.child(S);c.cacheHasChild_(s,B.getFront())||(w=E.applyUserOverwrite_(w,B,P,h,g,y))}),w},c.prototype.applyMerge_=function(s,u){return u.foreach(function(d,h){s=s.updateChild(d,h)}),s},c.prototype.applyServerMerge_=function(s,u,d,h,g,y,E){var w=this;if(s.getServerCache().getNode().isEmpty()&&!s.getServerCache().isFullyInitialized())return s;var P,S=s;P=u.isEmpty()?d:an.Empty.setTree(u,d);var B=s.getServerCache().getNode();return P.children.inorderTraversal(function(W,G){if(B.hasChild(W)){var te=s.getServerCache().getNode().getImmediateChild(W),se=w.applyMerge_(te,G);S=w.applyServerOverwrite_(S,new re(W),se,h,g,y,E)}}),P.children.inorderTraversal(function(W,G){var te=!s.getServerCache().isCompleteForChild(W)&&null==G.value;if(!B.hasChild(W)&&!te){var se=s.getServerCache().getNode().getImmediateChild(W),De=w.applyMerge_(se,G);S=w.applyServerOverwrite_(S,new re(W),De,h,g,y,E)}}),S},c.prototype.ackUserWrite_=function(s,u,d,h,g,y){if(null!=h.shadowingWrite(u))return s;var E=s.getServerCache().isFiltered(),w=s.getServerCache();if(null!=d.value){if(u.isEmpty()&&w.isFullyInitialized()||w.isCompleteForPath(u))return this.applyServerOverwrite_(s,u,w.getNode().getChild(u),h,g,E,y);if(u.isEmpty()){var S=an.Empty;return w.getNode().forEachChild(we,function(B,W){S=S.set(new re(B),W)}),this.applyServerMerge_(s,u,S,h,g,E,y)}return s}var P=an.Empty;return d.foreach(function(B,W){var G=u.child(B);w.isCompleteForPath(G)&&(P=P.set(B,w.getNode().getChild(G)))}),this.applyServerMerge_(s,u,P,h,g,E,y)},c.prototype.listenComplete_=function(s,u,d,h){var g=s.getServerCache(),y=s.updateServerSnap(g.getNode(),g.isFullyInitialized()||u.isEmpty(),g.isFiltered());return this.generateEventCacheAfterServerEvent_(y,u,d,sa,h)},c.prototype.revertUserWrite_=function(s,u,d,h,g){var y;if(null!=d.shadowingWrite(u))return s;var E=new $o(d,s,h),w=s.getEventCache().getNode(),S=void 0;if(u.isEmpty()||".priority"===u.getFront()){var P=void 0;if(s.getServerCache().isFullyInitialized())P=d.calcCompleteEventCache(s.getCompleteServerSnap());else{var B=s.getServerCache().getNode();I.assert(B instanceof he,"serverChildren would be complete if leaf node"),P=d.calcCompleteEventChildren(B)}S=this.filter_.updateFullNode(w,P=P,g)}else{var W=u.getFront(),G=d.calcCompleteChild(W,s.getServerCache());null==G&&s.getServerCache().isCompleteForChild(W)&&(G=w.getImmediateChild(W)),(S=null!=G?this.filter_.updateChild(w,W,G,u.popFront(),E,g):s.getEventCache().getNode().hasChild(W)?this.filter_.updateChild(w,W,he.EMPTY_NODE,u.popFront(),E,g):w).isEmpty()&&s.getServerCache().isFullyInitialized()&&(y=d.calcCompleteEventCache(s.getCompleteServerSnap())).isLeafNode()&&(S=this.filter_.updateFullNode(S,y,g))}return y=s.getServerCache().isFullyInitialized()||null!=d.shadowingWrite(re.Empty),s.updateEventSnap(S,y,this.filter_.filtersNodes())},c}(),ld=function(){function c(s){this.query_=s,this.index_=this.query_.getQueryParams().getIndex()}return c.prototype.generateEventsForChanges=function(s,u,d){var h=this,g=[],y=[];return s.forEach(function(E){E.type===Ve.CHILD_CHANGED&&h.index_.indexedValueChanged(E.oldSnap,E.snapshotNode)&&y.push(Ve.childMovedChange(E.childName,E.snapshotNode))}),this.generateEventsForType_(g,Ve.CHILD_REMOVED,s,d,u),this.generateEventsForType_(g,Ve.CHILD_ADDED,s,d,u),this.generateEventsForType_(g,Ve.CHILD_MOVED,y,d,u),this.generateEventsForType_(g,Ve.CHILD_CHANGED,s,d,u),this.generateEventsForType_(g,Ve.VALUE,s,d,u),g},c.prototype.generateEventsForType_=function(s,u,d,h,g){var y=this,E=d.filter(function(w){return w.type===u});E.sort(this.compareChanges_.bind(this)),E.forEach(function(w){var S=y.materializeSingleChange_(w,g);h.forEach(function(P){P.respondsTo(w.type)&&s.push(P.createEvent(S,y.query_))})})},c.prototype.materializeSingleChange_=function(s,u){return"value"===s.type||"child_removed"===s.type||(s.prevName=u.getPredecessorChildName(s.childName,s.snapshotNode,this.index_)),s},c.prototype.compareChanges_=function(s,u){if(null==s.childName||null==u.childName)throw I.assertionError("Should only compare child_ events.");var d=new Ye(s.childName,s.snapshotNode),h=new Ye(u.childName,u.snapshotNode);return this.index_.compare(d,h)},c}(),Bu=function(){function c(s,u){this.query_=s,this.eventRegistrations_=[];var d=this.query_.getQueryParams(),h=new oa(d.getIndex()),g=d.getNodeFilter();this.processor_=new jn(g);var y=u.getServerCache(),E=u.getEventCache(),w=h.updateFullNode(he.EMPTY_NODE,y.getNode(),null),S=g.updateFullNode(he.EMPTY_NODE,E.getNode(),null),P=new Er(w,y.isFullyInitialized(),h.filtersNodes()),B=new Er(S,E.isFullyInitialized(),g.filtersNodes());this.viewCache_=new rr(B,P),this.eventGenerator_=new ld(this.query_)}return c.prototype.getQuery=function(){return this.query_},c.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},c.prototype.getCompleteServerCache=function(s){var u=this.viewCache_.getCompleteServerSnap();return u&&(this.query_.getQueryParams().loadsAllData()||!s.isEmpty()&&!u.getImmediateChild(s.getFront()).isEmpty())?u.getChild(s):null},c.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},c.prototype.addEventRegistration=function(s){this.eventRegistrations_.push(s)},c.prototype.removeEventRegistration=function(s,u){var d=[];if(u){I.assert(null==s,"A cancel should cancel all event registrations.");var h=this.query_.path;this.eventRegistrations_.forEach(function(w){var S=w.createCancelEvent(u=u,h);S&&d.push(S)})}if(s){for(var g=[],y=0;y<this.eventRegistrations_.length;++y){var E=this.eventRegistrations_[y];if(E.matches(s)){if(s.hasAnyCallback()){g=g.concat(this.eventRegistrations_.slice(y+1));break}}else g.push(E)}this.eventRegistrations_=g}else this.eventRegistrations_=[];return d},c.prototype.applyOperation=function(s,u,d){s.type===Ue.MERGE&&null!==s.source.queryId&&(I.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),I.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var h=this.viewCache_,g=this.processor_.applyOperation(h,s,u,d);return this.processor_.assertIndexed(g.viewCache),I.assert(g.viewCache.getServerCache().isFullyInitialized()||!h.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=g.viewCache,this.generateEventsForChanges_(g.changes,g.viewCache.getEventCache().getNode(),null)},c.prototype.getInitialEvents=function(s){var u=this.viewCache_.getEventCache(),d=[];return u.getNode().isLeafNode()||u.getNode().forEachChild(pt,function(g,y){d.push(Ve.childAddedChange(g,y))}),u.isFullyInitialized()&&d.push(Ve.valueChange(u.getNode())),this.generateEventsForChanges_(d,u.getNode(),s)},c.prototype.generateEventsForChanges_=function(s,u,d){return this.eventGenerator_.generateEventsForChanges(s,u,d?[d]:this.eventRegistrations_)},c}(),gn=function(){function c(){this.views=new Map}return Object.defineProperty(c,"__referenceConstructor",{get:function(){return I.assert(jt,"Reference.ts has not been loaded"),jt},set:function(s){I.assert(!jt,"__referenceConstructor has already been defined"),jt=s},enumerable:!1,configurable:!0}),c.prototype.isEmpty=function(){return 0===this.views.size},c.prototype.applyOperation=function(s,u,d){var h,g,y=s.source.queryId;if(null!==y){var E=this.views.get(y);return I.assert(null!=E,"SyncTree gave us an op for an invalid query."),E.applyOperation(s,u,d)}var w=[];try{for(var S=ie.__values(this.views.values()),P=S.next();!P.done;P=S.next())w=w.concat((E=P.value).applyOperation(s,u,d))}catch(B){h={error:B}}finally{try{P&&!P.done&&(g=S.return)&&g.call(S)}finally{if(h)throw h.error}}return w},c.prototype.addEventRegistration=function(s,u,d,h,g){var y=s.queryIdentifier(),E=this.views.get(y);if(!E){var w=d.calcCompleteEventCache(g?h:null),S=!1;w?S=!0:h instanceof he?(w=d.calcCompleteEventChildren(h),S=!1):(w=he.EMPTY_NODE,S=!1);var P=new rr(new Er(w,S,!1),new Er(h,g,!1));E=new Bu(s,P),this.views.set(y,E)}return E.addEventRegistration(u),E.getInitialEvents(u)},c.prototype.removeEventRegistration=function(s,u,d){var h,g,y=s.queryIdentifier(),E=[],w=[],S=this.hasCompleteView();if("default"===y)try{for(var P=ie.__values(this.views.entries()),B=P.next();!B.done;B=P.next()){var te,W=ie.__read(B.value,2),G=W[0];w=w.concat((te=W[1]).removeEventRegistration(u,d)),te.isEmpty()&&(this.views.delete(G),te.getQuery().getQueryParams().loadsAllData()||E.push(te.getQuery()))}}catch(se){h={error:se}}finally{try{B&&!B.done&&(g=P.return)&&g.call(P)}finally{if(h)throw h.error}}else(te=this.views.get(y))&&(w=w.concat(te.removeEventRegistration(u,d)),te.isEmpty()&&(this.views.delete(y),te.getQuery().getQueryParams().loadsAllData()||E.push(te.getQuery())));return S&&!this.hasCompleteView()&&E.push(new c.__referenceConstructor(s.repo,s.path)),{removed:E,events:w}},c.prototype.getQueryViews=function(){var s,u,d=[];try{for(var h=ie.__values(this.views.values()),g=h.next();!g.done;g=h.next()){var y=g.value;y.getQuery().getQueryParams().loadsAllData()||d.push(y)}}catch(E){s={error:E}}finally{try{g&&!g.done&&(u=h.return)&&u.call(h)}finally{if(s)throw s.error}}return d},c.prototype.getCompleteServerCache=function(s){var u,d,h=null;try{for(var g=ie.__values(this.views.values()),y=g.next();!y.done;y=g.next())h=h||y.value.getCompleteServerCache(s)}catch(w){u={error:w}}finally{try{y&&!y.done&&(d=g.return)&&d.call(g)}finally{if(u)throw u.error}}return h},c.prototype.viewForQuery=function(s){if(s.getQueryParams().loadsAllData())return this.getCompleteView();var d=s.queryIdentifier();return this.views.get(d)},c.prototype.viewExistsForQuery=function(s){return null!=this.viewForQuery(s)},c.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},c.prototype.getCompleteView=function(){var s,u;try{for(var d=ie.__values(this.views.values()),h=d.next();!h.done;h=d.next()){var g=h.value;if(g.getQuery().getQueryParams().loadsAllData())return g}}catch(y){s={error:y}}finally{try{h&&!h.done&&(u=d.return)&&u.call(d)}finally{if(s)throw s.error}}return null},c}(),un=function(){function c(s){this.writeTree_=s}return c.prototype.addWrite=function(s,u){if(s.isEmpty())return new c(new an(u));var d=this.writeTree_.findRootMostValueAndPath(s);if(null!=d){var h=d.path,g=d.value,y=re.relativePath(h,s);return g=g.updateChild(y,u),new c(this.writeTree_.set(h,g))}var E=new an(u);return new c(this.writeTree_.setTree(s,E))},c.prototype.addWrites=function(s,u){var d=this;return ee(u,function(h,g){d=d.addWrite(s.child(h),g)}),d},c.prototype.removeWrite=function(s){return s.isEmpty()?c.Empty:new c(this.writeTree_.setTree(s,an.Empty))},c.prototype.hasCompleteWrite=function(s){return null!=this.getCompleteNode(s)},c.prototype.getCompleteNode=function(s){var u=this.writeTree_.findRootMostValueAndPath(s);return null!=u?this.writeTree_.get(u.path).getChild(re.relativePath(u.path,s)):null},c.prototype.getCompleteChildren=function(){var s=[],u=this.writeTree_.value;return null!=u?u.isLeafNode()||u.forEachChild(pt,function(d,h){s.push(new Ye(d,h))}):this.writeTree_.children.inorderTraversal(function(d,h){null!=h.value&&s.push(new Ye(d,h.value))}),s},c.prototype.childCompoundWrite=function(s){if(s.isEmpty())return this;var u=this.getCompleteNode(s);return new c(null!=u?new an(u):this.writeTree_.subtree(s))},c.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},c.prototype.apply=function(s){return Cr(re.Empty,this.writeTree_,s)},c.Empty=new c(new an(null)),c}();function Cr(c,s,u){if(null!=s.value)return u.updateChild(c,s.value);var d=null;return s.children.inorderTraversal(function(h,g){".priority"===h?(I.assert(null!==g.value,"Priority writes must always be leaf nodes"),d=g.value):u=Cr(c.child(h),g,u)}),!u.getChild(c).isEmpty()&&null!==d&&(u=u.updateChild(c.child(".priority"),d)),u}var si=function(){function c(){this.visibleWrites_=un.Empty,this.allWrites_=[],this.lastWriteId_=-1}return c.prototype.childWrites=function(s){return new Un(s,this)},c.prototype.addOverwrite=function(s,u,d,h){I.assert(d>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===h&&(h=!0),this.allWrites_.push({path:s,snap:u,writeId:d,visible:h}),h&&(this.visibleWrites_=this.visibleWrites_.addWrite(s,u)),this.lastWriteId_=d},c.prototype.addMerge=function(s,u,d){I.assert(d>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:s,children:u,writeId:d,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(s,u),this.lastWriteId_=d},c.prototype.getWrite=function(s){for(var u=0;u<this.allWrites_.length;u++){var d=this.allWrites_[u];if(d.writeId===s)return d}return null},c.prototype.removeWrite=function(s){var u=this,d=this.allWrites_.findIndex(function(P){return P.writeId===s});I.assert(d>=0,"removeWrite called with nonexistent writeId.");var h=this.allWrites_[d];this.allWrites_.splice(d,1);for(var g=h.visible,y=!1,E=this.allWrites_.length-1;g&&E>=0;){var w=this.allWrites_[E];w.visible&&(E>=d&&this.recordContainsPath_(w,h.path)?g=!1:h.path.contains(w.path)&&(y=!0)),E--}return!!g&&(y?(this.resetTree_(),!0):(h.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(h.path):ee(h.children,function(P){u.visibleWrites_=u.visibleWrites_.removeWrite(h.path.child(P))}),!0))},c.prototype.getCompleteWriteData=function(s){return this.visibleWrites_.getCompleteNode(s)},c.prototype.calcCompleteEventCache=function(s,u,d,h){if(d||h){var w=this.visibleWrites_.childCompoundWrite(s);return!h&&w.isEmpty()?u:h||null!=u||w.hasCompleteWrite(re.Empty)?c.layerTree_(this.allWrites_,function(W){return(W.visible||h)&&(!d||!~d.indexOf(W.writeId))&&(W.path.contains(s)||s.contains(W.path))},s).apply(u||he.EMPTY_NODE):null}var g=this.visibleWrites_.getCompleteNode(s);if(null!=g)return g;var y=this.visibleWrites_.childCompoundWrite(s);return y.isEmpty()?u:null!=u||y.hasCompleteWrite(re.Empty)?y.apply(u||he.EMPTY_NODE):null},c.prototype.calcCompleteEventChildren=function(s,u){var d=he.EMPTY_NODE,h=this.visibleWrites_.getCompleteNode(s);if(h)return h.isLeafNode()||h.forEachChild(pt,function(E,w){d=d.updateImmediateChild(E,w)}),d;if(u){var g=this.visibleWrites_.childCompoundWrite(s);return u.forEachChild(pt,function(E,w){var S=g.childCompoundWrite(new re(E)).apply(w);d=d.updateImmediateChild(E,S)}),g.getCompleteChildren().forEach(function(E){d=d.updateImmediateChild(E.name,E.node)}),d}return this.visibleWrites_.childCompoundWrite(s).getCompleteChildren().forEach(function(E){d=d.updateImmediateChild(E.name,E.node)}),d},c.prototype.calcEventCacheAfterServerOverwrite=function(s,u,d,h){I.assert(d||h,"Either existingEventSnap or existingServerSnap must exist");var g=s.child(u);if(this.visibleWrites_.hasCompleteWrite(g))return null;var y=this.visibleWrites_.childCompoundWrite(g);return y.isEmpty()?h.getChild(u):y.apply(h.getChild(u))},c.prototype.calcCompleteChild=function(s,u,d){var h=s.child(u),g=this.visibleWrites_.getCompleteNode(h);return null!=g?g:d.isCompleteForChild(u)?this.visibleWrites_.childCompoundWrite(h).apply(d.getNode().getImmediateChild(u)):null},c.prototype.shadowingWrite=function(s){return this.visibleWrites_.getCompleteNode(s)},c.prototype.calcIndexedSlice=function(s,u,d,h,g,y){var E,w=this.visibleWrites_.childCompoundWrite(s),S=w.getCompleteNode(re.Empty);if(null!=S)E=S;else{if(null==u)return[];E=w.apply(u)}if((E=E.withIndex(y)).isEmpty()||E.isLeafNode())return[];for(var P=[],B=y.getCompare(),W=g?E.getReverseIteratorFrom(d,y):E.getIteratorFrom(d,y),G=W.getNext();G&&P.length<h;)0!==B(G,d)&&P.push(G),G=W.getNext();return P},c.prototype.recordContainsPath_=function(s,u){if(s.snap)return s.path.contains(u);for(var d in s.children)if(s.children.hasOwnProperty(d)&&s.path.child(d).contains(u))return!0;return!1},c.prototype.resetTree_=function(){this.visibleWrites_=c.layerTree_(this.allWrites_,c.DefaultFilter_,re.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},c.DefaultFilter_=function(s){return s.visible},c.layerTree_=function(s,u,d){for(var h=un.Empty,g=0;g<s.length;++g){var y=s[g];if(u(y)){var E=y.path,w=void 0;if(y.snap)d.contains(E)?(w=re.relativePath(d,E),h=h.addWrite(w,y.snap)):E.contains(d)&&(w=re.relativePath(E,d),h=h.addWrite(re.Empty,y.snap.getChild(w)));else{if(!y.children)throw I.assertionError("WriteRecord should have .snap or .children");if(d.contains(E))w=re.relativePath(d,E),h=h.addWrites(w,y.children);else if(E.contains(d))if((w=re.relativePath(E,d)).isEmpty())h=h.addWrites(re.Empty,y.children);else{var S=I.safeGet(y.children,w.getFront());if(S){var P=S.getChild(w.popFront());h=h.addWrite(re.Empty,P)}}}}}return h},c}(),Un=function(){function c(s,u){this.treePath_=s,this.writeTree_=u}return c.prototype.calcCompleteEventCache=function(s,u,d){return this.writeTree_.calcCompleteEventCache(this.treePath_,s,u,d)},c.prototype.calcCompleteEventChildren=function(s){return this.writeTree_.calcCompleteEventChildren(this.treePath_,s)},c.prototype.calcEventCacheAfterServerOverwrite=function(s,u,d){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,s,u,d)},c.prototype.shadowingWrite=function(s){return this.writeTree_.shadowingWrite(this.treePath_.child(s))},c.prototype.calcIndexedSlice=function(s,u,d,h,g){return this.writeTree_.calcIndexedSlice(this.treePath_,s,u,d,h,g)},c.prototype.calcCompleteChild=function(s,u){return this.writeTree_.calcCompleteChild(this.treePath_,s,u)},c.prototype.child=function(s){return new c(this.treePath_.child(s),this.writeTree_)},c}(),Hu=function(){function c(s){this.listenProvider_=s,this.syncPointTree_=an.Empty,this.pendingWriteTree_=new si,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return c.prototype.applyUserOverwrite=function(s,u,d,h){return this.pendingWriteTree_.addOverwrite(s,u,d,h),h?this.applyOperationToSyncPoints_(new Mi($r.User,s,u)):[]},c.prototype.applyUserMerge=function(s,u,d){this.pendingWriteTree_.addMerge(s,u,d);var h=an.fromObject(u);return this.applyOperationToSyncPoints_(new Bo($r.User,s,h))},c.prototype.ackUserWrite=function(s,u){void 0===u&&(u=!1);var d=this.pendingWriteTree_.getWrite(s);if(this.pendingWriteTree_.removeWrite(s)){var g=an.Empty;return null!=d.snap?g=g.set(re.Empty,!0):ee(d.children,function(y,E){g=g.set(new re(y),E)}),this.applyOperationToSyncPoints_(new Mg(d.path,g,u))}return[]},c.prototype.applyServerOverwrite=function(s,u){return this.applyOperationToSyncPoints_(new Mi($r.Server,s,u))},c.prototype.applyServerMerge=function(s,u){var d=an.fromObject(u);return this.applyOperationToSyncPoints_(new Bo($r.Server,s,d))},c.prototype.applyListenComplete=function(s){return this.applyOperationToSyncPoints_(new Uo($r.Server,s))},c.prototype.applyTaggedQueryOverwrite=function(s,u,d){var h=this.queryKeyForTag_(d);if(null!=h){var g=c.parseQueryKey_(h),y=g.path,E=g.queryId,w=re.relativePath(y,s),S=new Mi($r.forServerTaggedQuery(E),w,u);return this.applyTaggedOperation_(y,S)}return[]},c.prototype.applyTaggedQueryMerge=function(s,u,d){var h=this.queryKeyForTag_(d);if(h){var g=c.parseQueryKey_(h),y=g.path,E=g.queryId,w=re.relativePath(y,s),S=an.fromObject(u),P=new Bo($r.forServerTaggedQuery(E),w,S);return this.applyTaggedOperation_(y,P)}return[]},c.prototype.applyTaggedListenComplete=function(s,u){var d=this.queryKeyForTag_(u);if(d){var h=c.parseQueryKey_(d),g=h.path,y=h.queryId,E=re.relativePath(g,s),w=new Uo($r.forServerTaggedQuery(y),E);return this.applyTaggedOperation_(g,w)}return[]},c.prototype.addEventRegistration=function(s,u){var d=s.path,h=null,g=!1;this.syncPointTree_.foreachOnPath(d,function(se,De){var Oe=re.relativePath(se,d);h=h||De.getCompleteServerCache(Oe),g=g||De.hasCompleteView()});var E,y=this.syncPointTree_.get(d);y?(g=g||y.hasCompleteView(),h=h||y.getCompleteServerCache(re.Empty)):(y=new gn,this.syncPointTree_=this.syncPointTree_.set(d,y)),null!=h?E=!0:(E=!1,h=he.EMPTY_NODE,this.syncPointTree_.subtree(d).foreachChild(function(se,De){var Oe=De.getCompleteServerCache(re.Empty);Oe&&(h=h.updateImmediateChild(se,Oe))}));var S=y.viewExistsForQuery(s);if(!S&&!s.getQueryParams().loadsAllData()){var P=c.makeQueryKey_(s);I.assert(!this.queryToTagMap.has(P),"View does not exist, but we have a tag");var B=c.getNextQueryTag_();this.queryToTagMap.set(P,B),this.tagToQueryMap.set(B,P)}var W=this.pendingWriteTree_.childWrites(d),G=y.addEventRegistration(s,u,W,h,E);if(!S&&!g){var te=y.viewForQuery(s);G=G.concat(this.setupListener_(s,te))}return G},c.prototype.removeEventRegistration=function(s,u,d){var h=this,g=s.path,y=this.syncPointTree_.get(g),E=[];if(y&&("default"===s.queryIdentifier()||y.viewExistsForQuery(s))){var w=y.removeEventRegistration(s,u,d);y.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(g));var S=w.removed;E=w.events;var P=-1!==S.findIndex(function(Zt){return Zt.getQueryParams().loadsAllData()}),B=this.syncPointTree_.findOnPath(g,function(Zt,yn){return yn.hasCompleteView()});if(P&&!B){var W=this.syncPointTree_.subtree(g);if(!W.isEmpty())for(var G=this.collectDistinctViewsForSubTree_(W),te=0;te<G.length;++te){var se=G[te],De=se.getQuery(),Oe=this.createListenerForView_(se);this.listenProvider_.startListening(c.queryForListening_(De),this.tagForQuery_(De),Oe.hashFn,Oe.onComplete)}}!B&&S.length>0&&!d&&(P?this.listenProvider_.stopListening(c.queryForListening_(s),null):S.forEach(function(Zt){var yn=h.queryToTagMap.get(c.makeQueryKey_(Zt));h.listenProvider_.stopListening(c.queryForListening_(Zt),yn)})),this.removeTags_(S)}return E},c.prototype.calcCompleteEventCache=function(s,u){var h=this.pendingWriteTree_,g=this.syncPointTree_.findOnPath(s,function(y,E){var w=re.relativePath(y,s),S=E.getCompleteServerCache(w);if(S)return S});return h.calcCompleteEventCache(s,g,u,!0)},c.prototype.collectDistinctViewsForSubTree_=function(s){return s.fold(function(u,d,h){if(d&&d.hasCompleteView())return[d.getCompleteView()];var y=[];return d&&(y=d.getQueryViews()),ee(h,function(E,w){y=y.concat(w)}),y})},c.prototype.removeTags_=function(s){for(var u=0;u<s.length;++u){var d=s[u];if(!d.getQueryParams().loadsAllData()){var h=c.makeQueryKey_(d),g=this.queryToTagMap.get(h);this.queryToTagMap.delete(h),this.tagToQueryMap.delete(g)}}},c.queryForListening_=function(s){return s.getQueryParams().loadsAllData()&&!s.getQueryParams().isDefault()?s.getRef():s},c.prototype.setupListener_=function(s,u){var d=s.path,h=this.tagForQuery_(s),g=this.createListenerForView_(u),y=this.listenProvider_.startListening(c.queryForListening_(s),h,g.hashFn,g.onComplete),E=this.syncPointTree_.subtree(d);if(h)I.assert(!E.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var w=E.fold(function(B,W,G){if(!B.isEmpty()&&W&&W.hasCompleteView())return[W.getCompleteView().getQuery()];var te=[];return W&&(te=te.concat(W.getQueryViews().map(function(se){return se.getQuery()}))),ee(G,function(se,De){te=te.concat(De)}),te}),S=0;S<w.length;++S){var P=w[S];this.listenProvider_.stopListening(c.queryForListening_(P),this.tagForQuery_(P))}return y},c.prototype.createListenerForView_=function(s){var u=this,d=s.getQuery(),h=this.tagForQuery_(d);return{hashFn:function(){return(s.getServerCache()||he.EMPTY_NODE).hash()},onComplete:function(g){if("ok"===g)return h?u.applyTaggedListenComplete(d.path,h):u.applyListenComplete(d.path);var y=function(c,s){var u="Unknown Error";"too_big"===c?u="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===c?u="Client doesn't have permission to access the desired data.":"unavailable"===c&&(u="The service is unavailable");var d=new Error(c+" at "+s.path.toString()+": "+u);return d.code=c.toUpperCase(),d}(g,d);return u.removeEventRegistration(d,null,y)}}},c.makeQueryKey_=function(s){return s.path.toString()+"$"+s.queryIdentifier()},c.parseQueryKey_=function(s){var u=s.indexOf("$");return I.assert(-1!==u&&u<s.length-1,"Bad queryKey."),{queryId:s.substr(u+1),path:new re(s.substr(0,u))}},c.prototype.queryKeyForTag_=function(s){return this.tagToQueryMap.get(s)},c.prototype.tagForQuery_=function(s){var u=c.makeQueryKey_(s);return this.queryToTagMap.get(u)},c.getNextQueryTag_=function(){return c.nextQueryTag_++},c.prototype.applyTaggedOperation_=function(s,u){var d=this.syncPointTree_.get(s);I.assert(d,"Missing sync point for query tag that we're tracking");var h=this.pendingWriteTree_.childWrites(s);return d.applyOperation(u,h,null)},c.prototype.applyOperationToSyncPoints_=function(s){return this.applyOperationHelper_(s,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(re.Empty))},c.prototype.applyOperationHelper_=function(s,u,d,h){if(s.path.isEmpty())return this.applyOperationDescendantsHelper_(s,u,d,h);var g=u.get(re.Empty);null==d&&null!=g&&(d=g.getCompleteServerCache(re.Empty));var y=[],E=s.path.getFront(),w=s.operationForChild(E),S=u.children.get(E);if(S&&w){var P=d?d.getImmediateChild(E):null,B=h.child(E);y=y.concat(this.applyOperationHelper_(w,S,P,B))}return g&&(y=y.concat(g.applyOperation(s,h,d))),y},c.prototype.applyOperationDescendantsHelper_=function(s,u,d,h){var g=this,y=u.get(re.Empty);null==d&&null!=y&&(d=y.getCompleteServerCache(re.Empty));var E=[];return u.children.inorderTraversal(function(w,S){var P=d?d.getImmediateChild(w):null,B=h.child(w),W=s.operationForChild(w);W&&(E=E.concat(g.applyOperationDescendantsHelper_(W,S,P,B)))}),y&&(E=E.concat(y.applyOperation(s,h,d))),E},c.nextQueryTag_=1,c}(),Bn=function(){function c(){this.rootNode_=he.EMPTY_NODE}return c.prototype.getNode=function(s){return this.rootNode_.getChild(s)},c.prototype.updateSnapshot=function(s,u){this.rootNode_=this.rootNode_.updateChild(s,u)},c}(),oe=function(){function c(){this.counters_={}}return c.prototype.incrementCounter=function(s,u){void 0===u&&(u=1),I.contains(this.counters_,s)||(this.counters_[s]=0),this.counters_[s]+=u},c.prototype.get=function(){return I.deepCopy(this.counters_)},c}(),Be=function(){function c(){}return c.getCollection=function(s){var u=s.toString();return this.collections_[u]||(this.collections_[u]=new oe),this.collections_[u]},c.getOrCreateReporter=function(s,u){var d=s.toString();return this.reporters_[d]||(this.reporters_[d]=u()),this.reporters_[d]},c.collections_={},c.reporters_={},c}(),wt=function(){function c(s){this.collection_=s,this.last_=null}return c.prototype.get=function(){var s=this.collection_.get(),u=ie.__assign({},s);return this.last_&&ee(this.last_,function(d,h){u[d]=u[d]-h}),this.last_=s,u},c}(),ui=function(){function c(s,u){this.server_=u,this.statsToReport_={},this.statsListener_=new wt(s);var d=1e4+2e4*Math.random();nn(this.reportStats_.bind(this),Math.floor(d))}return c.prototype.includeStat=function(s){this.statsToReport_[s]=!0},c.prototype.reportStats_=function(){var s=this,u=this.statsListener_.get(),d={},h=!1;ee(u,function(g,y){y>0&&I.contains(s.statsToReport_,g)&&(d[g]=y,h=!0)}),h&&this.server_.reportStats(d),nn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},c}(),Mt=function(){function c(){this.eventLists_=[],this.recursionDepth_=0}return c.prototype.queueEvents=function(s){for(var u=null,d=0;d<s.length;d++){var h=s[d],g=h.getPath();null!==u&&!g.equals(u.getPath())&&(this.eventLists_.push(u),u=null),null===u&&(u=new ao(g)),u.add(h)}u&&this.eventLists_.push(u)},c.prototype.raiseEventsAtPath=function(s,u){this.queueEvents(u),this.raiseQueuedEventsMatchingPredicate_(function(d){return d.equals(s)})},c.prototype.raiseEventsForChangedPath=function(s,u){this.queueEvents(u),this.raiseQueuedEventsMatchingPredicate_(function(d){return d.contains(s)||s.contains(d)})},c.prototype.raiseQueuedEventsMatchingPredicate_=function(s){this.recursionDepth_++;for(var u=!0,d=0;d<this.eventLists_.length;d++){var h=this.eventLists_[d];h&&(s(h.getPath())?(this.eventLists_[d].raise(),this.eventLists_[d]=null):u=!1)}u&&(this.eventLists_=[]),this.recursionDepth_--},c}(),ao=function(){function c(s){this.path_=s,this.events_=[]}return c.prototype.add=function(s){this.events_.push(s)},c.prototype.raise=function(){for(var s=0;s<this.events_.length;s++){var u=this.events_[s];if(null!==u){this.events_[s]=null;var d=u.getEventRunner();ot&&Ge("event: "+u.toString()),In(d)}}},c.prototype.getPath=function(){return this.path_},c}(),li=function(){function c(s){this.allowedEvents_=s,this.listeners_={},I.assert(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}return c.prototype.trigger=function(s){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];if(Array.isArray(this.listeners_[s]))for(var h=ie.__spread(this.listeners_[s]),g=0;g<h.length;g++)h[g].callback.apply(h[g].context,u)},c.prototype.on=function(s,u,d){this.validateEventType_(s),this.listeners_[s]=this.listeners_[s]||[],this.listeners_[s].push({callback:u,context:d});var h=this.getInitialEvent(s);h&&u.apply(d,h)},c.prototype.off=function(s,u,d){this.validateEventType_(s);for(var h=this.listeners_[s]||[],g=0;g<h.length;g++)if(h[g].callback===u&&(!d||d===h[g].context))return void h.splice(g,1)},c.prototype.validateEventType_=function(s){I.assert(this.allowedEvents_.find(function(u){return u===s}),"Unknown event: "+s)},c}(),He=function(c){function s(){var d,h,u=c.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(h="visibilitychange",d="hidden"):void 0!==document.mozHidden?(h="mozvisibilitychange",d="mozHidden"):void 0!==document.msHidden?(h="msvisibilitychange",d="msHidden"):void 0!==document.webkitHidden&&(h="webkitvisibilitychange",d="webkitHidden")),u.visible_=!0,h&&document.addEventListener(h,function(){var g=!document[d];g!==u.visible_&&(u.visible_=g,u.trigger("visible",g))},!1),u}return ie.__extends(s,c),s.getInstance=function(){return new s},s.prototype.getInitialEvent=function(u){return I.assert("visible"===u,"Unknown event type: "+u),[this.visible_]},s}(li),uo=function(c){function s(){var u=c.call(this,["online"])||this;return u.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!I.isMobileCordova()&&(window.addEventListener("online",function(){u.online_||(u.online_=!0,u.trigger("online",!0))},!1),window.addEventListener("offline",function(){u.online_&&(u.online_=!1,u.trigger("online",!1))},!1)),u}return ie.__extends(s,c),s.getInstance=function(){return new s},s.prototype.getInitialEvent=function(u){return I.assert("online"===u,"Unknown event type: "+u),[this.online_]},s.prototype.currentlyOnline=function(){return this.online_},s}(li),xi=function(){function c(s){this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return c.prototype.closeAfter=function(s,u){this.closeAfterResponse=s,this.onClose=u,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},c.prototype.handleResponse=function(s,u){var d=this;this.pendingResponses[s]=u;for(var h=function(){var E=g.pendingResponses[g.currentResponseNum];delete g.pendingResponses[g.currentResponseNum];for(var w=function(P){E[P]&&In(function(){d.onMessage_(E[P])})},S=0;S<E.length;++S)w(S);if(g.currentResponseNum===g.closeAfterResponse)return g.onClose&&(g.onClose(),g.onClose=null),"break";g.currentResponseNum++},g=this;this.pendingResponses[this.currentResponseNum]&&"break"!==h(););},c}(),Tn=function(){function c(s,u,d,h,g){this.connId=s,this.repoInfo=u,this.applicationId=d,this.transportSessionId=h,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ze(s),this.stats_=Be.getCollection(u),this.urlFn=function(y){return u.connectionURL(on,y)}}return c.prototype.open=function(s,u){var d=this;this.curSegmentNum=0,this.onDisconnect_=u,this.myPacketOrderer=new xi(s),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){d.log_("Timed out trying to connect."),d.onClosed_(),d.connectTimeoutTimer_=null},Math.floor(3e4)),function(c){if(I.isNodeSdk()||"complete"===document.readyState)c();else{var s=!1,u=function(){document.body?s||(s=!0,c()):setTimeout(u,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&u()}),window.attachEvent("onload",u))}}(function(){if(!d.isClosed_){d.scriptTagHolder=new ua(function(){for(var y=[],E=0;E<arguments.length;E++)y[E]=arguments[E];var w=ie.__read(y,5),S=w[0],P=w[1],B=w[2];if(d.incrementIncomingBytes_(y),d.scriptTagHolder)if(d.connectTimeoutTimer_&&(clearTimeout(d.connectTimeoutTimer_),d.connectTimeoutTimer_=null),d.everConnected_=!0,"start"===S)d.id=P,d.password=B;else{if("close"!==S)throw new Error("Unrecognized command received: "+S);P?(d.scriptTagHolder.sendNewPolls=!1,d.myPacketOrderer.closeAfter(P,function(){d.onClosed_()})):d.onClosed_()}},function(){for(var y=[],E=0;E<arguments.length;E++)y[E]=arguments[E];var w=ie.__read(y,2),S=w[0],P=w[1];d.incrementIncomingBytes_(y),d.myPacketOrderer.handleResponse(S,P)},function(){d.onClosed_()},d.urlFn);var h={start:"t"};h.ser=Math.floor(1e8*Math.random()),d.scriptTagHolder.uniqueCallbackIdentifier&&(h.cb=d.scriptTagHolder.uniqueCallbackIdentifier),h.v="5",d.transportSessionId&&(h.s=d.transportSessionId),d.lastSessionId&&(h.ls=d.lastSessionId),d.applicationId&&(h.p=d.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(vt)&&(h.r="f");var g=d.urlFn(h);d.log_("Connecting via long-poll to "+g),d.scriptTagHolder.addTag(g,function(){})}})},c.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},c.forceAllow=function(){c.forceAllow_=!0},c.forceDisallow=function(){c.forceDisallow_=!0},c.isAvailable=function(){return!(I.isNodeSdk()||!c.forceAllow_&&(c.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},c.prototype.markConnectionHealthy=function(){},c.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},c.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},c.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},c.prototype.send=function(s){var u=I.stringify(s);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);for(var d=I.base64Encode(u),h=U(d,1840),g=0;g<h.length;g++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,h.length,h[g]),this.curSegmentNum++},c.prototype.addDisconnectPingFrame=function(s,u){if(!I.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var d={dframe:"t"};d.id=s,d.pw=u,this.myDisconnFrame.src=this.urlFn(d),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},c.prototype.incrementIncomingBytes_=function(s){var u=I.stringify(s).length;this.bytesReceived+=u,this.stats_.incrementCounter("bytes_received",u)},c}(),ua=function(){function c(s,u,d,h){if(this.onDisconnect=d,this.urlFn=h,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,I.isNodeSdk())this.commandCB=s,this.onMessageCB=u;else{this.uniqueCallbackIdentifier=X(),window["pLPCommand"+this.uniqueCallbackIdentifier]=s,window["pRTLPCB"+this.uniqueCallbackIdentifier]=u,this.myIFrame=c.createIFrame_();var g="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(g='<script>document.domain="'+document.domain+'";<\/script>');var E="<html><body>"+g+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(E),this.myIFrame.doc.close()}catch(w){Ge("frame writing exception"),w.stack&&Ge(w.stack),Ge(w)}}}return c.createIFrame_=function(){var s=document.createElement("iframe");if(s.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(s);try{s.contentWindow.document||Ge("No IE domain setting required")}catch(h){var d=document.domain;s.src="javascript:void((function(){document.open();document.domain='"+d+"';document.close();})())"}return s.contentDocument?s.doc=s.contentDocument:s.contentWindow?s.doc=s.contentWindow.document:s.document&&(s.doc=s.document),s},c.prototype.close=function(){var s=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==s.myIFrame&&(document.body.removeChild(s.myIFrame),s.myIFrame=null)},Math.floor(0)));var u=this.onDisconnect;u&&(this.onDisconnect=null,u())},c.prototype.startLongPoll=function(s,u){for(this.myID=s,this.myPW=u,this.alive=!0;this.newRequest_(););},c.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var s={};s.id=this.myID,s.pw=this.myPW,s.ser=this.currentSerial;for(var u=this.urlFn(s),d="",h=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+d.length<=1870;){var y=this.pendingSegs.shift();d=d+"&seg"+h+"="+y.seg+"&ts"+h+"="+y.ts+"&d"+h+"="+y.d,h++}return this.addLongPollTag_(u+=d,this.currentSerial),!0}return!1},c.prototype.enqueueSegment=function(s,u,d){this.pendingSegs.push({seg:s,ts:u,d}),this.alive&&this.newRequest_()},c.prototype.addLongPollTag_=function(s,u){var d=this;this.outstandingRequests.add(u);var h=function(){d.outstandingRequests.delete(u),d.newRequest_()},g=setTimeout(h,Math.floor(25e3));this.addTag(s,function(){clearTimeout(g),h()})},c.prototype.addTag=function(s,u){var d=this;I.isNodeSdk()?this.doNodeLongPoll(s,u):setTimeout(function(){try{if(!d.sendNewPolls)return;var h=d.myIFrame.doc.createElement("script");h.type="text/javascript",h.async=!0,h.src=s,h.onload=h.onreadystatechange=function(){var g=h.readyState;(!g||"loaded"===g||"complete"===g)&&(h.onload=h.onreadystatechange=null,h.parentNode&&h.parentNode.removeChild(h),u())},h.onerror=function(){Ge("Long-poll script failed to load: "+s),d.sendNewPolls=!1,d.close()},d.myIFrame.doc.body.appendChild(h)}catch(g){}},Math.floor(1))},c}(),Oi="",Go=null;"undefined"!=typeof MozWebSocket?Go=MozWebSocket:"undefined"!=typeof WebSocket&&(Go=WebSocket);var di=function(){function c(s,u,d,h,g){this.connId=s,this.applicationId=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ze(this.connId),this.stats_=Be.getCollection(u),this.connURL=c.connectionURL_(u,h,g),this.nodeAdmin=u.nodeAdmin}return c.connectionURL_=function(s,u,d){var h={v:"5"};return!I.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(vt)&&(h.r="f"),u&&(h.s=u),d&&(h.ls=d),s.connectionURL(Xn,h)},c.prototype.open=function(s,u){var d=this;this.onDisconnect=u,this.onMessage=s,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pe.set("previous_websocket_failure",!0);try{if(I.isNodeSdk()){var g={headers:{"User-Agent":"Firebase/5/"+Oi+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},y=process.env,E=0===this.connURL.indexOf("wss://")?y.HTTPS_PROXY||y.https_proxy:y.HTTP_PROXY||y.http_proxy;E&&(g.proxy={origin:E}),this.mySock=new Go(this.connURL,[],g)}else this.mySock=new Go(this.connURL,[],g={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(S){this.log_("Error instantiating WebSocket.");var w=S.message||S.data;return w&&this.log_(w),void this.onClosed_()}this.mySock.onopen=function(){d.log_("Websocket connected."),d.everConnected_=!0},this.mySock.onclose=function(){d.log_("Websocket connection was disconnected."),d.mySock=null,d.onClosed_()},this.mySock.onmessage=function(S){d.handleIncomingFrame(S)},this.mySock.onerror=function(S){d.log_("WebSocket error.  Closing connection.");var P=S.message||S.data;P&&d.log_(P),d.onClosed_()}},c.prototype.start=function(){},c.forceDisallow=function(){c.forceDisallow_=!0},c.isAvailable=function(){var s=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var d=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);d&&d.length>1&&parseFloat(d[1])<4.4&&(s=!0)}return!s&&null!==Go&&!c.forceDisallow_},c.previouslyFailed=function(){return pe.isInMemoryStorage||!0===pe.get("previous_websocket_failure")},c.prototype.markConnectionHealthy=function(){pe.remove("previous_websocket_failure")},c.prototype.appendFrame_=function(s){if(this.frames.push(s),this.frames.length===this.totalFrames){var u=this.frames.join("");this.frames=null;var d=I.jsonEval(u);this.onMessage(d)}},c.prototype.handleNewFrameCount_=function(s){this.totalFrames=s,this.frames=[]},c.prototype.extractFrameCount_=function(s){if(I.assert(null===this.frames,"We already have a frame buffer"),s.length<=6){var u=Number(s);if(!isNaN(u))return this.handleNewFrameCount_(u),null}return this.handleNewFrameCount_(1),s},c.prototype.handleIncomingFrame=function(s){if(null!==this.mySock){var u=s.data;if(this.bytesReceived+=u.length,this.stats_.incrementCounter("bytes_received",u.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(u);else{var d=this.extractFrameCount_(u);null!==d&&this.appendFrame_(d)}}},c.prototype.send=function(s){this.resetKeepAlive();var u=I.stringify(s);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);var d=U(u,16384);d.length>1&&this.sendString_(String(d.length));for(var h=0;h<d.length;h++)this.sendString_(d[h])},c.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},c.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},c.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},c.prototype.resetKeepAlive=function(){var s=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){s.mySock&&s.sendString_("0"),s.resetKeepAlive()},Math.floor(45e3))},c.prototype.sendString_=function(s){try{this.mySock.send(s)}catch(u){this.log_("Exception thrown from WebSocket.send():",u.message||u.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},c.responsesRequiredToBeHealthy=2,c.healthyTimeout=3e4,c}(),pd=function(){function c(s){this.initTransports_(s)}return Object.defineProperty(c,"ALL_TRANSPORTS",{get:function(){return[Tn,di]},enumerable:!1,configurable:!0}),c.prototype.initTransports_=function(s){var u,d,h=di&&di.isAvailable(),g=h&&!di.previouslyFailed();if(s.webSocketOnly&&(h||Je("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),g=!0),g)this.transports_=[di];else{var y=this.transports_=[];try{for(var E=ie.__values(c.ALL_TRANSPORTS),w=E.next();!w.done;w=E.next()){var S=w.value;S&&S.isAvailable()&&y.push(S)}}catch(P){u={error:P}}finally{try{w&&!w.done&&(d=E.return)&&d.call(E)}finally{if(u)throw u.error}}}},c.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},c.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},c}(),la=function(){function c(s,u,d,h,g,y,E,w){this.id=s,this.repoInfo_=u,this.applicationId_=d,this.onMessage_=h,this.onReady_=g,this.onDisconnect_=y,this.onKill_=E,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ze("c:"+this.id+":"),this.transportManager_=new pd(u),this.log_("Connection created"),this.start_()}return c.prototype.start_=function(){var s=this,u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;var d=this.connReceiver_(this.conn_),h=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){s.conn_&&s.conn_.open(d,h)},Math.floor(0));var g=u.healthyTimeout||0;g>0&&(this.healthyTimeout_=nn(function(){s.healthyTimeout_=null,s.isHealthy_||(s.conn_&&s.conn_.bytesReceived>102400?(s.log_("Connection exceeded healthy timeout but has received "+s.conn_.bytesReceived+" bytes.  Marking connection healthy."),s.isHealthy_=!0,s.conn_.markConnectionHealthy()):s.conn_&&s.conn_.bytesSent>10240?s.log_("Connection exceeded healthy timeout but has sent "+s.conn_.bytesSent+" bytes.  Leaving connection alive."):(s.log_("Closing unhealthy connection after timeout."),s.close()))},Math.floor(g)))},c.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},c.prototype.disconnReceiver_=function(s){var u=this;return function(d){s===u.conn_?u.onConnectionLost_(d):s===u.secondaryConn_?(u.log_("Secondary connection lost."),u.onSecondaryConnectionLost_()):u.log_("closing an old connection")}},c.prototype.connReceiver_=function(s){var u=this;return function(d){2!==u.state_&&(s===u.rx_?u.onPrimaryMessageReceived_(d):s===u.secondaryConn_?u.onSecondaryMessageReceived_(d):u.log_("message on old connection"))}},c.prototype.sendRequest=function(s){this.sendData_({t:"d",d:s})},c.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},c.prototype.onSecondaryControl_=function(s){if("t"in s){var u=s.t;"a"===u?this.upgradeIfSecondaryHealthy_():"r"===u?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===u&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},c.prototype.onSecondaryMessageReceived_=function(s){var u=z("t",s),d=z("d",s);if("c"===u)this.onSecondaryControl_(d);else{if("d"!==u)throw new Error("Unknown protocol layer: "+u);this.pendingDataMessages.push(d)}},c.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},c.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},c.prototype.onPrimaryMessageReceived_=function(s){var u=z("t",s),d=z("d",s);"c"===u?this.onControl_(d):"d"===u&&this.onDataMessage_(d)},c.prototype.onDataMessage_=function(s){this.onPrimaryResponse_(),this.onMessage_(s)},c.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},c.prototype.onControl_=function(s){var u=z("t",s);if("d"in s){var d=s.d;if("h"===u)this.onHandshake_(d);else if("n"===u){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var h=0;h<this.pendingDataMessages.length;++h)this.onDataMessage_(this.pendingDataMessages[h]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===u?this.onConnectionShutdown_(d):"r"===u?this.onReset_(d):"e"===u?_e("Server Error: "+d):"o"===u?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_e("Unknown control packet command: "+u)}},c.prototype.onHandshake_=function(s){var u=s.ts,d=s.v,h=s.h;this.sessionId=s.s,this.repoInfo_.updateHost(h),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,u),"5"!==d&&Je("Protocol version mismatch detected"),this.tryStartUpgrade_())},c.prototype.tryStartUpgrade_=function(){var s=this.transportManager_.upgradeTransport();s&&this.startUpgrade_(s)},c.prototype.startUpgrade_=function(s){var u=this;this.secondaryConn_=new s(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=s.responsesRequiredToBeHealthy||0;var d=this.connReceiver_(this.secondaryConn_),h=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(d,h),nn(function(){u.secondaryConn_&&(u.log_("Timed out trying to upgrade."),u.secondaryConn_.close())},Math.floor(6e4))},c.prototype.onReset_=function(s){this.log_("Reset packet received.  New host: "+s),this.repoInfo_.updateHost(s),1===this.state_?this.close():(this.closeConnections_(),this.start_())},c.prototype.onConnectionEstablished_=function(s,u){var d=this;this.log_("Realtime connection established."),this.conn_=s,this.state_=1,this.onReady_&&(this.onReady_(u,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nn(function(){d.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},c.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},c.prototype.onSecondaryConnectionLost_=function(){var s=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===s||this.rx_===s)&&this.close()},c.prototype.onConnectionLost_=function(s){this.conn_=null,s||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pe.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},c.prototype.onConnectionShutdown_=function(s){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(s),this.onKill_=null),this.onDisconnect_=null,this.close()},c.prototype.sendData_=function(s){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(s)},c.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},c.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},c}(),zo=function(){function c(){}return c.prototype.put=function(s,u,d,h){},c.prototype.merge=function(s,u,d,h){},c.prototype.refreshAuthToken=function(s){},c.prototype.onDisconnectPut=function(s,u,d){},c.prototype.onDisconnectMerge=function(s,u,d){},c.prototype.onDisconnectCancel=function(s,u){},c.prototype.reportStats=function(s){},c}(),Yo=1e3,pi=function(c){function s(u,d,h,g,y,E,w){var S=c.call(this)||this;if(S.repoInfo_=u,S.applicationId_=d,S.onDataUpdate_=h,S.onConnectStatus_=g,S.onServerInfoUpdate_=y,S.authTokenProvider_=E,S.authOverride_=w,S.id=s.nextPersistentConnectionId_++,S.log_=ze("p:"+S.id+":"),S.interruptReasons_={},S.listens=new Map,S.outstandingPuts_=[],S.outstandingPutCount_=0,S.onDisconnectRequestQueue_=[],S.connected_=!1,S.reconnectDelay_=Yo,S.maxReconnectDelay_=3e5,S.securityDebugCallback_=null,S.lastSessionId=null,S.establishConnectionTimer_=null,S.visible_=!1,S.requestCBHash_={},S.requestNumber_=0,S.realtime_=null,S.authToken_=null,S.forceTokenRefresh_=!1,S.invalidAuthTokenCount_=0,S.firstConnection_=!0,S.lastConnectionAttemptTime_=null,S.lastConnectionEstablishedTime_=null,w&&!I.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return S.scheduleConnect_(0),He.getInstance().on("visible",S.onVisible_,S),-1===u.host.indexOf("fblocal")&&uo.getInstance().on("online",S.onOnline_,S),S}return ie.__extends(s,c),s.prototype.sendRequest=function(u,d,h){var g=++this.requestNumber_,y={r:g,a:u,b:d};this.log_(I.stringify(y)),I.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(y),h&&(this.requestCBHash_[g]=h)},s.prototype.listen=function(u,d,h,g){var y=u.queryIdentifier(),E=u.path.toString();this.log_("Listen called for "+E+" "+y),this.listens.has(E)||this.listens.set(E,new Map),I.assert(u.getQueryParams().isDefault()||!u.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),I.assert(!this.listens.get(E).has(y),"listen() called twice for same path/queryId.");var w={onComplete:g,hashFn:d,query:u,tag:h};this.listens.get(E).set(y,w),this.connected_&&this.sendListen_(w)},s.prototype.sendListen_=function(u){var d=this,h=u.query,g=h.path.toString(),y=h.queryIdentifier();this.log_("Listen on "+g+" for "+y);var E={p:g};u.tag&&(E.q=h.queryObject(),E.t=u.tag),E.h=u.hashFn(),this.sendRequest("q",E,function(S){var P=S.d,B=S.s;s.warnOnListenWarnings_(P,h),(d.listens.get(g)&&d.listens.get(g).get(y))===u&&(d.log_("listen response",S),"ok"!==B&&d.removeListen_(g,y),u.onComplete&&u.onComplete(B,P))})},s.warnOnListenWarnings_=function(u,d){if(u&&"object"==typeof u&&I.contains(u,"w")){var h=I.safeGet(u,"w");if(Array.isArray(h)&&~h.indexOf("no_index")){var g='".indexOn": "'+d.getQueryParams().getIndex().toString()+'"',y=d.path.toString();Je("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+g+" at "+y+" to your security rules for better performance.")}}},s.prototype.refreshAuthToken=function(u){this.authToken_=u,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(u)},s.prototype.reduceReconnectDelayIfAdminCredential_=function(u){(u&&40===u.length||I.isAdmin(u))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},s.prototype.tryAuth=function(){var u=this;if(this.connected_&&this.authToken_){var d=this.authToken_,h=I.isValidFormat(d)?"auth":"gauth",g={cred:d};null===this.authOverride_?g.noauth=!0:"object"==typeof this.authOverride_&&(g.authvar=this.authOverride_),this.sendRequest(h,g,function(y){var E=y.s,w=y.d||"error";u.authToken_===d&&("ok"===E?u.invalidAuthTokenCount_=0:u.onAuthRevoked_(E,w))})}},s.prototype.unlisten=function(u,d){var h=u.path.toString(),g=u.queryIdentifier();this.log_("Unlisten called for "+h+" "+g),I.assert(u.getQueryParams().isDefault()||!u.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(h,g)&&this.connected_&&this.sendUnlisten_(h,g,u.queryObject(),d)},s.prototype.sendUnlisten_=function(u,d,h,g){this.log_("Unlisten on "+u+" for "+d);var y={p:u};g&&(y.q=h,y.t=g),this.sendRequest("n",y)},s.prototype.onDisconnectPut=function(u,d,h){this.connected_?this.sendOnDisconnect_("o",u,d,h):this.onDisconnectRequestQueue_.push({pathString:u,action:"o",data:d,onComplete:h})},s.prototype.onDisconnectMerge=function(u,d,h){this.connected_?this.sendOnDisconnect_("om",u,d,h):this.onDisconnectRequestQueue_.push({pathString:u,action:"om",data:d,onComplete:h})},s.prototype.onDisconnectCancel=function(u,d){this.connected_?this.sendOnDisconnect_("oc",u,null,d):this.onDisconnectRequestQueue_.push({pathString:u,action:"oc",data:null,onComplete:d})},s.prototype.sendOnDisconnect_=function(u,d,h,g){var y={p:d,d:h};this.log_("onDisconnect "+u,y),this.sendRequest(u,y,function(E){g&&setTimeout(function(){g(E.s,E.d)},Math.floor(0))})},s.prototype.put=function(u,d,h,g){this.putInternal("p",u,d,h,g)},s.prototype.merge=function(u,d,h,g){this.putInternal("m",u,d,h,g)},s.prototype.putInternal=function(u,d,h,g,y){var E={p:d,d:h};void 0!==y&&(E.h=y),this.outstandingPuts_.push({action:u,request:E,onComplete:g}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+d)},s.prototype.sendPut_=function(u){var d=this,h=this.outstandingPuts_[u].action,g=this.outstandingPuts_[u].request,y=this.outstandingPuts_[u].onComplete;this.outstandingPuts_[u].queued=this.connected_,this.sendRequest(h,g,function(E){d.log_(h+" response",E),delete d.outstandingPuts_[u],d.outstandingPutCount_--,0===d.outstandingPutCount_&&(d.outstandingPuts_=[]),y&&y(E.s,E.d)})},s.prototype.reportStats=function(u){var d=this;if(this.connected_){var h={c:u};this.log_("reportStats",h),this.sendRequest("s",h,function(g){"ok"!==g.s&&d.log_("reportStats","Error sending stats: "+g.d)})}},s.prototype.onDataMessage_=function(u){if("r"in u){this.log_("from server: "+I.stringify(u));var d=u.r,h=this.requestCBHash_[d];h&&(delete this.requestCBHash_[d],h(u.b))}else{if("error"in u)throw"A server-side error has occurred: "+u.error;"a"in u&&this.onDataPush_(u.a,u.b)}},s.prototype.onDataPush_=function(u,d){this.log_("handleServerMessage",u,d),"d"===u?this.onDataUpdate_(d.p,d.d,!1,d.t):"m"===u?this.onDataUpdate_(d.p,d.d,!0,d.t):"c"===u?this.onListenRevoked_(d.p,d.q):"ac"===u?this.onAuthRevoked_(d.s,d.d):"sd"===u?this.onSecurityDebugPacket_(d):_e("Unrecognized action received from server: "+I.stringify(u)+"\nAre you using the latest client?")},s.prototype.onReady_=function(u,d){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(u),this.lastSessionId=d,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},s.prototype.scheduleConnect_=function(u){var d=this;I.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){d.establishConnectionTimer_=null,d.establishConnection_()},Math.floor(u))},s.prototype.onVisible_=function(u){u&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)),this.visible_=u},s.prototype.onOnline_=function(u){u?(this.log_("Browser went online."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},s.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Yo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var d=(new Date).getTime()-this.lastConnectionAttemptTime_,h=Math.max(0,this.reconnectDelay_-d);h=Math.random()*h,this.log_("Trying to reconnect in "+h+"ms"),this.scheduleConnect_(h),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},s.prototype.establishConnection_=function(){var u=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var d=this.onDataMessage_.bind(this),h=this.onReady_.bind(this),g=this.onRealtimeDisconnect_.bind(this),y=this.id+":"+s.nextConnectionId_++,E=this,w=this.lastSessionId,S=!1,P=null,B=function(){P?P.close():(S=!0,g())};this.realtime_={close:B,sendRequest:function(te){I.assert(P,"sendRequest call when we're not connected not allowed."),P.sendRequest(te)}};var G=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(G).then(function(te){S?Ge("getToken() completed but was canceled"):(Ge("getToken() completed. Creating connection."),E.authToken_=te&&te.accessToken,P=new la(y,E.repoInfo_,E.applicationId_,d,h,g,function(se){Je(se+" ("+E.repoInfo_.toString()+")"),E.interrupt("server_kill")},w))}).then(null,function(te){E.log_("Failed to get token: "+te),S||(u.repoInfo_.nodeAdmin&&Je(te),B())})}},s.prototype.interrupt=function(u){Ge("Interrupting connection for reason: "+u),this.interruptReasons_[u]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},s.prototype.resume=function(u){Ge("Resuming connection for reason: "+u),delete this.interruptReasons_[u],I.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0))},s.prototype.handleTimestamp_=function(u){var d=u-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:d})},s.prototype.cancelSentTransactions_=function(){for(var u=0;u<this.outstandingPuts_.length;u++){var d=this.outstandingPuts_[u];d&&"h"in d.request&&d.queued&&(d.onComplete&&d.onComplete("disconnect"),delete this.outstandingPuts_[u],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},s.prototype.onListenRevoked_=function(u,d){var h;h=d?d.map(function(y){return Ie(y)}).join("$"):"default";var g=this.removeListen_(u,h);g&&g.onComplete&&g.onComplete("permission_denied")},s.prototype.removeListen_=function(u,d){var g,h=new re(u).toString();if(this.listens.has(h)){var y=this.listens.get(h);g=y.get(d),y.delete(d),0===y.size&&this.listens.delete(h)}else g=void 0;return g},s.prototype.onAuthRevoked_=function(u,d){Ge("Auth token revoked: "+u+"/"+d),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===u||"permission_denied"===u)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},s.prototype.onSecurityDebugPacket_=function(u){this.securityDebugCallback_?this.securityDebugCallback_(u):"msg"in u&&console.log("FIREBASE: "+u.msg.replace("\n","\nFIREBASE: "))},s.prototype.restoreState_=function(){var u,d,h,g;this.tryAuth();try{for(var y=ie.__values(this.listens.values()),E=y.next();!E.done;E=y.next()){var w=E.value;try{for(var S=(h=void 0,ie.__values(w.values())),P=S.next();!P.done;P=S.next())this.sendListen_(P.value)}catch(te){h={error:te}}finally{try{P&&!P.done&&(g=S.return)&&g.call(S)}finally{if(h)throw h.error}}}}catch(te){u={error:te}}finally{try{E&&!E.done&&(d=y.return)&&d.call(y)}finally{if(u)throw u.error}}for(var W=0;W<this.outstandingPuts_.length;W++)this.outstandingPuts_[W]&&this.sendPut_(W);for(;this.onDisconnectRequestQueue_.length;){var G=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(G.action,G.pathString,G.data,G.onComplete)}},s.prototype.sendConnectStats_=function(){var u={},d="js";I.isNodeSdk()&&(d=this.repoInfo_.nodeAdmin?"admin_node":"node"),u["sdk."+d+"."+Oi.replace(/\./g,"-")]=1,I.isMobileCordova()?u["framework.cordova"]=1:I.isReactNative()&&(u["framework.reactnative"]=1),this.reportStats(u)},s.prototype.shouldReconnect_=function(){var u=uo.getInstance().currentlyOnline();return I.isEmpty(this.interruptReasons_)&&u},s.nextPersistentConnectionId_=0,s.nextConnectionId_=0,s}(zo),bd=function(c){function s(u,d,h){var g=c.call(this)||this;return g.repoInfo_=u,g.onDataUpdate_=d,g.authTokenProvider_=h,g.log_=ze("p:rest:"),g.listens_={},g}return ie.__extends(s,c),s.prototype.reportStats=function(u){throw new Error("Method not implemented.")},s.getListenId_=function(u,d){return void 0!==d?"tag$"+d:(I.assert(u.getQueryParams().isDefault(),"should have a tag if it's not a default query."),u.path.toString())},s.prototype.listen=function(u,d,h,g){var y=this,E=u.path.toString();this.log_("Listen called for "+E+" "+u.queryIdentifier());var w=s.getListenId_(u,h),S={};this.listens_[w]=S;var P=u.getQueryParams().toRestQueryStringParameters();this.restRequest_(E+".json",P,function(B,W){var G=W;404===B&&(G=null,B=null),null===B&&y.onDataUpdate_(E,G,!1,h),I.safeGet(y.listens_,w)===S&&g(B?401===B?"permission_denied":"rest_error:"+B:"ok",null)})},s.prototype.unlisten=function(u,d){var h=s.getListenId_(u,d);delete this.listens_[h]},s.prototype.refreshAuthToken=function(u){},s.prototype.restRequest_=function(u,d,h){var g=this;void 0===d&&(d={}),d.format="export",this.authTokenProvider_.getToken(!1).then(function(y){var E=y&&y.accessToken;E&&(d.auth=E);var w=(g.repoInfo_.secure?"https://":"http://")+g.repoInfo_.host+u+"?ns="+g.repoInfo_.namespace+I.querystring(d);g.log_("Sending REST request for "+w);var S=new XMLHttpRequest;S.onreadystatechange=function(){if(h&&4===S.readyState){g.log_("REST Response for "+w+" received. status:",S.status,"response:",S.responseText);var P=null;if(S.status>=200&&S.status<300){try{P=I.jsonEval(S.responseText)}catch(B){Je("Failed to parse JSON response for "+w+": "+S.responseText)}h(null,P)}else 401!==S.status&&404!==S.status&&Je("Got unsuccessful REST response for "+w+" Status: "+S.status),h(S.status);h=null}},S.open("GET",w,!0),S.send()})},s}(zo),ca="repo_interrupt",Ut=function(){function c(s,u,d,h){var g=this;if(this.repoInfo_=s,this.app=d,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ia,this.persistentConnection_=null,this.stats_=Be.getCollection(s),u||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new bd(this.repoInfo_,this.onDataUpdate_.bind(this),h),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var y=d.options.databaseAuthVariableOverride;if(null!=y){if("object"!=typeof y)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{I.stringify(y)}catch(E){throw new Error("Invalid authOverride provided: "+E)}}this.persistentConnection_=new pi(this.repoInfo_,d.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),h,y),this.server_=this.persistentConnection_}h.addTokenChangeListener(function(E){g.server_.refreshAuthToken(E)}),this.statsReporter_=Be.getOrCreateReporter(s,function(){return new ui(g.stats_,g.server_)}),this.transactionsInit_(),this.infoData_=new Bn,this.infoSyncTree_=new Hu({startListening:function(E,w,S,P){var B=[],W=g.infoData_.getNode(E.path);return W.isEmpty()||(B=g.infoSyncTree_.applyServerOverwrite(E.path,W),setTimeout(function(){P("ok")},0)),B},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Hu({startListening:function(E,w,S,P){return g.server_.listen(E,S,w,function(B,W){var G=P(B,W);g.eventQueue_.raiseEventsForChangedPath(E.path,G)}),[]},stopListening:function(E,w){g.server_.unlisten(E,w)}})}return c.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},c.prototype.name=function(){return this.repoInfo_.namespace},c.prototype.serverTime=function(){var u=this.infoData_.getNode(new re(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+u},c.prototype.generateServerValues=function(){return function(c){return(c=c||{}).timestamp=c.timestamp||(new Date).getTime(),c}({timestamp:this.serverTime()})},c.prototype.onDataUpdate_=function(s,u,d,h){this.dataUpdateCount++;var g=new re(s);u=this.interceptServerDataCallback_?this.interceptServerDataCallback_(s,u):u;var y=[];if(h)if(d){var E=I.map(u,function(W){return At(W)});y=this.serverSyncTree_.applyTaggedQueryMerge(g,E,h)}else{var w=At(u);y=this.serverSyncTree_.applyTaggedQueryOverwrite(g,w,h)}else if(d){var S=I.map(u,function(W){return At(W)});y=this.serverSyncTree_.applyServerMerge(g,S)}else{var P=At(u);y=this.serverSyncTree_.applyServerOverwrite(g,P)}var B=g;y.length>0&&(B=this.rerunTransactions_(g)),this.eventQueue_.raiseEventsForChangedPath(B,y)},c.prototype.interceptServerData_=function(s){this.interceptServerDataCallback_=s},c.prototype.onConnectStatus_=function(s){this.updateInfo_("connected",s),!1===s&&this.runOnDisconnectEvents_()},c.prototype.onServerInfoUpdate_=function(s){var u=this;ee(s,function(d,h){u.updateInfo_(d,h)})},c.prototype.updateInfo_=function(s,u){var d=new re("/.info/"+s),h=At(u);this.infoData_.updateSnapshot(d,h);var g=this.infoSyncTree_.applyServerOverwrite(d,h);this.eventQueue_.raiseEventsForChangedPath(d,g)},c.prototype.getNextWriteId_=function(){return this.nextWriteId_++},c.prototype.setWithPriority=function(s,u,d,h){var g=this;this.log_("set",{path:s.toString(),value:u,priority:d});var y=this.generateServerValues(),E=At(u,d),w=this.serverSyncTree_.calcCompleteEventCache(s),S=na(E,w,y),P=this.getNextWriteId_(),B=this.serverSyncTree_.applyUserOverwrite(s,S,P,!0);this.eventQueue_.queueEvents(B),this.server_.put(s.toString(),E.val(!0),function(G,te){var se="ok"===G;se||Je("set at "+s+" failed: "+G);var De=g.serverSyncTree_.ackUserWrite(P,!se);g.eventQueue_.raiseEventsForChangedPath(s,De),g.callOnCompleteCallback(h,G,te)});var W=this.abortTransactions_(s);this.rerunTransactions_(W),this.eventQueue_.raiseEventsForChangedPath(W,[])},c.prototype.update=function(s,u,d){var h=this;this.log_("update",{path:s.toString(),value:u});var g=!0,y=this.generateServerValues(),E={};if(ee(u,function(P,B){g=!1,E[P]=ju(s.child(P),At(B),h.serverSyncTree_,y)}),g)Ge("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(d,"ok");else{var w=this.getNextWriteId_(),S=this.serverSyncTree_.applyUserMerge(s,E,w);this.eventQueue_.queueEvents(S),this.server_.merge(s.toString(),u,function(P,B){var W="ok"===P;W||Je("update at "+s+" failed: "+P);var G=h.serverSyncTree_.ackUserWrite(w,!W),te=G.length>0?h.rerunTransactions_(s):s;h.eventQueue_.raiseEventsForChangedPath(te,G),h.callOnCompleteCallback(d,P,B)}),ee(u,function(P){var B=h.abortTransactions_(s.child(P));h.rerunTransactions_(B)}),this.eventQueue_.raiseEventsForChangedPath(s,[])}},c.prototype.runOnDisconnectEvents_=function(){var s=this;this.log_("onDisconnectEvents");var u=this.generateServerValues(),d=new ia;this.onDisconnect_.forEachTree(re.Empty,function(g,y){var E=ju(g,y,s.serverSyncTree_,u);d.remember(g,E)});var h=[];d.forEachTree(re.Empty,function(g,y){h=h.concat(s.serverSyncTree_.applyServerOverwrite(g,y));var E=s.abortTransactions_(g);s.rerunTransactions_(E)}),this.onDisconnect_=new ia,this.eventQueue_.raiseEventsForChangedPath(re.Empty,h)},c.prototype.onDisconnectCancel=function(s,u){var d=this;this.server_.onDisconnectCancel(s.toString(),function(h,g){"ok"===h&&d.onDisconnect_.forget(s),d.callOnCompleteCallback(u,h,g)})},c.prototype.onDisconnectSet=function(s,u,d){var h=this,g=At(u);this.server_.onDisconnectPut(s.toString(),g.val(!0),function(y,E){"ok"===y&&h.onDisconnect_.remember(s,g),h.callOnCompleteCallback(d,y,E)})},c.prototype.onDisconnectSetWithPriority=function(s,u,d,h){var g=this,y=At(u,d);this.server_.onDisconnectPut(s.toString(),y.val(!0),function(E,w){"ok"===E&&g.onDisconnect_.remember(s,y),g.callOnCompleteCallback(h,E,w)})},c.prototype.onDisconnectUpdate=function(s,u,d){var h=this;if(I.isEmpty(u))return Ge("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(d,"ok");this.server_.onDisconnectMerge(s.toString(),u,function(g,y){"ok"===g&&ee(u,function(E,w){var S=At(w);h.onDisconnect_.remember(s.child(E),S)}),h.callOnCompleteCallback(d,g,y)})},c.prototype.addEventCallbackForQuery=function(s,u){var d;d=".info"===s.path.getFront()?this.infoSyncTree_.addEventRegistration(s,u):this.serverSyncTree_.addEventRegistration(s,u),this.eventQueue_.raiseEventsAtPath(s.path,d)},c.prototype.removeEventCallbackForQuery=function(s,u){var d;d=".info"===s.path.getFront()?this.infoSyncTree_.removeEventRegistration(s,u):this.serverSyncTree_.removeEventRegistration(s,u),this.eventQueue_.raiseEventsAtPath(s.path,d)},c.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(ca)},c.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(ca)},c.prototype.stats=function(s){if(void 0===s&&(s=!1),"undefined"!=typeof console){var u;s?(this.statsListener_||(this.statsListener_=new wt(this.stats_)),u=this.statsListener_.get()):u=this.stats_.get();var d=Object.keys(u).reduce(function(h,g){return Math.max(g.length,h)},0);ee(u,function(h,g){for(var y=h,E=h.length;E<d+2;E++)y+=" ";console.log(y+g)})}},c.prototype.statsIncrementCounter=function(s){this.stats_.incrementCounter(s),this.statsReporter_.includeStat(s)},c.prototype.log_=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var d="";this.persistentConnection_&&(d=this.persistentConnection_.id+":"),Ge.apply(void 0,ie.__spread([d],s))},c.prototype.callOnCompleteCallback=function(s,u,d){s&&In(function(){if("ok"===u)s(null);else{var h=(u||"error").toUpperCase(),g=h;d&&(g+=": "+d);var y=new Error(g);y.code=h,s(y)}})},Object.defineProperty(c.prototype,"database",{get:function(){return this.__database||(this.__database=new ho(this))},enumerable:!1,configurable:!0}),c}(),qu=function(){function c(s){this.indexedFilter_=new oa(s.getIndex()),this.index_=s.getIndex(),this.startPost_=c.getStartPost_(s),this.endPost_=c.getEndPost_(s)}return c.prototype.getStartPost=function(){return this.startPost_},c.prototype.getEndPost=function(){return this.endPost_},c.prototype.matches=function(s){return this.index_.compare(this.getStartPost(),s)<=0&&this.index_.compare(s,this.getEndPost())<=0},c.prototype.updateChild=function(s,u,d,h,g,y){return this.matches(new Ye(u,d))||(d=he.EMPTY_NODE),this.indexedFilter_.updateChild(s,u,d,h,g,y)},c.prototype.updateFullNode=function(s,u,d){u.isLeafNode()&&(u=he.EMPTY_NODE);var h=u.withIndex(this.index_);h=h.updatePriority(he.EMPTY_NODE);var g=this;return u.forEachChild(pt,function(y,E){g.matches(new Ye(y,E))||(h=h.updateImmediateChild(y,he.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(s,h,d)},c.prototype.updatePriority=function(s,u){return s},c.prototype.filtersNodes=function(){return!0},c.prototype.getIndexedFilter=function(){return this.indexedFilter_},c.prototype.getIndex=function(){return this.index_},c.getStartPost_=function(s){if(s.hasStart()){var u=s.getIndexStartName();return s.getIndex().makePost(s.getIndexStartValue(),u)}return s.getIndex().minPost()},c.getEndPost_=function(s){if(s.hasEnd()){var u=s.getIndexEndName();return s.getIndex().makePost(s.getIndexEndValue(),u)}return s.getIndex().maxPost()},c}(),da=function(){function c(s){this.rangedFilter_=new qu(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft()}return c.prototype.updateChild=function(s,u,d,h,g,y){return this.rangedFilter_.matches(new Ye(u,d))||(d=he.EMPTY_NODE),s.getImmediateChild(u).equals(d)?s:s.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(s,u,d,h,g,y):this.fullLimitUpdateChild_(s,u,d,g,y)},c.prototype.updateFullNode=function(s,u,d){var h;if(u.isLeafNode()||u.isEmpty())h=he.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<u.numChildren()&&u.isIndexed(this.index_)){h=he.EMPTY_NODE.withIndex(this.index_);var g=void 0;g=this.reverse_?u.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var y=0;g.hasNext()&&y<this.limit_;){var E=g.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),E)<=0:this.index_.compare(E,this.rangedFilter_.getEndPost())<=0))break;h=h.updateImmediateChild(E.name,E.node),y++}}else{h=(h=u.withIndex(this.index_)).updatePriority(he.EMPTY_NODE);var S=void 0,P=void 0,B=void 0;if(g=void 0,this.reverse_){g=h.getReverseIterator(this.index_),S=this.rangedFilter_.getEndPost(),P=this.rangedFilter_.getStartPost();var W=this.index_.getCompare();B=function(De,Oe){return W(Oe,De)}}else g=h.getIterator(this.index_),S=this.rangedFilter_.getStartPost(),P=this.rangedFilter_.getEndPost(),B=this.index_.getCompare();y=0;for(var G=!1;g.hasNext();)E=g.getNext(),!G&&B(S,E)<=0&&(G=!0),G&&y<this.limit_&&B(E,P)<=0?y++:h=h.updateImmediateChild(E.name,he.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(s,h,d)},c.prototype.updatePriority=function(s,u){return s},c.prototype.filtersNodes=function(){return!0},c.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},c.prototype.getIndex=function(){return this.index_},c.prototype.fullLimitUpdateChild_=function(s,u,d,h,g){var y;if(this.reverse_){var E=this.index_.getCompare();y=function(mn,Zt){return E(Zt,mn)}}else y=this.index_.getCompare();var w=s;I.assert(w.numChildren()===this.limit_,"");var S=new Ye(u,d),P=this.reverse_?w.getFirstChild(this.index_):w.getLastChild(this.index_),B=this.rangedFilter_.matches(S);if(w.hasChild(u)){for(var W=w.getImmediateChild(u),G=h.getChildAfterChild(this.index_,P,this.reverse_);null!=G&&(G.name===u||w.hasChild(G.name));)G=h.getChildAfterChild(this.index_,G,this.reverse_);var te=null==G?1:y(G,S);if(B&&!d.isEmpty()&&te>=0)return null!=g&&g.trackChildChange(Ve.childChangedChange(u,d,W)),w.updateImmediateChild(u,d);null!=g&&g.trackChildChange(Ve.childRemovedChange(u,W));var De=w.updateImmediateChild(u,he.EMPTY_NODE);return null!=G&&this.rangedFilter_.matches(G)?(null!=g&&g.trackChildChange(Ve.childAddedChange(G.name,G.node)),De.updateImmediateChild(G.name,G.node)):De}return d.isEmpty()?s:B&&y(P,S)>=0?(null!=g&&(g.trackChildChange(Ve.childRemovedChange(P.name,P.node)),g.trackChildChange(Ve.childAddedChange(u,d))),w.updateImmediateChild(u,d).updateImmediateChild(P.name,he.EMPTY_NODE)):s},c}(),wd=function(){function c(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pt}return c.prototype.hasStart=function(){return this.startSet_},c.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===c.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},c.prototype.getIndexStartValue=function(){return I.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},c.prototype.getIndexStartName=function(){return I.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A},c.prototype.hasEnd=function(){return this.endSet_},c.prototype.getIndexEndValue=function(){return I.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},c.prototype.getIndexEndName=function(){return I.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N},c.prototype.hasLimit=function(){return this.limitSet_},c.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},c.prototype.getLimit=function(){return I.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},c.prototype.getIndex=function(){return this.index_},c.prototype.copy_=function(){var s=new c;return s.limitSet_=this.limitSet_,s.limit_=this.limit_,s.startSet_=this.startSet_,s.indexStartValue_=this.indexStartValue_,s.startNameSet_=this.startNameSet_,s.indexStartName_=this.indexStartName_,s.endSet_=this.endSet_,s.indexEndValue_=this.indexEndValue_,s.endNameSet_=this.endNameSet_,s.indexEndName_=this.indexEndName_,s.index_=this.index_,s.viewFrom_=this.viewFrom_,s},c.prototype.limit=function(s){var u=this.copy_();return u.limitSet_=!0,u.limit_=s,u.viewFrom_="",u},c.prototype.limitToFirst=function(s){var u=this.copy_();return u.limitSet_=!0,u.limit_=s,u.viewFrom_=c.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,u},c.prototype.limitToLast=function(s){var u=this.copy_();return u.limitSet_=!0,u.limit_=s,u.viewFrom_=c.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,u},c.prototype.startAt=function(s,u){var d=this.copy_();return d.startSet_=!0,void 0===s&&(s=null),d.indexStartValue_=s,null!=u?(d.startNameSet_=!0,d.indexStartName_=u):(d.startNameSet_=!1,d.indexStartName_=""),d},c.prototype.endAt=function(s,u){var d=this.copy_();return d.endSet_=!0,void 0===s&&(s=null),d.indexEndValue_=s,void 0!==u?(d.endNameSet_=!0,d.indexEndName_=u):(d.endNameSet_=!1,d.indexEndName_=""),d},c.prototype.orderBy=function(s){var u=this.copy_();return u.index_=s,u},c.prototype.getQueryObject=function(){var s=c.WIRE_PROTOCOL_CONSTANTS_,u={};if(this.startSet_&&(u[s.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(u[s.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(u[s.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(u[s.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){u[s.LIMIT]=this.limit_;var d=this.viewFrom_;""===d&&(d=this.isViewFromLeft()?s.VIEW_FROM_LEFT:s.VIEW_FROM_RIGHT),u[s.VIEW_FROM]=d}return this.index_!==pt&&(u[s.INDEX]=this.index_.toString()),u},c.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},c.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===pt},c.prototype.getNodeFilter=function(){return this.loadsAllData()?new oa(this.getIndex()):this.hasLimit()?new da(this):new qu(this)},c.prototype.toRestQueryStringParameters=function(){var d,s=c.REST_QUERY_CONSTANTS_,u={};return this.isDefault()||(this.index_===pt?d=s.PRIORITY_INDEX:this.index_===Ni?d=s.VALUE_INDEX:this.index_===we?d=s.KEY_INDEX:(I.assert(this.index_ instanceof oo,"Unrecognized index type!"),d=this.index_.toString()),u[s.ORDER_BY]=I.stringify(d),this.startSet_&&(u[s.START_AT]=I.stringify(this.indexStartValue_),this.startNameSet_&&(u[s.START_AT]+=","+I.stringify(this.indexStartName_))),this.endSet_&&(u[s.END_AT]=I.stringify(this.indexEndValue_),this.endNameSet_&&(u[s.END_AT]+=","+I.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?u[s.LIMIT_TO_FIRST]=this.limit_:u[s.LIMIT_TO_LAST]=this.limit_)),u},c.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},c.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},c.DEFAULT=new c,c}(),xt=function(c){function s(u,d){if(!(u instanceof Ut))throw new Error("new Reference() no longer supported - use app.database().");return c.call(this,u,d,wd.DEFAULT,!1)||this}return ie.__extends(s,c),s.prototype.getKey=function(){return I.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},s.prototype.child=function(u){return I.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof u?u=String(u):u instanceof re||(null===this.path.getFront()?no("Reference.child",1,u,!1):$e("Reference.child",1,u,!1)),new s(this.repo,this.path.child(u))},s.prototype.getParent=function(){I.validateArgCount("Reference.parent",0,0,arguments.length);var u=this.path.parent();return null===u?null:new s(this.repo,u)},s.prototype.getRoot=function(){I.validateArgCount("Reference.root",0,0,arguments.length);for(var u=this;null!==u.getParent();)u=u.getParent();return u},s.prototype.databaseProp=function(){return this.repo.database},s.prototype.set=function(u,d){I.validateArgCount("Reference.set",1,2,arguments.length),be("Reference.set",this.path),Pe("Reference.set",1,u,this.path,!1),I.validateCallback("Reference.set",2,d,!0);var h=new I.Deferred;return this.repo.setWithPriority(this.path,u,null,h.wrapCallback(d)),h.promise},s.prototype.update=function(u,d){if(I.validateArgCount("Reference.update",1,2,arguments.length),be("Reference.update",this.path),Array.isArray(u)){for(var h={},g=0;g<u.length;++g)h[""+g]=u[g];u=h,Je("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}st("Reference.update",1,u,this.path,!1),I.validateCallback("Reference.update",2,d,!0);var y=new I.Deferred;return this.repo.update(this.path,u,y.wrapCallback(d)),y.promise},s.prototype.setWithPriority=function(u,d,h){if(I.validateArgCount("Reference.setWithPriority",2,3,arguments.length),be("Reference.setWithPriority",this.path),Pe("Reference.setWithPriority",1,u,this.path,!1),Yt("Reference.setWithPriority",2,d,!1),I.validateCallback("Reference.setWithPriority",3,h,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var g=new I.Deferred;return this.repo.setWithPriority(this.path,u,d,g.wrapCallback(h)),g.promise},s.prototype.remove=function(u){return I.validateArgCount("Reference.remove",0,1,arguments.length),be("Reference.remove",this.path),I.validateCallback("Reference.remove",1,u,!0),this.set(null,u)},s.prototype.transaction=function(u,d,h){if(I.validateArgCount("Reference.transaction",1,3,arguments.length),be("Reference.transaction",this.path),I.validateCallback("Reference.transaction",1,u,!1),I.validateCallback("Reference.transaction",2,d,!0),Xc("Reference.transaction",3,h,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===h&&(h=!0);var g=new I.Deferred;"function"==typeof d&&g.promise.catch(function(){});var y=function(E,w,S){E?g.reject(E):g.resolve(new ge(w,S)),"function"==typeof d&&d(E,w,S)};return this.repo.startTransaction(this.path,u,y,h),g.promise},s.prototype.setPriority=function(u,d){I.validateArgCount("Reference.setPriority",1,2,arguments.length),be("Reference.setPriority",this.path),Yt("Reference.setPriority",1,u,!1),I.validateCallback("Reference.setPriority",2,d,!0);var h=new I.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),u,null,h.wrapCallback(d)),h.promise},s.prototype.push=function(u,d){I.validateArgCount("Reference.push",0,2,arguments.length),be("Reference.push",this.path),Pe("Reference.push",1,u,this.path,!0),I.validateCallback("Reference.push",2,d,!0);var w,h=this.repo.serverTime(),g=Ou(h),y=this.child(g),E=this.child(g);return w=null!=u?y.set(u,d).then(function(){return E}):Promise.resolve(E),y.then=w.then.bind(w),y.catch=w.then.bind(w,void 0),"function"==typeof d&&w.catch(function(){}),y},s.prototype.onDisconnect=function(){return be("Reference.onDisconnect",this.path),new ko(this.repo,this.path)},Object.defineProperty(s.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),s}(so);so.__referenceConstructor=xt,gn.__referenceConstructor=xt;var fa=function(){this.children={},this.childCount=0,this.value=null},Gu=function(){function c(s,u,d){void 0===s&&(s=""),void 0===u&&(u=null),void 0===d&&(d=new fa),this.name_=s,this.parent_=u,this.node_=d}return c.prototype.subTree=function(s){for(var u=s instanceof re?s:new re(s),d=this,h=u.getFront();null!==h;)d=new c(h,d,I.safeGet(d.node_.children,h)||new fa),h=(u=u.popFront()).getFront();return d},c.prototype.getValue=function(){return this.node_.value},c.prototype.setValue=function(s){I.assert(void 0!==s,"Cannot set value to undefined"),this.node_.value=s,this.updateParents_()},c.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},c.prototype.hasChildren=function(){return this.node_.childCount>0},c.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},c.prototype.forEachChild=function(s){var u=this;ee(this.node_.children,function(d,h){s(new c(d,u,h))})},c.prototype.forEachDescendant=function(s,u,d){u&&!d&&s(this),this.forEachChild(function(h){h.forEachDescendant(s,!0,d)}),u&&d&&s(this)},c.prototype.forEachAncestor=function(s,u){for(var d=u?this:this.parent();null!==d;){if(s(d))return!0;d=d.parent()}return!1},c.prototype.forEachImmediateDescendantWithValue=function(s){this.forEachChild(function(u){null!==u.getValue()?s(u):u.forEachImmediateDescendantWithValue(s)})},c.prototype.path=function(){return new re(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},c.prototype.name=function(){return this.name_},c.prototype.parent=function(){return this.parent_},c.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},c.prototype.updateChild_=function(s,u){var d=u.isEmpty(),h=I.contains(this.node_.children,s);d&&h?(delete this.node_.children[s],this.node_.childCount--,this.updateParents_()):!d&&!h&&(this.node_.children[s]=u.node_,this.node_.childCount++,this.updateParents_())},c}(),Rt=(()=>(function(c){c[c.RUN=0]="RUN",c[c.SENT=1]="SENT",c[c.COMPLETED=2]="COMPLETED",c[c.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",c[c.NEEDS_ABORT=4]="NEEDS_ABORT"}(Rt||(Rt={})),Rt))();Ut.MAX_TRANSACTION_RETRIES_=25,Ut.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Gu},Ut.prototype.startTransaction=function(c,s,u,d){this.log_("transaction on "+c);var h=function(){},g=new xt(this,c);g.on("value",h);var E={path:c,update:s,onComplete:u,status:null,order:X(),applyLocally:d,retryCount:0,unwatcher:function(){g.off("value",h)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},w=this.getLatestState_(c);E.currentInputSnapshot=w;var S=E.update(w.val());if(void 0===S){if(E.unwatcher(),E.currentOutputSnapshotRaw=null,E.currentOutputSnapshotResolved=null,E.onComplete){var P=new Br(E.currentInputSnapshot,new xt(this,E.path),pt);E.onComplete(null,!1,P)}}else{at("transaction failed: Data returned ",S,E.path),E.status=Rt.RUN;var B=this.transactionQueueTree_.subTree(c),W=B.getValue()||[];W.push(E),B.setValue(W);var G=void 0;"object"==typeof S&&null!==S&&I.contains(S,".priority")?(G=I.safeGet(S,".priority"),I.assert(ce(G),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):G=(this.serverSyncTree_.calcCompleteEventCache(c)||he.EMPTY_NODE).getPriority().val(),G=G;var se=this.generateServerValues(),De=At(S,G),Oe=na(De,w,se);E.currentOutputSnapshotRaw=De,E.currentOutputSnapshotResolved=Oe,E.currentWriteId=this.getNextWriteId_();var mn=this.serverSyncTree_.applyUserOverwrite(c,Oe,E.currentWriteId,E.applyLocally);this.eventQueue_.raiseEventsForChangedPath(c,mn),this.sendReadyTransactions_()}},Ut.prototype.getLatestState_=function(c,s){return this.serverSyncTree_.calcCompleteEventCache(c,s)||he.EMPTY_NODE},Ut.prototype.sendReadyTransactions_=function(c){var s=this;if(void 0===c&&(c=this.transactionQueueTree_),c||this.pruneCompletedTransactionsBelowNode_(c),null!==c.getValue()){var u=this.buildTransactionQueue_(c);I.assert(u.length>0,"Sending zero length transaction queue"),u.every(function(h){return h.status===Rt.RUN})&&this.sendTransactionQueue_(c.path(),u)}else c.hasChildren()&&c.forEachChild(function(h){s.sendReadyTransactions_(h)})},Ut.prototype.sendTransactionQueue_=function(c,s){for(var u=this,d=s.map(function(W){return W.currentWriteId}),h=this.getLatestState_(c,d),g=h,y=h.hash(),E=0;E<s.length;E++){var w=s[E];I.assert(w.status===Rt.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=Rt.SENT,w.retryCount++;var S=re.relativePath(c,w.path);g=g.updateChild(S,w.currentOutputSnapshotRaw)}var P=g.val(!0),B=c;this.server_.put(B.toString(),P,function(W){u.log_("transaction put response",{path:B.toString(),status:W});var G=[];if("ok"===W){for(var te=[],se=0;se<s.length;se++){if(s[se].status=Rt.COMPLETED,G=G.concat(u.serverSyncTree_.ackUserWrite(s[se].currentWriteId)),s[se].onComplete){var De=s[se].currentOutputSnapshotResolved,Oe=new xt(u,s[se].path),mn=new Br(De,Oe,pt);te.push(s[se].onComplete.bind(null,null,!0,mn))}s[se].unwatcher()}for(u.pruneCompletedTransactionsBelowNode_(u.transactionQueueTree_.subTree(c)),u.sendReadyTransactions_(),u.eventQueue_.raiseEventsForChangedPath(c,G),se=0;se<te.length;se++)In(te[se])}else{if("datastale"===W)for(se=0;se<s.length;se++)s[se].status=s[se].status===Rt.SENT_NEEDS_ABORT?Rt.NEEDS_ABORT:Rt.RUN;else for(Je("transaction at "+B.toString()+" failed: "+W),se=0;se<s.length;se++)s[se].status=Rt.NEEDS_ABORT,s[se].abortReason=W;u.rerunTransactions_(c)}},y)},Ut.prototype.rerunTransactions_=function(c){var s=this.getAncestorTransactionNode_(c),u=s.path(),d=this.buildTransactionQueue_(s);return this.rerunTransactionQueue_(d,u),u},Ut.prototype.rerunTransactionQueue_=function(c,s){if(0!==c.length){for(var u=[],d=[],g=c.filter(function(gi){return gi.status===Rt.RUN}).map(function(gi){return gi.currentWriteId}),y=0;y<c.length;y++){var E=c[y],w=re.relativePath(s,E.path),S=!1,P=void 0;if(I.assert(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),E.status===Rt.NEEDS_ABORT)S=!0,P=E.abortReason,d=d.concat(this.serverSyncTree_.ackUserWrite(E.currentWriteId,!0));else if(E.status===Rt.RUN)if(E.retryCount>=Ut.MAX_TRANSACTION_RETRIES_)S=!0,P="maxretry",d=d.concat(this.serverSyncTree_.ackUserWrite(E.currentWriteId,!0));else{var B=this.getLatestState_(E.path,g);E.currentInputSnapshot=B;var W=c[y].update(B.val());if(void 0!==W){at("transaction failed: Data returned ",W,E.path);var G=At(W);"object"==typeof W&&null!=W&&I.contains(W,".priority")||(G=G.updatePriority(B.getPriority()));var se=E.currentWriteId,De=this.generateServerValues(),Oe=na(G,B,De);E.currentOutputSnapshotRaw=G,E.currentOutputSnapshotResolved=Oe,E.currentWriteId=this.getNextWriteId_(),g.splice(g.indexOf(se),1),d=(d=d.concat(this.serverSyncTree_.applyUserOverwrite(E.path,Oe,E.currentWriteId,E.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(se,!0))}else S=!0,P="nodata",d=d.concat(this.serverSyncTree_.ackUserWrite(E.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(s,d),d=[],S&&(c[y].status=Rt.COMPLETED,setTimeout(c[y].unwatcher,Math.floor(0)),c[y].onComplete))if("nodata"===P){var mn=new xt(this,c[y].path),yn=new Br(c[y].currentInputSnapshot,mn,pt);u.push(c[y].onComplete.bind(null,null,!1,yn))}else u.push(c[y].onComplete.bind(null,new Error(P),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),y=0;y<u.length;y++)In(u[y]);this.sendReadyTransactions_()}},Ut.prototype.getAncestorTransactionNode_=function(c){var s,u=this.transactionQueueTree_;for(s=c.getFront();null!==s&&null===u.getValue();)u=u.subTree(s),s=(c=c.popFront()).getFront();return u},Ut.prototype.buildTransactionQueue_=function(c){var s=[];return this.aggregateTransactionQueuesForNode_(c,s),s.sort(function(u,d){return u.order-d.order}),s},Ut.prototype.aggregateTransactionQueuesForNode_=function(c,s){var u=this,d=c.getValue();if(null!==d)for(var h=0;h<d.length;h++)s.push(d[h]);c.forEachChild(function(g){u.aggregateTransactionQueuesForNode_(g,s)})},Ut.prototype.pruneCompletedTransactionsBelowNode_=function(c){var s=this,u=c.getValue();if(u){for(var d=0,h=0;h<u.length;h++)u[h].status!==Rt.COMPLETED&&(u[d]=u[h],d++);u.length=d,c.setValue(u.length>0?u:null)}c.forEachChild(function(g){s.pruneCompletedTransactionsBelowNode_(g)})},Ut.prototype.abortTransactions_=function(c){var s=this,u=this.getAncestorTransactionNode_(c).path(),d=this.transactionQueueTree_.subTree(c);return d.forEachAncestor(function(h){s.abortTransactionsOnNode_(h)}),this.abortTransactionsOnNode_(d),d.forEachDescendant(function(h){s.abortTransactionsOnNode_(h)}),u},Ut.prototype.abortTransactionsOnNode_=function(c){var s=c.getValue();if(null!==s){for(var u=[],d=[],h=-1,g=0;g<s.length;g++)s[g].status!==Rt.SENT_NEEDS_ABORT&&(s[g].status===Rt.SENT?(I.assert(h===g-1,"All SENT items should be at beginning of queue."),h=g,s[g].status=Rt.SENT_NEEDS_ABORT,s[g].abortReason="set"):(I.assert(s[g].status===Rt.RUN,"Unexpected transaction status in abort"),s[g].unwatcher(),d=d.concat(this.serverSyncTree_.ackUserWrite(s[g].currentWriteId,!0)),s[g].onComplete&&u.push(s[g].onComplete.bind(null,new Error("set"),!1,null))));for(-1===h?c.setValue(null):s.length=h+1,this.eventQueue_.raiseEventsForChangedPath(c.path(),d),g=0;g<u.length;g++)In(u[g])}};var St,Dd=function(){function c(s,u){var d=this;this.app_=s,this.authProvider_=u,this.auth_=null,this.auth_=u.getImmediate({optional:!0}),this.auth_||u.get().then(function(h){return d.auth_=h})}return c.prototype.getToken=function(s){return this.auth_?this.auth_.getToken(s).catch(function(u){return u&&"auth/token-not-initialized"===u.code?(Ge("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(u)}):Promise.resolve(null)},c.prototype.addTokenChangeListener=function(s){this.auth_?this.auth_.addAuthTokenListener(s):(setTimeout(function(){return s(null)},0),this.authProvider_.get().then(function(u){return u.addAuthTokenListener(s)}))},c.prototype.removeTokenChangeListener=function(s){this.authProvider_.get().then(function(u){return u.removeAuthTokenListener(s)})},c.prototype.notifyForInvalidToken=function(){var s='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';Je(s+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},c}(),ha=function(){function c(){}return c.prototype.getToken=function(s){return Promise.resolve({accessToken:c.EMULATOR_AUTH_TOKEN})},c.prototype.addTokenChangeListener=function(s){s(c.EMULATOR_AUTH_TOKEN)},c.prototype.removeTokenChangeListener=function(s){},c.prototype.notifyForInvalidToken=function(){},c.EMULATOR_AUTH_TOKEN="owner",c}(),zu=function(){function c(){this.repos_={},this.useRestClient_=!1}return c.getInstance=function(){return St||(St=new c),St},c.prototype.interrupt=function(){var s,u,d,h;try{for(var g=ie.__values(Object.keys(this.repos_)),y=g.next();!y.done;y=g.next()){var E=y.value;try{for(var w=(d=void 0,ie.__values(Object.keys(this.repos_[E]))),S=w.next();!S.done;S=w.next())this.repos_[E][S.value].interrupt()}catch(B){d={error:B}}finally{try{S&&!S.done&&(h=w.return)&&h.call(w)}finally{if(d)throw d.error}}}}catch(B){s={error:B}}finally{try{y&&!y.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}},c.prototype.resume=function(){var s,u,d,h;try{for(var g=ie.__values(Object.keys(this.repos_)),y=g.next();!y.done;y=g.next()){var E=y.value;try{for(var w=(d=void 0,ie.__values(Object.keys(this.repos_[E]))),S=w.next();!S.done;S=w.next())this.repos_[E][S.value].resume()}catch(B){d={error:B}}finally{try{S&&!S.done&&(h=w.return)&&h.call(w)}finally{if(d)throw d.error}}}}catch(B){s={error:B}}finally{try{y&&!y.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}},c.prototype.databaseFromApp=function(s,u,d,h){var g=d||s.options.databaseURL;void 0===g&&(s.options.projectId||ht("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ge("Using default host for project ",s.options.projectId),g=s.options.projectId+"-default-rtdb.firebaseio.com");var w,y=eo(g,h),E=y.repoInfo,S=void 0;"undefined"!=typeof process&&(S=process.env.FIREBASE_DATABASE_EMULATOR_HOST),S?(w=!0,E=(y=eo(g="http://"+S+"?ns="+E.namespace,h)).repoInfo):w=!y.repoInfo.secure;var P=h&&w?new ha:new Dd(s,u);return Fo("Invalid Firebase Database URL",1,y),y.path.isEmpty()||ht("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(E,s,P).database},c.prototype.deleteRepo=function(s){var u=I.safeGet(this.repos_,s.app.name);(!u||I.safeGet(u,s.repoInfo_.toURLString())!==s)&&ht("Database "+s.app.name+"("+s.repoInfo_+") has already been deleted."),s.interrupt(),delete u[s.repoInfo_.toURLString()]},c.prototype.createRepo=function(s,u,d){var h=I.safeGet(this.repos_,u.name);h||(this.repos_[u.name]=h={});var g=I.safeGet(h,s.toURLString());return g&&ht("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),g=new Ut(s,this.useRestClient_,u,d),h[s.toURLString()]=g,g},c.prototype.forceRestClient=function(s){this.useRestClient_=s},c}(),ho=function(){function c(s){this.repo_=s,s instanceof Ut||ht("Don't call new Database() directly - please use firebase.database()."),this.root_=new xt(s,re.Empty),this.INTERNAL=new Sd(this)}return Object.defineProperty(c.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),c.prototype.ref=function(s){return this.checkDeleted_("ref"),I.validateArgCount("database.ref",0,1,arguments.length),s instanceof xt?this.refFromURL(s.toString()):void 0!==s?this.root_.child(s):this.root_},c.prototype.refFromURL=function(s){var u="database.refFromURL";this.checkDeleted_(u),I.validateArgCount(u,1,1,arguments.length);var d=eo(s,this.repo_.repoInfo_.nodeAdmin);Fo(u,1,d);var h=d.repoInfo;return h.host!==this.repo_.repoInfo_.host&&ht(u+": Host name does not match the current database: (found "+h.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(d.path.toString())},c.prototype.checkDeleted_=function(s){null===this.repo_&&ht("Cannot call "+s+" on a deleted database.")},c.prototype.goOffline=function(){I.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},c.prototype.goOnline=function(){I.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},c.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(s){return{".sv":{increment:s}}}},c}(),Sd=function(){function c(s){this.database=s}return c.prototype.delete=function(){return ie.__awaiter(this,void 0,void 0,function(){return ie.__generator(this,function(s){return this.database.checkDeleted_("delete"),zu.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},c}(),Rn=Object.freeze({__proto__:null,forceLongPolling:function(){di.forceDisallow(),Tn.forceAllow()},forceWebSockets:function(){Tn.forceDisallow()},isWebSocketsAvailable:function(){return di.isAvailable()},setSecurityDebugCallback:function(c,s){c.repo.persistentConnection_.securityDebugCallback_=s},stats:function(c,s){c.repo.stats(s)},statsIncrementCounter:function(c,s){c.repo.statsIncrementCounter(s)},dataUpdateCount:function(c){return c.repo.dataUpdateCount},interceptServerData:function(c,s){return c.repo.interceptServerData_(s)}}),Yu=pi;pi.prototype.simpleListen=function(c,s){this.sendRequest("q",{p:c},s)},pi.prototype.echo=function(c,s){this.sendRequest("echo",{d:c},s)};var Ne=Object.freeze({__proto__:null,DataConnection:Yu,RealTimeConnection:la,hijackHash:function(c){var s=pi.prototype.put;return pi.prototype.put=function(u,d,h,g){void 0!==g&&(g=c()),s.call(this,u,d,h,g)},function(){pi.prototype.put=s}},ConnectionTarget:Et,queryIdentifier:function(c){return c.queryIdentifier()},forceRestClient:function(c){zu.getInstance().forceRestClient(c)}}),Zu=ho.ServerValue;function Ju(c){!function(c){Oi=c}(c.SDK_VERSION);var s=c.INTERNAL.registerComponent(new rt.Component("database",function(u,d){var h=u.getProvider("app").getImmediate(),g=u.getProvider("auth-internal");return zu.getInstance().databaseFromApp(h,g,d)},"PUBLIC").setServiceProps({Reference:xt,Query:so,Database:ho,DataSnapshot:Br,enableLogging:ft,INTERNAL:Rn,ServerValue:Zu,TEST_ACCESS:Ne}).setMultipleInstances(!0));c.registerVersion("@firebase/database","0.6.13"),I.isNodeSdk()&&(fn.exports=s)}Ju(bt.default),K.DataSnapshot=Br,K.Database=ho,K.OnDisconnect=ko,K.Query=so,K.Reference=xt,K.ServerValue=Zu,K.enableLogging=ft,K.registerDatabase=Ju},300:(fn,K,Me)=>{"use strict";function ye(){for(var ne=0,J=0,X=arguments.length;J<X;J++)ne+=arguments[J].length;var Ze=Array(ne),xe=0;for(J=0;J<X;J++)for(var ot=arguments[J],dt=0,ft=ot.length;dt<ft;dt++,xe++)Ze[xe]=ot[dt];return Ze}Me.r(K),Me.d(K,{LogLevel:()=>fe,Logger:()=>Te,setLogLevel:()=>Z,setUserLogHandler:()=>pe});var ie,I=[],fe=(()=>{return(ne=fe||(fe={}))[ne.DEBUG=0]="DEBUG",ne[ne.VERBOSE=1]="VERBOSE",ne[ne.INFO=2]="INFO",ne[ne.WARN=3]="WARN",ne[ne.ERROR=4]="ERROR",ne[ne.SILENT=5]="SILENT",fe;var ne})(),rt={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},yt=fe.INFO,bt=((ie={})[fe.DEBUG]="log",ie[fe.VERBOSE]="log",ie[fe.INFO]="info",ie[fe.WARN]="warn",ie[fe.ERROR]="error",ie),Gt=function(ne,J){for(var X=[],Ze=2;Ze<arguments.length;Ze++)X[Ze-2]=arguments[Ze];if(!(J<ne.logLevel)){var xe=(new Date).toISOString(),ot=bt[J];if(!ot)throw new Error("Attempted to log a message with an invalid logType (value: "+J+")");console[ot].apply(console,ye(["["+xe+"]  "+ne.name+":"],X))}},Te=function(){function ne(J){this.name=J,this._logLevel=yt,this._logHandler=Gt,this._userLogHandler=null,I.push(this)}return Object.defineProperty(ne.prototype,"logLevel",{get:function(){return this._logLevel},set:function(J){if(!(J in fe))throw new TypeError('Invalid value "'+J+'" assigned to `logLevel`');this._logLevel=J},enumerable:!1,configurable:!0}),ne.prototype.setLogLevel=function(J){this._logLevel="string"==typeof J?rt[J]:J},Object.defineProperty(ne.prototype,"logHandler",{get:function(){return this._logHandler},set:function(J){if("function"!=typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J},enumerable:!1,configurable:!0}),Object.defineProperty(ne.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(J){this._userLogHandler=J},enumerable:!1,configurable:!0}),ne.prototype.debug=function(){for(var J=[],X=0;X<arguments.length;X++)J[X]=arguments[X];this._userLogHandler&&this._userLogHandler.apply(this,ye([this,fe.DEBUG],J)),this._logHandler.apply(this,ye([this,fe.DEBUG],J))},ne.prototype.log=function(){for(var J=[],X=0;X<arguments.length;X++)J[X]=arguments[X];this._userLogHandler&&this._userLogHandler.apply(this,ye([this,fe.VERBOSE],J)),this._logHandler.apply(this,ye([this,fe.VERBOSE],J))},ne.prototype.info=function(){for(var J=[],X=0;X<arguments.length;X++)J[X]=arguments[X];this._userLogHandler&&this._userLogHandler.apply(this,ye([this,fe.INFO],J)),this._logHandler.apply(this,ye([this,fe.INFO],J))},ne.prototype.warn=function(){for(var J=[],X=0;X<arguments.length;X++)J[X]=arguments[X];this._userLogHandler&&this._userLogHandler.apply(this,ye([this,fe.WARN],J)),this._logHandler.apply(this,ye([this,fe.WARN],J))},ne.prototype.error=function(){for(var J=[],X=0;X<arguments.length;X++)J[X]=arguments[X];this._userLogHandler&&this._userLogHandler.apply(this,ye([this,fe.ERROR],J)),this._logHandler.apply(this,ye([this,fe.ERROR],J))},ne}();function Z(ne){I.forEach(function(J){J.setLogLevel(ne)})}function pe(ne,J){for(var X=function(dt){var ft=null;J&&J.level&&(ft=rt[J.level]),dt.userLogHandler=null===ne?null:function(Ge,ze){for(var _e=[],ht=2;ht<arguments.length;ht++)_e[ht-2]=arguments[ht];var Je=_e.map(function(v){if(null==v)return null;if("string"==typeof v)return v;if("number"==typeof v||"boolean"==typeof v)return v.toString();if(v instanceof Error)return v.message;try{return JSON.stringify(v)}catch(D){return null}}).filter(function(v){return v}).join(" ");ze>=(null!=ft?ft:Ge.logLevel)&&ne({level:fe[ze].toLowerCase(),message:Je,args:_e,type:Ge.name})}},Ze=0,xe=I;Ze<xe.length;Ze++)X(xe[Ze])}},704:(fn,K,Me)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});var ye=Me(57),ie={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},I=function(k,x){if(!k)throw fe(x)},fe=function(k){return new Error("Firebase Database ("+ie.SDK_VERSION+") INTERNAL ASSERT FAILED: "+k)},rt=function(k){for(var x=[],V=0,H=0;H<k.length;H++){var L=k.charCodeAt(H);L<128?x[V++]=L:L<2048?(x[V++]=L>>6|192,x[V++]=63&L|128):55296==(64512&L)&&H+1<k.length&&56320==(64512&k.charCodeAt(H+1))?(L=65536+((1023&L)<<10)+(1023&k.charCodeAt(++H)),x[V++]=L>>18|240,x[V++]=L>>12&63|128,x[V++]=L>>6&63|128,x[V++]=63&L|128):(x[V++]=L>>12|224,x[V++]=L>>6&63|128,x[V++]=63&L|128)}return x},bt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(k,x){if(!Array.isArray(k))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var V=x?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[],L=0;L<k.length;L+=3){var ce=k[L],Pe=L+1<k.length,at=Pe?k[L+1]:0,Tt=L+2<k.length,st=Tt?k[L+2]:0,Nt=(15&at)<<2|st>>6,$e=63&st;Tt||($e=64,Pe||(Nt=64)),H.push(V[ce>>2],V[(3&ce)<<4|at>>4],V[Nt],V[$e])}return H.join("")},encodeString:function(k,x){return this.HAS_NATIVE_SUPPORT&&!x?btoa(k):this.encodeByteArray(rt(k),x)},decodeString:function(k,x){return this.HAS_NATIVE_SUPPORT&&!x?atob(k):function(k){for(var x=[],V=0,H=0;V<k.length;){var L=k[V++];if(L<128)x[H++]=String.fromCharCode(L);else if(L>191&&L<224){var ce=k[V++];x[H++]=String.fromCharCode((31&L)<<6|63&ce)}else if(L>239&&L<365){var Tt=((7&L)<<18|(63&(ce=k[V++]))<<12|(63&(Pe=k[V++]))<<6|63&k[V++])-65536;x[H++]=String.fromCharCode(55296+(Tt>>10)),x[H++]=String.fromCharCode(56320+(1023&Tt))}else{ce=k[V++];var Pe=k[V++];x[H++]=String.fromCharCode((15&L)<<12|(63&ce)<<6|63&Pe)}}return x.join("")}(this.decodeStringToByteArray(k,x))},decodeStringToByteArray:function(k,x){this.init_();for(var V=x?this.charToByteMapWebSafe_:this.charToByteMap_,H=[],L=0;L<k.length;){var ce=V[k.charAt(L++)],at=L<k.length?V[k.charAt(L)]:0,st=++L<k.length?V[k.charAt(L)]:64,Ht=++L<k.length?V[k.charAt(L)]:64;if(++L,null==ce||null==at||null==st||null==Ht)throw Error();H.push(ce<<2|at>>4),64!==st&&(H.push(at<<4&240|st>>2),64!==Ht&&H.push(st<<6&192|Ht))}return H},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var k=0;k<this.ENCODED_VALS.length;k++)this.byteToCharMap_[k]=this.ENCODED_VALS.charAt(k),this.charToByteMap_[this.byteToCharMap_[k]]=k,this.byteToCharMapWebSafe_[k]=this.ENCODED_VALS_WEBSAFE.charAt(k),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[k]]=k,k>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(k)]=k,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(k)]=k)}}},Te=function(k){try{return bt.decodeString(k,!0)}catch(x){console.error("base64Decode failed: ",x)}return null};function pe(k,x){if(!(x instanceof Object))return x;switch(x.constructor){case Date:return new Date(x.getTime());case Object:void 0===k&&(k={});break;case Array:k=[];break;default:return x}for(var H in x)!x.hasOwnProperty(H)||(k[H]=pe(k[H],x[H]));return k}var ne=function(){function k(){var x=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(V,H){x.resolve=V,x.reject=H})}return k.prototype.wrapCallback=function(x){var V=this;return function(H,L){H?V.reject(H):V.resolve(L),"function"==typeof x&&(V.promise.catch(function(){}),1===x.length?x(H):x(H,L))}},k}();function J(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ze(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(k){return!1}}var A=function(k){function x(V,H){var L=k.call(this,H)||this;return L.code=V,L.name="FirebaseError",Object.setPrototypeOf(L,x.prototype),Error.captureStackTrace&&Error.captureStackTrace(L,N.prototype.create),L}return ye.__extends(x,k),x}(Error),N=function(){function k(x,V,H){this.service=x,this.serviceName=V,this.errors=H}return k.prototype.create=function(x){for(var V=[],H=1;H<arguments.length;H++)V[H-1]=arguments[H];for(var L=V[0]||{},ce=this.service+"/"+x,Pe=this.errors[x],at=Pe?T(Pe,L):"Error",Tt=this.serviceName+": "+at+" ("+ce+").",st=new A(ce,Tt),Yt=0,Ht=Object.keys(L);Yt<Ht.length;Yt++){var Nt=Ht[Yt];"_"!==Nt.slice(-1)&&(Nt in st&&console.warn('Overwriting FirebaseError base field "'+Nt+'" can cause unexpected behavior.'),st[Nt]=L[Nt])}return st},k}();function T(k,x){return k.replace(O,function(V,H){var L=x[H];return null!=L?String(L):"<"+H+"?>"})}var O=/\{\$([^}]+)}/g;function z(k){return JSON.parse(k)}var U=function(k){var x={},V={},H={},L="";try{var ce=k.split(".");x=z(Te(ce[0])||""),V=z(Te(ce[1])||""),L=ce[2],H=V.d||{},delete V.d}catch(Pe){}return{header:x,claims:V,data:H,signature:L}},re=function(){function k(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var x=1;x<this.blockSize;++x)this.pad_[x]=0;this.reset()}return k.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},k.prototype.compress_=function(x,V){V||(V=0);var H=this.W_;if("string"==typeof x)for(var L=0;L<16;L++)H[L]=x.charCodeAt(V)<<24|x.charCodeAt(V+1)<<16|x.charCodeAt(V+2)<<8|x.charCodeAt(V+3),V+=4;else for(L=0;L<16;L++)H[L]=x[V]<<24|x[V+1]<<16|x[V+2]<<8|x[V+3],V+=4;for(L=16;L<80;L++)H[L]=4294967295&((ce=H[L-3]^H[L-8]^H[L-14]^H[L-16])<<1|ce>>>31);var Ht,Nt,Pe=this.chain_[0],at=this.chain_[1],Tt=this.chain_[2],st=this.chain_[3],Yt=this.chain_[4];for(L=0;L<80;L++){L<40?L<20?(Ht=st^at&(Tt^st),Nt=1518500249):(Ht=at^Tt^st,Nt=1859775393):L<60?(Ht=at&Tt|st&(at|Tt),Nt=2400959708):(Ht=at^Tt^st,Nt=3395469782);var ce=(Pe<<5|Pe>>>27)+Ht+Yt+Nt+H[L]&4294967295;Yt=st,st=Tt,Tt=4294967295&(at<<30|at>>>2),at=Pe,Pe=ce}this.chain_[0]=this.chain_[0]+Pe&4294967295,this.chain_[1]=this.chain_[1]+at&4294967295,this.chain_[2]=this.chain_[2]+Tt&4294967295,this.chain_[3]=this.chain_[3]+st&4294967295,this.chain_[4]=this.chain_[4]+Yt&4294967295},k.prototype.update=function(x,V){if(null!=x){void 0===V&&(V=x.length);for(var H=V-this.blockSize,L=0,ce=this.buf_,Pe=this.inbuf_;L<V;){if(0===Pe)for(;L<=H;)this.compress_(x,L),L+=this.blockSize;if("string"==typeof x){for(;L<V;)if(ce[Pe]=x.charCodeAt(L),++L,++Pe===this.blockSize){this.compress_(ce),Pe=0;break}}else for(;L<V;)if(ce[Pe]=x[L],++L,++Pe===this.blockSize){this.compress_(ce),Pe=0;break}}this.inbuf_=Pe,this.total_+=V}},k.prototype.digest=function(){var x=[],V=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var H=this.blockSize-1;H>=56;H--)this.buf_[H]=255&V,V/=256;this.compress_(this.buf_);var L=0;for(H=0;H<5;H++)for(var ce=24;ce>=0;ce-=8)x[L]=this.chain_[H]>>ce&255,++L;return x},k}(),Vr=function(){function k(x,V){var H=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(function(){x(H)}).catch(function(L){H.error(L)})}return k.prototype.next=function(x){this.forEachObserver(function(V){V.next(x)})},k.prototype.error=function(x){this.forEachObserver(function(V){V.error(x)}),this.close(x)},k.prototype.complete=function(){this.forEachObserver(function(x){x.complete()}),this.close()},k.prototype.subscribe=function(x,V,H){var ce,L=this;if(void 0===x&&void 0===V&&void 0===H)throw new Error("Missing Observer.");void 0===(ce=function(k,x){if("object"!=typeof k||null===k)return!1;for(var V=0,H=["next","error","complete"];V<H.length;V++){var L=H[V];if(L in k&&"function"==typeof k[L])return!0}return!1}(x)?x:{next:x,error:V,complete:H}).next&&(ce.next=rn),void 0===ce.error&&(ce.error=rn),void 0===ce.complete&&(ce.complete=rn);var Pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{L.finalError?ce.error(L.finalError):ce.complete()}catch(at){}}),this.observers.push(ce),Pe},k.prototype.unsubscribeOne=function(x){void 0===this.observers||void 0===this.observers[x]||(delete this.observers[x],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},k.prototype.forEachObserver=function(x){if(!this.finalized)for(var V=0;V<this.observers.length;V++)this.sendOne(V,x)},k.prototype.sendOne=function(x,V){var H=this;this.task.then(function(){if(void 0!==H.observers&&void 0!==H.observers[x])try{V(H.observers[x])}catch(L){"undefined"!=typeof console&&console.error&&console.error(L)}})},k.prototype.close=function(x){var V=this;this.finalized||(this.finalized=!0,void 0!==x&&(this.finalError=x),this.task.then(function(){V.observers=void 0,V.onNoObservers=void 0}))},k}();function rn(){}function vt(k,x,V){var H="";switch(x){case 1:H=V?"first":"First";break;case 2:H=V?"second":"Second";break;case 3:H=V?"third":"Third";break;case 4:H=V?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return k+" failed: "+(H+" argument ")}K.CONSTANTS=ie,K.Deferred=ne,K.ErrorFactory=N,K.FirebaseError=A,K.MAX_VALUE_MILLIS=144e5,K.RANDOM_FACTOR=.5,K.Sha1=re,K.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},K.assert=I,K.assertionError=fe,K.async=function(k,x){return function(){for(var V=[],H=0;H<arguments.length;H++)V[H]=arguments[H];Promise.resolve(!0).then(function(){k.apply(void 0,V)}).catch(function(L){x&&x(L)})}},K.base64=bt,K.base64Decode=Te,K.base64Encode=function(k){var x=rt(k);return bt.encodeByteArray(x,!0)},K.calculateBackoffMillis=function(k,x,V){void 0===x&&(x=1e3),void 0===V&&(V=2);var H=x*Math.pow(V,k),L=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+L)},K.contains=function(k,x){return Object.prototype.hasOwnProperty.call(k,x)},K.createSubscribe=function(k,x){var V=new Vr(k,x);return V.subscribe.bind(V)},K.decode=U,K.deepCopy=function(k){return pe(void 0,k)},K.deepExtend=pe,K.errorPrefix=vt,K.getUA=J,K.isAdmin=function(k){var x=U(k).claims;return"object"==typeof x&&!0===x.admin},K.isBrowser=function(){return"object"==typeof self&&self.self===self},K.isBrowserExtension=function(){var k="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof k&&void 0!==k.id},K.isElectron=function(){return J().indexOf("Electron/")>=0},K.isEmpty=function(k){for(var x in k)if(Object.prototype.hasOwnProperty.call(k,x))return!1;return!0},K.isIE=function(){var k=J();return k.indexOf("MSIE ")>=0||k.indexOf("Trident/")>=0},K.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},K.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(J())},K.isNode=Ze,K.isNodeSdk=function(){return!0===ie.NODE_CLIENT||!0===ie.NODE_ADMIN},K.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},K.isSafari=function(){return!Ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},K.isUWP=function(){return J().indexOf("MSAppHost/")>=0},K.isValidFormat=function(k){var V=U(k).claims;return!!V&&"object"==typeof V&&V.hasOwnProperty("iat")},K.isValidTimestamp=function(k){var x=U(k).claims,V=Math.floor((new Date).getTime()/1e3),H=0,L=0;return"object"==typeof x&&(x.hasOwnProperty("nbf")?H=x.nbf:x.hasOwnProperty("iat")&&(H=x.iat),L=x.hasOwnProperty("exp")?x.exp:H+86400),!!V&&!!H&&!!L&&V>=H&&V<=L},K.issuedAtTime=function(k){var x=U(k).claims;return"object"==typeof x&&x.hasOwnProperty("iat")?x.iat:null},K.jsonEval=z,K.map=function(k,x,V){var H={};for(var L in k)Object.prototype.hasOwnProperty.call(k,L)&&(H[L]=x.call(V,k[L],L,k));return H},K.querystring=function(k){for(var x=[],V=function(Tt,st){Array.isArray(st)?st.forEach(function(Yt){x.push(encodeURIComponent(Tt)+"="+encodeURIComponent(Yt))}):x.push(encodeURIComponent(Tt)+"="+encodeURIComponent(st))},H=0,L=Object.entries(k);H<L.length;H++){var ce=L[H];V(ce[0],ce[1])}return x.length?"&"+x.join("&"):""},K.querystringDecode=function(k){var x={};return k.replace(/^\?/,"").split("&").forEach(function(H){if(H){var L=H.split("=");x[L[0]]=L[1]}}),x},K.safeGet=function(k,x){if(Object.prototype.hasOwnProperty.call(k,x))return k[x]},K.stringLength=function(k){for(var x=0,V=0;V<k.length;V++){var H=k.charCodeAt(V);H<128?x++:H<2048?x+=2:H>=55296&&H<=56319?(x+=4,V++):x+=3}return x},K.stringToByteArray=function(k){for(var x=[],V=0,H=0;H<k.length;H++){var L=k.charCodeAt(H);if(L>=55296&&L<=56319){var ce=L-55296;H++,I(H<k.length,"Surrogate pair missing trail surrogate."),L=65536+(ce<<10)+(k.charCodeAt(H)-56320)}L<128?x[V++]=L:L<2048?(x[V++]=L>>6|192,x[V++]=63&L|128):L<65536?(x[V++]=L>>12|224,x[V++]=L>>6&63|128,x[V++]=63&L|128):(x[V++]=L>>18|240,x[V++]=L>>12&63|128,x[V++]=L>>6&63|128,x[V++]=63&L|128)}return x},K.stringify=function(k){return JSON.stringify(k)},K.validateArgCount=function(k,x,V,H){var L;if(H<x?L="at least "+x:H>V&&(L=0===V?"none":"no more than "+V),L)throw new Error(k+" failed: Was called with "+H+(1===H?" argument.":" arguments.")+" Expects "+L+".")},K.validateCallback=function(k,x,V,H){if((!H||V)&&"function"!=typeof V)throw new Error(vt(k,x,H)+"must be a valid function.")},K.validateContextObject=function(k,x,V,H){if((!H||V)&&("object"!=typeof V||null===V))throw new Error(vt(k,x,H)+"must be a valid context object.")},K.validateIndexedDBOpenable=function(){return new Promise(function(k,x){try{var V=!0,H="validate-browser-context-for-indexeddb-analytics-module",L=window.indexedDB.open(H);L.onsuccess=function(){L.result.close(),V||window.indexedDB.deleteDatabase(H),k(!0)},L.onupgradeneeded=function(){V=!1},L.onerror=function(){var ce;x((null===(ce=L.error)||void 0===ce?void 0:ce.message)||"")}}catch(ce){x(ce)}})},K.validateNamespace=function(k,x,V,H){if((!H||V)&&"string"!=typeof V)throw new Error(vt(k,x,H)+"must be a valid firebase namespace.")}},395:(fn,K,Me)=>{"use strict";function ie(yt){return yt&&"object"==typeof yt&&"default"in yt?yt:{default:yt}}var I=ie(Me(279));I.default.registerVersion("firebase","7.24.0","app"),fn.exports=I.default},622:(fn,K,Me)=>{"use strict";function ye(t){return"function"==typeof t}let ie=!1;const I={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else ie&&console.log("RxJS: Back to a better error behavior. Thank you. <3");ie=t},get useDeprecatedSynchronousErrorHandling(){return ie}};function fe(t){setTimeout(()=>{throw t},0)}const rt={closed:!0,next(t){},error(t){if(I.useDeprecatedSynchronousErrorHandling)throw t;fe(t)},complete(){}},yt=Array.isArray||(t=>t&&"number"==typeof t.length);function bt(t){return null!==t&&"object"==typeof t}const Te=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class Z{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof Z)n.remove(this);else if(null!==n)for(let a=0;a<n.length;++a)n[a].remove(this);if(ye(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(a){e=a instanceof Te?pe(a.errors):[a]}}if(yt(o)){let a=-1,l=o.length;for(;++a<l;){const f=o[a];if(bt(f))try{f.unsubscribe()}catch(p){e=e||[],p instanceof Te?e=e.concat(pe(p.errors)):e.push(p)}}}if(e)throw new Te(e)}add(e){let n=e;if(!e)return Z.EMPTY;switch(typeof e){case"function":n=new Z(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof Z)){const o=n;n=new Z,n._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof Z){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const n=this._subscriptions;if(n){const r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}var t;function pe(t){return t.reduce((e,n)=>e.concat(n instanceof Te?n.errors:n),[])}Z.EMPTY=((t=new Z).closed=!0,t);const ne="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class X extends Z{constructor(e,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=rt;break;case 1:if(!e){this.destination=rt;break}if("object"==typeof e){e instanceof X?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new Ze(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new Ze(this,e,n,r)}}[ne](){return this}static create(e,n,r){const i=new X(e,n,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class Ze extends X{constructor(e,n,r,i){super(),this._parentSubscriber=e;let o,a=this;ye(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==rt&&(a=Object.create(n),ye(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;I.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=I;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=e,n.syncErrorThrown=!0):fe(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;fe(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);I.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(r){if(this.unsubscribe(),I.useDeprecatedSynchronousErrorHandling)throw r;fe(r)}}__tryOrSetError(e,n,r){if(!I.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(i){return I.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(fe(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const dt="function"==typeof Symbol&&Symbol.observable||"@@observable";function ft(t){return t}let _e=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof X)return t;if(t[ne])return t[ne]()}return t||e||n?new X(t,e,n):new X(rt)}(n,r,i);if(a.add(o?o.call(a,this.source):this.source||I.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),I.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(n){try{return this._subscribe(n)}catch(r){I.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof X?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=ht(r))((i,o)=>{let a;a=this.subscribe(l=>{try{n(l)}catch(f){o(f),a&&a.unsubscribe()}},o,i)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[dt](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?ft:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=ht(n))((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return t.create=e=>new t(e),t})();function ht(t){if(t||(t=I.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const v=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class D extends Z{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class b extends X{constructor(e){super(e),this.destination=e}}let A=(()=>{class t extends _e{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ne](){return new b(this)}lift(n){const r=new N(this,this);return r.operator=n,r}next(n){if(this.closed)throw new v;if(!this.isStopped){const{observers:r}=this,i=r.length,o=r.slice();for(let a=0;a<i;a++)o[a].next(n)}}error(n){if(this.closed)throw new v;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,i=r.length,o=r.slice();for(let a=0;a<i;a++)o[a].error(n);this.observers.length=0}complete(){if(this.closed)throw new v;this.isStopped=!0;const{observers:n}=this,r=n.length,i=n.slice();for(let o=0;o<r;o++)i[o].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new v;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new v;return this.hasError?(n.error(this.thrownError),Z.EMPTY):this.isStopped?(n.complete(),Z.EMPTY):(this.observers.push(n),new D(this,n))}asObservable(){const n=new _e;return n.source=this,n}}return t.create=(e,n)=>new N(e,n),t})();class N extends A{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):Z.EMPTY}}function T(t){return t&&"function"==typeof t.schedule}function O(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new z(t,e))}}class z{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new Ie(e,this.project,this.thisArg))}}class Ie extends X{constructor(e,n,r){super(e),this.project=n,this.count=0,this.thisArg=r||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const U=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},Q="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",kn=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function In(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const Ln=t=>{if(t&&"function"==typeof t[dt])return(t=>e=>{const n=t[dt]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(kn(t))return U(t);if(In(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,fe),e))(t);if(t&&"function"==typeof t[Q])return(t=>e=>{const n=t[Q]();for(;;){let r;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${bt(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function yr(t,e){return new _e(n=>{const r=new Z;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function je(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[dt]}(t))return function(t,e){return new _e(n=>{const r=new Z;return r.add(e.schedule(()=>{const i=t[dt]();r.add(i.subscribe({next(o){r.add(e.schedule(()=>n.next(o)))},error(o){r.add(e.schedule(()=>n.error(o)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(In(t))return function(t,e){return new _e(n=>{const r=new Z;return r.add(e.schedule(()=>t.then(i=>{r.add(e.schedule(()=>{n.next(i),r.add(e.schedule(()=>n.complete()))}))},i=>{r.add(e.schedule(()=>n.error(i)))}))),r})}(t,e);if(kn(t))return yr(t,e);if(function(t){return t&&"function"==typeof t[Q]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new _e(n=>{const r=new Z;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[Q](),r.add(e.schedule(function(){if(n.closed)return;let o,a;try{const l=i.next();o=l.value,a=l.done}catch(l){return void n.error(l)}a?n.complete():(n.next(o),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof _e?t:new _e(Ln(t))}class vt extends X{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class pn extends X{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function on(t,e){if(e.closed)return;if(t instanceof _e)return t.subscribe(e);let n;try{n=Ln(t)(e)}catch(r){e.error(r)}return n}function Et(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(Et((i,o)=>je(t(i,o)).pipe(O((a,l)=>e(i,a,o,l))),n)):("number"==typeof e&&(n=e),r=>r.lift(new Xi(t,n)))}class Xi{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new Js(e,this.project,this.concurrent))}}class Js extends pn{constructor(e,n,r=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(n)}_innerSub(e){const n=new vt(this),r=this.destination;r.add(n);const i=on(e,n);i!==n&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function jr(t=Number.POSITIVE_INFINITY){return Et(ft,t)}function to(t,e){return e?yr(t,e):new _e(U(t))}function k(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return T(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof _e?t[0]:jr(e)(to(t,n))}function x(){return function(e){return e.lift(new V(e))}}class V{constructor(e){this.connectable=e}call(e,n){const{connectable:r}=this;r._refCount++;const i=new H(e,r),o=n.subscribe(i);return i.closed||(i.connection=r.connect()),o}}class H extends X{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class L extends _e{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new Z,e.add(this.source.subscribe(new Pe(this.getSubject(),this))),e.closed&&(this._connection=null,e=Z.EMPTY)),e}refCount(){return x()(this)}}const ce=(()=>{const t=L.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Pe extends b{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function st(t,e){return function(r){let i;if(i="function"==typeof t?t:function(){return t},"function"==typeof e)return r.lift(new Yt(i,e));const o=Object.create(r,ce);return o.source=r,o.subjectFactory=i,o}}class Yt{constructor(e,n){this.subjectFactory=e,this.selector=n}call(e,n){const{selector:r}=this,i=this.subjectFactory(),o=r(i).subscribe(e);return o.add(n.subscribe(i)),o}}function Ht(){return new A}function Nt(){return t=>x()(st(Ht)(t))}function $e(t){for(let e in t)if(t[e]===$e)return e;throw Error("Could not find renamed property on target object.")}function be(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(be).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Fo(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Xc=$e({__forward_ref__:$e});function ko(t){return t.__forward_ref__=ko,t.toString=function(){return be(this())},t}function ge(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(Xc)&&t.__forward_ref__===ko}(t)?t():t}class er extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function we(t){return"string"==typeof t?t:null==t?"":String(t)}function Kt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():we(t)}function ro(t,e){const n=e?` in ${e}`:"";throw new er("201",`No provider for ${Kt(t)} found${n}`)}function sn(t,e){null==t&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Re(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function he(t){return{providers:t.providers||[],imports:t.imports||[]}}function vr(t){return Ai(t,Ni)||Ai(t,Br)}function Ai(t,e){return t.hasOwnProperty(e)?t[e]:null}function ku(t){return t&&(t.hasOwnProperty(oo)||t.hasOwnProperty(Lu))?t[oo]:null}const Ni=$e({\u0275prov:$e}),oo=$e({\u0275inj:$e}),Br=$e({ngInjectableDef:$e}),Lu=$e({ngInjectorDef:$e});var ve=(()=>((ve=ve||{})[ve.Default=0]="Default",ve[ve.Host=1]="Host",ve[ve.Self=2]="Self",ve[ve.SkipSelf=4]="SkipSelf",ve[ve.Optional=8]="Optional",ve))();let jo;function nr(t){const e=jo;return jo=t,e}function so(t,e,n){const r=vr(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ve.Optional?null:void 0!==e?e:void ro(be(t),"Injector")}function Hr(t){return{toString:t}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),Vt=(()=>((Vt=Vt||{})[Vt.Emulated=0]="Emulated",Vt[Vt.None=2]="None",Vt[Vt.ShadowDom=3]="ShadowDom",Vt))();const ju="undefined"!=typeof globalThis&&globalThis,na="undefined"!=typeof window&&window,ra="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ia="undefined"!=typeof global&&global,Ue=ju||ia||na||ra,Wr={},ut=[],an=$e({\u0275cmp:$e}),Uo=$e({\u0275dir:$e}),Mi=$e({\u0275pipe:$e}),Bo=$e({\u0275mod:$e}),Er=$e({\u0275loc:$e}),rr=$e({\u0275fac:$e}),Ve=$e({__NG_ELEMENT_ID__:$e});let oa=0;function Ho(t){return Hr(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||ut,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Vt.Emulated,id:"c",styles:t.styles||ut,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,o=t.features,a=t.pipes;return r.id+=oa++,r.inputs=Bu(t.inputs,n),r.outputs=Bu(t.outputs),o&&o.forEach(l=>l(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(sa):null,r.pipeDefs=a?()=>("function"==typeof a?a():a).map($o):null,r})}function sa(t){return un(t)||function(t){return t[Uo]||null}(t)}function $o(t){return function(t){return t[Mi]||null}(t)}const Uu={};function jn(t){return Hr(()=>{const e={type:t.type,bootstrap:t.bootstrap||ut,declarations:t.declarations||ut,imports:t.imports||ut,exports:t.exports||ut,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Uu[t.id]=t.type),e})}function Bu(t,e){if(null==t)return Wr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const jt=Ho;function gn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function un(t){return t[an]||null}function Un(t,e){const n=t[Bo]||null;if(!n&&!0===e)throw new Error(`Type ${be(t)} does not have '\u0275mod' property.`);return n}function ir(t){return Array.isArray(t)&&"object"==typeof t[1]}function Tn(t){return Array.isArray(t)&&!0===t[1]}function ua(t){return 0!=(8&t.flags)}function Oi(t){return 2==(2&t.flags)}function qo(t){return 1==(1&t.flags)}function Gn(t){return null!==t.template}function hd(t){return 0!=(512&t[2])}function fi(t,e){return t.hasOwnProperty(rr)?t[rr]:null}class Wu{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Qu(t){return t.type.prototype.ngOnChanges&&(t.setInput=bd),pi}function pi(){const t=Ut(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Wr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function bd(t,e,n,r){const i=Ut(t)||function(t,e){return t[ca]=e}(t,{previous:Wr,current:null}),o=i.current||(i.current={}),a=i.previous,l=this.declaredInputs[n],f=a[l];o[l]=new Wu(f&&f.currentValue,e,a===Wr),t[r]=e}const ca="__ngSimpleChanges__";function Ut(t){return t[ca]||null}let Rt;function St(t){return!!t.listen}const ho={createRenderer:(t,e)=>void 0!==Rt?Rt:"undefined"!=typeof document?document:void 0};function Ft(t){for(;Array.isArray(t);)t=t[0];return t}function $n(t,e){return Ft(e[t.index])}function Rn(t,e){const n=e[t];return ir(n)?n:n[0]}function ga(t){return 128==(128&t[2])}function qr(t,e){return null==e?null:t[e]}function Ku(t){t[18]=0}function ma(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ne={lFrame:qg(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function c(){return Ne.bindingsEnabled}function d(){return Ne.lFrame.lView}function h(){return Ne.lFrame.tView}function y(){let t=E();for(;null!==t&&64===t.type;)t=t.parent;return t}function E(){return Ne.lFrame.currentTNode}function S(t,e){const n=Ne.lFrame;n.currentTNode=t,n.isParent=e}function P(){return Ne.lFrame.isParent}function te(){return Ne.isInCheckNoChangesMode}function se(t){Ne.isInCheckNoChangesMode=t}function Nd(t,e){const n=Ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,Md(e)}function Md(t){Ne.lFrame.currentDirectiveIndex=t}function Pd(t){Ne.lFrame.currentQueryIndex=t}function yD(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Wg(t,e,n){if(n&ve.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&ve.Host||(i=yD(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,t=o}const r=Ne.lFrame=Qg();return r.currentTNode=e,r.lView=t,!0}function Xu(t){const e=Qg(),n=t[1];Ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Qg(){const t=Ne.lFrame,e=null===t?null:t.child;return null===e?qg(t):e}function qg(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Gg(){const t=Ne.lFrame;return Ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const zg=Gg;function el(){const t=Gg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function An(){return Ne.lFrame.selectedIndex}function ki(t){Ne.lFrame.selectedIndex=t}function tl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:f,ngAfterViewChecked:p,ngOnDestroy:m}=o;a&&(t.contentHooks||(t.contentHooks=[])).push(-n,a),l&&((t.contentHooks||(t.contentHooks=[])).push(n,l),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,l)),f&&(t.viewHooks||(t.viewHooks=[])).push(-n,f),p&&((t.viewHooks||(t.viewHooks=[])).push(n,p),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,p)),null!=m&&(t.destroyHooks||(t.destroyHooks=[])).push(n,m)}}function nl(t,e,n){Yg(t,e,3,n)}function rl(t,e,n,r){(3&t[2])===n&&Yg(t,e,n,r)}function Od(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Yg(t,e,n,r){const o=null!=r?r:-1,a=e.length-1;let l=0;for(let f=void 0!==r?65535&t[18]:0;f<a;f++)if("number"==typeof e[f+1]){if(l=e[f],null!=r&&l>=r)break}else e[f]<0&&(t[18]+=65536),(l<o||-1==o)&&(ID(t,n,e,f),t[18]=(4294901760&t[18])+f+2),f++}function ID(t,e,n,r){const i=n[r]<0,o=n[r+1],l=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(l)}finally{}}}else try{o.call(l)}finally{}}class ya{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function il(t,e,n){const r=St(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const a=n[i++],l=n[i++],f=n[i++];r?t.setAttribute(e,l,f,a):e.setAttributeNS(a,l,f)}else{const a=o,l=n[++i];kd(a)?r&&t.setProperty(e,a,l):r?t.setAttribute(e,a,l):e.setAttribute(a,l),i++}}return i}function Kg(t){return 3===t||4===t||6===t}function kd(t){return 64===t.charCodeAt(0)}function ol(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Zg(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Zg(t,e,n,r,i){let o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){const l=t[o++];if("number"==typeof l){if(l===e){a=-1;break}if(l>e){a=o-1;break}}}for(;o<t.length;){const l=t[o];if("number"==typeof l)break;if(l===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Jg(t){return-1!==t}function Jo(t){return 32767&t}function Xo(t,e){let n=function(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let Ld=!0;function sl(t){const e=Ld;return Ld=t,e}let xD=0;function va(t,e){const n=jd(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Vd(r.data,t),Vd(e,null),Vd(r.blueprint,null));const i=al(t,e),o=t.injectorIndex;if(Jg(i)){const a=Jo(i),l=Xo(i,e),f=l[1].data;for(let p=0;p<8;p++)e[o+p]=l[a+p]|f[a+p]}return e[o+8]=i,o}function Vd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jd(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function al(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const o=i[1],a=o.type;if(r=2===a?o.declTNode:1===a?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function ul(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ve)&&(r=n[Ve]),null==r&&(r=n[Ve]=xD++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function tm(t,e,n){if(n&ve.Optional)return t;ro(e,"NodeInjector")}function nm(t,e,n,r){if(n&ve.Optional&&void 0===r&&(r=null),0==(n&(ve.Self|ve.Host))){const i=t[9],o=nr(void 0);try{return i?i.get(e,r,n&ve.Optional):so(e,r,n&ve.Optional)}finally{nr(o)}}return tm(r,e,n)}function rm(t,e,n,r=ve.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Ve)?t[Ve]:void 0;return"number"==typeof e?e>=0?255&e:FD:e}(n);if("function"==typeof o){if(!Wg(e,t,r))return r&ve.Host?tm(i,n,r):nm(e,n,r,i);try{const a=o(r);if(null!=a||r&ve.Optional)return a;ro(n)}finally{zg()}}else if("number"==typeof o){let a=null,l=jd(t,e),f=-1,p=r&ve.Host?e[16][6]:null;for((-1===l||r&ve.SkipSelf)&&(f=-1===l?al(t,e):e[l+8],-1!==f&&sm(r,!1)?(a=e[1],l=Jo(f),e=Xo(f,e)):l=-1);-1!==l;){const m=e[1];if(om(o,l,m.data)){const _=kD(l,e,n,a,r,p);if(_!==im)return _}f=e[l+8],-1!==f&&sm(r,e[1].data[l+8]===p)&&om(o,l,e)?(a=m,l=Jo(f),e=Xo(f,e)):l=-1}}}return nm(e,n,r,i)}const im={};function FD(){return new es(y(),d())}function kD(t,e,n,r,i,o){const a=e[1],l=a.data[t+8],m=function(t,e,n,r,i){const o=t.providerIndexes,a=e.data,l=1048575&o,f=t.directiveStart,m=o>>20,C=i?l+m:t.directiveEnd;for(let R=r?l:l+m;R<C;R++){const M=a[R];if(R<f&&n===M||R>=f&&M.type===n)return R}if(i){const R=a[f];if(R&&Gn(R)&&R.type===n)return f}return null}(l,a,n,null==r?Oi(l)&&Ld:r!=a&&0!=(3&l.type),i&ve.Host&&o===l);return null!==m?Ea(e,a,m,l):im}function Ea(t,e,n,r){let i=t[n];const o=e.data;if(function(t){return t instanceof ya}(i)){const a=i;a.resolving&&function(t,e){throw new er("200",`Circular dependency in DI detected for ${t}`)}(Kt(o[n]));const l=sl(a.canSeeViewProviders);a.resolving=!0;const f=a.injectImpl?nr(a.injectImpl):null;Wg(t,r,ve.Default);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const a=Qu(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==f&&nr(f),sl(l),a.resolving=!1,zg()}}return i}function om(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function sm(t,e){return!(t&ve.Self||t&ve.Host&&e)}class es{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return rm(this._tNode,this._lView,e,void 0,n)}}const ns="__parameters__";function po(t,e,n){return Hr(()=>{const r=function(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const a=new i(...o);return l.annotation=a,l;function l(f,p,m){const _=f.hasOwnProperty(ns)?f[ns]:Object.defineProperty(f,ns,{value:[]})[ns];for(;_.length<=m;)_.push(null);return(_[m]=_[m]||[]).push(a),f}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class et{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const BD=new et("AnalyzeForEntryComponents"),cl=Function;function Gr(t,e){t.forEach(n=>Array.isArray(n)?Gr(n,e):e(n))}function fl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function go(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Sa={},Wd="__NG_DI_FLAG__",os="ngTempTokenPath",ZD=/\n/gm,Qd="__source",qd=$e({provide:String,useValue:$e});let Ia;function ss(t){const e=Ia;return Ia=t,e}function XD(t,e=ve.Default){if(void 0===Ia)throw new Error("inject() must be called from an injection context");return null===Ia?so(t,void 0,e):Ia.get(t,e&ve.Optional?null:void 0,e)}function Y(t,e=ve.Default){return(jo||XD)(ge(t),e)}function mo(t){const e=[];for(let n=0;n<t.length;n++){const r=ge(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,o=ve.Default;for(let a=0;a<r.length;a++){const l=r[a],f=e0(l);"number"==typeof f?-1===f?i=l.token:o|=f:i=l}e.push(Y(i,o))}else e.push(Y(r))}return e}function Ta(t,e){return t[Wd]=e,t.prototype[Wd]=e,t}function e0(t){return t[Wd]}function fm(t,e,n,r){const i=t[os];throw e[Qd]&&i.unshift(e[Qd]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=be(e);if(Array.isArray(e))i=e.map(be).join(" -> ");else if("object"==typeof e){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let l=e[a];o.push(a+":"+("string"==typeof l?JSON.stringify(l):be(l)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ZD,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[os]=null,t}const as=Ta(po("Inject",t=>({token:t})),-1),Nn=Ta(po("Optional"),8),ji=Ta(po("SkipSelf"),4),Mm="__ngContext__";function bn(t,e){t[Mm]=e}function nf(t){const e=function(t){return t[Mm]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function vl(t){return t.ngOriginalError}function G0(t,...e){t.error(...e)}class _o{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=this._findContext(e),i=function(t){return t&&t.ngErrorLogger||G0}(e);i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(vl(e)):null}_findOriginalError(e){let n=e&&vl(e);for(;n&&vl(n);)n=vl(n);return n||null}}const Um=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ue))();function Kr(t){return t instanceof Function?t():t}var Kn=(()=>((Kn=Kn||{})[Kn.Important=1]="Important",Kn[Kn.DashCase=2]="DashCase",Kn))();function sf(t,e){return undefined(t,e)}function Pa(t){const e=t[3];return Tn(e)?e[3]:e}function af(t){return Qm(t[13])}function uf(t){return Qm(t[4])}function Qm(t){for(;null!==t&&!Tn(t);)t=t[4];return t}function ds(t,e,n,r,i){if(null!=r){let o,a=!1;Tn(r)?o=r:ir(r)&&(a=!0,r=r[0]);const l=Ft(r);0===t&&null!==n?null==i?Zm(e,n,l):vo(e,n,l,i||null,!0):1===t&&null!==n?vo(e,n,l,i||null,!0):2===t?function(t,e,n){const r=Cl(t,e);r&&function(t,e,n,r){St(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,l,a):3===t&&e.destroyNode(l),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Ft(n)&&ds(e,t,r,o,i);for(let l=10;l<n.length;l++){const f=n[l];Oa(f[1],f,t,e,r,o)}}(e,t,o,n,i)}}function cf(t,e,n){return St(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Gm(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,ma(i,-1)),n.splice(r,1)}function df(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Gm(i,r),e>0&&(t[n-1][4]=r[4]);const o=go(t,10+e);!function(t,e){Oa(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function zm(t,e){if(!(256&e[2])){const n=e[11];St(n)&&n.destroyNode&&Oa(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return ff(t[1],t);for(;e;){let n=null;if(ir(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)ir(e)&&ff(e[1],e),e=e[3];null===e&&(e=t),ir(e)&&ff(e[1],e),n=e&&e[4]}e=n}}(e)}}function ff(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof ya)){const o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){const l=i[o[a]],f=o[a+1];try{f.call(l)}finally{}}else try{o.call(i)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const a=n[o+1],l="function"==typeof a?a(e):Ft(e[a]),f=r[i=n[o+2]],p=n[o+3];"boolean"==typeof p?l.removeEventListener(n[o],f,p):p>=0?r[i=p]():r[i=-p].unsubscribe(),o+=2}else{const a=r[i=n[o+1]];n[o].call(a)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();e[7]=null}}(t,e),1===e[1].type&&St(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Tn(e[3])){n!==e[3]&&Gm(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ym(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===Vt.None||i===Vt.Emulated)return null}return $n(r,n)}(t,e.parent,n)}function vo(t,e,n,r,i){St(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Zm(t,e,n){St(t)?t.appendChild(e,n):e.appendChild(n)}function Jm(t,e,n,r,i){null!==r?vo(t,e,n,r,i):Zm(t,e,n)}function Cl(t,e){return St(t)?t.parentNode(e):e.parentNode}let ty=function(t,e,n){return 40&t.type?$n(t,n):null};function bl(t,e,n,r){const i=Ym(t,r,e),o=e[11],l=function(t,e,n){return ty(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let f=0;f<n.length;f++)Jm(o,i,n[f],l,!1);else Jm(o,i,n,l,!1)}function wl(t,e){if(null!==e){const n=e.type;if(3&n)return $n(e,t);if(4&n)return pf(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return wl(t,r);{const i=t[e.index];return Tn(i)?pf(-1,i):Ft(i)}}if(32&n)return sf(e,t)()||Ft(t[e.index]);{const r=ry(t,e);return null!==r?Array.isArray(r)?r[0]:wl(Pa(t[16]),r):wl(t,e.next)}}return null}function ry(t,e){return null!==e?t[16][6].projection[e.projection]:null}function pf(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return wl(r,i)}return e[7]}function gf(t,e,n,r,i,o,a){for(;null!=n;){const l=r[n.index],f=n.type;if(a&&0===e&&(l&&bn(Ft(l),r),n.flags|=4),64!=(64&n.flags))if(8&f)gf(t,e,n.child,r,i,o,!1),ds(e,t,i,l,o);else if(32&f){const p=sf(n,r);let m;for(;m=p();)ds(e,t,i,m,o);ds(e,t,i,l,o)}else 16&f?oy(t,e,r,n,i,o):ds(e,t,i,l,o);n=a?n.projectionNext:n.next}}function Oa(t,e,n,r,i,o){gf(n,r,t.firstChild,e,i,o,!1)}function oy(t,e,n,r,i,o){const a=n[16],f=a[6].projection[r.projection];if(Array.isArray(f))for(let p=0;p<f.length;p++)ds(e,t,i,f[p],o);else gf(t,e,f,a[3],i,o,!0)}function sy(t,e,n){St(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function mf(t,e,n){St(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ay(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const uy="ng-template";function vS(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ay(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ly(t){return 4===t.type&&t.value!==uy}function ES(t,e,n){return e===(4!==t.type||n?t.value:uy)}function CS(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Kg(t[e]))return e;return t.length}(i);let a=!1;for(let l=0;l<e.length;l++){const f=e[l];if("number"!=typeof f){if(!a)if(4&r){if(r=2|1&r,""!==f&&!ES(t,f,n)||""===f&&1===e.length){if(br(r))return!1;a=!0}}else{const p=8&r?f:e[++l];if(8&r&&null!==t.attrs){if(!vS(t.attrs,p,n)){if(br(r))return!1;a=!0}continue}const _=bS(8&r?"class":f,i,ly(t),n);if(-1===_){if(br(r))return!1;a=!0;continue}if(""!==p){let C;C=_>o?"":i[_+1].toLowerCase();const R=8&r?C:null;if(R&&-1!==ay(R,p,0)||2&r&&p!==C){if(br(r))return!1;a=!0}}}}else{if(!a&&!br(r)&&!br(f))return!1;if(a&&br(f))continue;a=!1,r=f|1&r}}return br(r)||a}function br(t){return 0==(1&t)}function bS(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const a=e[i];if(a===t)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){let l=e[++i];for(;"string"==typeof l;)l=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function cy(t,e,n=!1){for(let r=0;r<e.length;r++)if(CS(t,e[r],n))return!0;return!1}function dy(t,e){return t?":not("+e.trim()+")":e}function TS(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let a=t[n];if("string"==typeof a)if(2&r){const l=t[++n];i+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!br(a)&&(e+=dy(o,i),i=""),r=a,o=o||!br(r);n++}return""!==i&&(e+=dy(o,i)),e}const ke={};function hy(t,e,n,r){if(!r)if(3==(3&e[2])){const o=t.preOrderCheckHooks;null!==o&&nl(e,o,n)}else{const o=t.preOrderHooks;null!==o&&rl(e,o,0,n)}ki(n)}function wy(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const a=t.data[o];Pd(i),a.contentQueries(2,e[o],o)}}}function Fa(t,e,n,r,i,o,a,l,f,p){const m=e.blueprint.slice();return m[0]=i,m[2]=140|r,Ku(m),m[3]=m[15]=t,m[8]=n,m[10]=a||t&&t[10],m[11]=l||t&&t[11],m[12]=f||t&&t[12]||null,m[9]=p||t&&t[9]||null,m[6]=o,m[16]=2==e.type?t[16]:m,m}function fs(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=E(),a=P(),f=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=f),null!==o&&(a?null==o.child&&null!==f.parent&&(o.child=f):null===o.next&&(o.next=f)),f}(t,e,n,r,i),Ne.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const a=function(){const t=Ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===a?-1:a.injectorIndex}return S(o,!0),o}function hs(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ka(t,e,n){Xu(e);try{const r=t.viewQuery;null!==r&&Ff(1,r,n);const i=t.template;null!==i&&Dy(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wy(t,e),t.staticViewQueries&&Ff(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)sI(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,el()}}function ps(t,e,n,r){const i=e[2];if(256==(256&i))return;Xu(e);const o=te();try{Ku(e),function(t){Ne.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Dy(t,e,n,2,r);const a=3==(3&i);if(!o)if(a){const p=t.preOrderCheckHooks;null!==p&&nl(e,p,null)}else{const p=t.preOrderHooks;null!==p&&rl(e,p,0,null),Od(e,0)}if(function(t){for(let e=af(t);null!==e;e=uf(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(1024&i[2])&&ma(o,1),i[2]|=1024}}}(e),function(t){for(let e=af(t);null!==e;e=uf(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];ga(r)&&ps(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&wy(t,e),!o)if(a){const p=t.contentCheckHooks;null!==p&&nl(e,p)}else{const p=t.contentHooks;null!==p&&rl(e,p,1),Od(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)ki(~i);else{const o=i,a=n[++r],l=n[++r];Nd(a,o),l(2,e[o])}}}finally{ki(-1)}}(t,e);const l=t.components;null!==l&&function(t,e){for(let n=0;n<e.length;n++)oI(t,e[n])}(e,l);const f=t.viewQuery;if(null!==f&&Ff(2,f,r),!o)if(a){const p=t.viewCheckHooks;null!==p&&nl(e,p)}else{const p=t.viewHooks;null!==p&&rl(e,p,2),Od(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ma(e[3],-1))}finally{el()}}function US(t,e,n,r){const i=e[10],o=!te(),a=function(t){return 4==(4&t[2])}(e);try{o&&!a&&i.begin&&i.begin(),a&&ka(t,e,r),ps(t,e,n,r)}finally{o&&!a&&i.end&&i.end()}}function Dy(t,e,n,r,i){const o=An(),a=2&r;try{ki(-1),a&&e.length>20&&hy(t,e,20,te()),n(r,i)}finally{ki(o)}}function Iy(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Tl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Tl(t,e,n,r,i,o,a,l,f,p){const m=20+r,_=m+i,C=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ke);return n}(m,_),R="function"==typeof p?p():p;return C[1]={type:t,blueprint:C,template:n,queries:null,viewQuery:l,declTNode:e,data:C.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:f,consts:R,incompleteFirstPass:!1}}function Ny(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function xy(t,e,n,r,i,o){const a=o.hostBindings;if(a){let l=t.hostBindingOpCodes;null===l&&(l=t.hostBindingOpCodes=[]);const f=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(l)!=f&&l.push(f),l.push(r,i,a)}}function Py(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Oy(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function XS(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Gn(e)&&(n[""]=t)}}function Fy(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ky(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=fi(i.type)),a=new ya(o,Gn(i),null);t.blueprint[r]=a,n[r]=a,xy(t,e,0,r,hs(t,n,i.hostVars,ke),i)}function eI(t,e,n){const r=$n(e,t),i=Iy(n),o=t[10],a=Rl(t,Fa(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=a}function tI(t,e,n,r,i,o){const a=o[e];if(null!==a){const l=r.setInput;for(let f=0;f<a.length;){const p=a[f++],m=a[f++],_=a[f++];null!==l?r.setInput(n,_,p,m):n[m]=_}}}function nI(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function oI(t,e){const n=Rn(e,t);if(ga(n)){const r=n[1];80&n[2]?ps(r,n,r.template,n[8]):n[5]>0&&Mf(n)}}function Mf(t){for(let r=af(t);null!==r;r=uf(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const a=o[1];ps(a,o,a.template,o[8])}else o[5]>0&&Mf(o)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Rn(n[r],t);ga(i)&&i[5]>0&&Mf(i)}}function sI(t,e){const n=Rn(e,t),r=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),ka(r,n,n[8])}function Rl(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function xf(t){for(;t;){t[2]|=64;const e=Pa(t);if(hd(t)&&!e)return t;t=e}return null}function Of(t,e,n){const r=e[10];r.begin&&r.begin();try{ps(t,e,t.template,n)}catch(i){throw Hy(e,i),i}finally{r.end&&r.end()}}function Vy(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=nf(n),i=r[1];US(i,r,i.template,n)}}(t[8])}function Ff(t,e,n){Pd(0),e(t,n)}const dI=(()=>Promise.resolve(null))();function jy(t){return t[7]||(t[7]=[])}function Uy(t){return t.cleanup||(t.cleanup=[])}function Hy(t,e){const n=t[9],r=n?n.get(_o,null):null;r&&r.handleError(e)}function _i(t,e,n){const r=function(t,e){return Ft(e[t])}(e,t);!function(t,e,n){St(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Al(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let a=0;a<e.length;a++){const l=e[a];"number"==typeof l?o=l:1==o?i=Fo(i,l):2==o&&(r=Fo(r,l+": "+e[++a]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const gs=new et("INJECTOR",-1);class Wy{get(e,n=Sa){if(n===Sa){const r=new Error(`NullInjectorError: No provider for ${be(e)}!`);throw r.name="NullInjectorError",r}return n}}const La=new et("Set Injector scope."),Va={},pI={};let kf;function Qy(){return void 0===kf&&(kf=new Wy),kf}function qy(t,e=null,n=null,r){return new mI(t,n,e||Qy(),r)}class mI{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&Gr(n,l=>this.processProvider(l,e,n)),Gr([e],l=>this.processInjectorType(l,[],o)),this.records.set(gs,ms(void 0,this));const a=this.records.get(La);this.scope=null!=a?a.value:null,this.source=i||("object"==typeof e?null:be(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=Sa,r=ve.Default){this.assertNotDestroyed();const i=ss(this),o=nr(void 0);try{if(!(r&ve.SkipSelf)){let l=this.records.get(e);if(void 0===l){const f=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof et}(e)&&vr(e);l=f&&this.injectableDefInScope(f)?ms(Lf(e),Va):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&ve.Self?Qy():this.parent).get(e,n=r&ve.Optional&&n===Sa?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[os]=a[os]||[]).unshift(be(e)),i)throw a;return fm(a,e,"R3InjectorError",this.source)}throw a}finally{nr(o),ss(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(be(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,r){if(!(e=ge(e)))return!1;let i=ku(e);const o=null==i&&e.ngModule||void 0,a=void 0===o?e:o,l=-1!==r.indexOf(a);if(void 0!==o&&(i=ku(o)),null==i)return!1;if(null!=i.imports&&!l){let m;r.push(a);try{Gr(i.imports,_=>{this.processInjectorType(_,n,r)&&(void 0===m&&(m=[]),m.push(_))})}finally{}if(void 0!==m)for(let _=0;_<m.length;_++){const{ngModule:C,providers:R}=m[_];Gr(R,M=>this.processProvider(M,C,R||ut))}}this.injectorDefTypes.add(a);const f=fi(a)||(()=>new a);this.records.set(a,ms(f,Va));const p=i.providers;if(null!=p&&!l){const m=e;Gr(p,_=>this.processProvider(_,m,p))}return void 0!==o&&void 0!==e.providers}processProvider(e,n,r){let i=ys(e=ge(e))?e:ge(e&&e.provide);const o=function(t,e,n){return zy(t)?ms(void 0,t.useValue):ms(function(t,e,n){let r;if(ys(t)){const i=ge(t);return fi(i)||Lf(i)}if(zy(t))r=()=>ge(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...mo(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Y(ge(t.useExisting));else{const i=ge(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return fi(i)||Lf(i);r=()=>new i(...mo(t.deps))}return r}(t),Va)}(e);if(ys(e)||!0!==e.multi)this.records.get(i);else{let a=this.records.get(i);a||(a=ms(void 0,Va,!0),a.factory=()=>mo(a.multi),this.records.set(i,a)),i=e,a.multi.push(e)}this.records.set(i,o)}hydrate(e,n){return n.value===Va&&(n.value=pI,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ge(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Lf(t){const e=vr(t),n=null!==e?e.factory:fi(t);if(null!==n)return n;if(t instanceof et)throw new Error(`Token ${be(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=function(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${be(t)}: (${r.join(", ")}).`)}const n=function(t){const e=t&&(t[Ni]||t[Br]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ms(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function zy(t){return null!==t&&"object"==typeof t&&qd in t}function ys(t){return"function"==typeof t}const Yy=function(t,e,n){return function(t,e=null,n=null,r){const i=qy(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class it{static create(e,n){return Array.isArray(e)?Yy(e,n,""):Yy(e.providers,e.parent,e.name||"")}}function LI(t,e){tl(nf(t)[1],y())}it.THROW_IF_NOT_FOUND=Sa,it.NULL=new Wy,it.\u0275prov=Re({token:it,providedIn:"any",factory:()=>Y(gs)}),it.__NG_ELEMENT_ID__=-1;let Nl=null;function _s(){if(!Nl){const t=Ue.Symbol;if(t&&t.iterator)Nl=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Nl=r)}}}return Nl}class Sr{constructor(e){this.wrapped=e}static wrap(e){return new Sr(e)}static unwrap(e){return Sr.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Sr}}function Ua(t){return!!Wf(t)&&(Array.isArray(t)||!(t instanceof Map)&&_s()in t)}function Wf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Es(t,e,n,r){return wn(t,Ne.lFrame.bindingIndex++,n)?e+we(n)+r:ke}function Ee(t,e=ve.Default){const n=d();return null===n?Y(t,e):rm(y(),n,ge(t),e)}function Kf(t,e,n,r,i){const a=i?"class":"style";!function(t,e,n,r,i){for(let o=0;o<n.length;){const a=n[o++],l=n[o++],f=e[a],p=t.data[a];null!==p.setInput?p.setInput(f,i,r,l):f[l]=i}}(t,n,e.inputs[a],a,r)}function Zf(t,e,n,r){const i=d(),o=h(),a=20+t,l=i[11],f=i[a]=cf(l,e,Ne.lFrame.currentNamespace),p=o.firstCreatePass?function(t,e,n,r,i,o,a){const l=e.consts,p=fs(e,t,2,i,qr(l,o));return function(t,e,n,r){let i=!1;if(c()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const a=r[o];cy(n,a.selectors,!1)&&(i||(i=[]),ul(va(n,e),t,a.type),Gn(a)?(Oy(t,n),i.unshift(a)):i.push(a))}return i}(t,e,n),a=null===r?null:{"":-1};if(null!==o){i=!0,Fy(n,t.data.length,o.length);for(let m=0;m<o.length;m++){const _=o[m];_.providersResolver&&_.providersResolver(_)}let l=!1,f=!1,p=hs(t,e,o.length,null);for(let m=0;m<o.length;m++){const _=o[m];n.mergedAttrs=ol(n.mergedAttrs,_.hostAttrs),ky(t,n,e,p,_),XS(p,_,a),null!==_.contentQueries&&(n.flags|=8),(null!==_.hostBindings||null!==_.hostAttrs||0!==_.hostVars)&&(n.flags|=128);const C=_.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),l=!0),!f&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),f=!0),p++}!function(t,e){const r=e.directiveEnd,i=t.data,o=e.attrs,a=[];let l=null,f=null;for(let p=e.directiveStart;p<r;p++){const m=i[p],_=m.inputs,C=null===o||ly(e)?null:nI(_,o);a.push(C),l=Ny(_,p,l),f=Ny(m.outputs,p,f)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=16),l.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=a,e.inputs=l,e.outputs=f}(t,n)}a&&function(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new er("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],o)}}}(n,r,a)}n.mergedAttrs=ol(n.mergedAttrs,n.attrs)}(e,n,p,qr(l,a)),null!==p.attrs&&Al(p,p.attrs,!1),null!==p.mergedAttrs&&Al(p,p.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,p),p}(a,o,i,0,e,n,r):o.data[a];S(p,!0);const m=p.mergedAttrs;null!==m&&il(l,f,m);const _=p.classes;null!==_&&mf(l,f,_);const C=p.styles;null!==C&&sy(l,f,C),64!=(64&p.flags)&&bl(o,i,f,p),0===Ne.lFrame.elementDepthCount&&bn(f,i),Ne.lFrame.elementDepthCount++,qo(p)&&(function(t,e,n){!c()||(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||va(n,e),bn(r,e);const a=n.initialInputs;for(let l=i;l<o;l++){const f=t.data[l],p=Gn(f);p&&eI(e,n,f);const m=Ea(e,t,l,n);bn(m,e),null!==a&&tI(0,l-i,m,f,0,a),p&&(Rn(n.index,e)[8]=m)}}(t,e,n,$n(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,a=n.index,l=Ne.lFrame.currentDirectiveIndex;try{ki(a);for(let f=r;f<i;f++){const p=t.data[f],m=e[f];Md(f),(null!==p.hostBindings||0!==p.hostVars||null!==p.hostAttrs)&&Py(p,m)}}finally{ki(-1),Md(l)}}(t,e,n))}(o,i,p),function(t,e,n){if(ua(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}}(o,p,i)),null!==r&&function(t,e,n=$n){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const a=r[o+1],l=-1===a?n(e,t):t[a];t[i++]=l}}}(i,p)}function Jf(){let t=y();P()?Ne.lFrame.isParent=!1:(t=t.parent,S(t,!1));const e=t;Ne.lFrame.elementDepthCount--;const n=h();n.firstCreatePass&&(tl(n,t),ua(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Kf(n,e,d(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Kf(n,e,d(),e.stylesWithoutHost,!1)}function Ha(t,e,n,r){Zf(t,e,n,r),Jf()}function Pl(t){return!!t&&"function"==typeof t.then}function L_(t){return!!t&&"function"==typeof t.subscribe}const Xf=L_;function $a(t,e,n,r){const i=d(),o=h(),a=y();return function(t,e,n,r,i,o,a,l){const f=qo(r),m=t.firstCreatePass&&Uy(t),_=e[8],C=jy(e);let R=!0;if(3&r.type||l){const F=$n(r,e),q=l?l(F):F,$=C.length,ue=l?me=>l(Ft(me[r.index])):r.index;if(St(n)){let me=null;if(!l&&f&&(me=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const a=i[o];if(a===n&&i[o+1]===r){const l=e[7],f=i[o+2];return l.length>f?l[f]:null}"string"==typeof a&&(o+=2)}return null}(t,e,i,r.index)),null!==me)(me.__ngLastListenerFn__||me).__ngNextListenerFn__=o,me.__ngLastListenerFn__=o,R=!1;else{o=eh(r,e,_,o,!1);const Qe=n.listen(q,i,o);C.push(o,Qe),m&&m.push(i,ue,$,$+1)}}else o=eh(r,e,_,o,!0),q.addEventListener(i,o,a),C.push(o),m&&m.push(i,ue,$,a)}else o=eh(r,e,_,o,!1);const M=r.outputs;let j;if(R&&null!==M&&(j=M[i])){const F=j.length;if(F)for(let q=0;q<F;q+=2){const tn=e[j[q]][j[q+1]].subscribe(o),mr=C.length;C.push(o,tn),m&&m.push(i,r.index,mr,-(mr+1))}}}(o,i,i[11],a,t,e,!!n,r),$a}function U_(t,e,n,r){try{return!1!==n(r)}catch(i){return Hy(t,i),!1}}function eh(t,e,n,r,i){return function o(a){if(a===Function)return r;const l=2&t.flags?Rn(t.index,e):e;0==(32&e[2])&&xf(l);let f=U_(e,0,r,a),p=o.__ngNextListenerFn__;for(;p;)f=U_(e,0,p,a)&&f,p=p.__ngNextListenerFn__;return i&&!1===f&&(a.preventDefault(),a.returnValue=!1),f}}function rh(t,e=""){const n=d(),r=h(),i=t+20,o=r.firstCreatePass?fs(r,i,1,e,null):r.data[i],a=n[i]=function(t,e){return St(t)?t.createText(e):t.createTextNode(e)}(n[11],e);bl(r,n,a,o),S(o,!1)}function Fl(t,e,n){const r=d(),i=Es(r,t,e,n);return i!==ke&&_i(r,An(),i),Fl}const Co=void 0;var fR=["en",[["a","p"],["AM","PM"],Co],[["AM","PM"],Co,Co],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Co,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Co,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Co,"{1} 'at' {0}",Co],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ns={};function Mv(t){return t in Ns||(Ns[t]=Ue.ng&&Ue.ng.common&&Ue.ng.common.locales&&Ue.ng.common.locales[t]),Ns[t]}var ae=(()=>((ae=ae||{})[ae.LocaleId=0]="LocaleId",ae[ae.DayPeriodsFormat=1]="DayPeriodsFormat",ae[ae.DayPeriodsStandalone=2]="DayPeriodsStandalone",ae[ae.DaysFormat=3]="DaysFormat",ae[ae.DaysStandalone=4]="DaysStandalone",ae[ae.MonthsFormat=5]="MonthsFormat",ae[ae.MonthsStandalone=6]="MonthsStandalone",ae[ae.Eras=7]="Eras",ae[ae.FirstDayOfWeek=8]="FirstDayOfWeek",ae[ae.WeekendRange=9]="WeekendRange",ae[ae.DateFormat=10]="DateFormat",ae[ae.TimeFormat=11]="TimeFormat",ae[ae.DateTimeFormat=12]="DateTimeFormat",ae[ae.NumberSymbols=13]="NumberSymbols",ae[ae.NumberFormats=14]="NumberFormats",ae[ae.CurrencyCode=15]="CurrencyCode",ae[ae.CurrencySymbol=16]="CurrencySymbol",ae[ae.CurrencyName=17]="CurrencyName",ae[ae.Currencies=18]="Currencies",ae[ae.Directionality=19]="Directionality",ae[ae.PluralCase=20]="PluralCase",ae[ae.ExtraData=21]="ExtraData",ae))();const kl="en-US";let xv=kl;function oh(t){sn(t,"Expected localeId to be defined"),"string"==typeof t&&(xv=t.toLowerCase().replace(/_/g,"-"))}class rE{}const oE="ngComponent";class hA{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${be(t)}. Did you add it to @NgModule.entryComponents?`);return e[oE]=t,e}(e)}}class Hi{}function Bl(...t){}function xs(t,e){return new Jn($n(t,e))}Hi.NULL=new hA;const mA=function(){return xs(y(),d())};let Jn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=mA,t})();class Hl{}let hh=(()=>{class t{}return t.\u0275prov=Re({token:t,providedIn:"root",factory:()=>null}),t})();class Ya{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ph=new Ya("12.2.5");class aE{constructor(){}supports(e){return Ua(e)}create(e){return new bA(e)}}const CA=(t,e)=>e;class bA{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||CA}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const a=!r||n&&n.currentIndex<lE(r,i,o)?n:r,l=lE(a,i,o),f=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(n=n._next,null==a.previousIndex)i++;else{o||(o=[]);const p=l-i,m=f-i;if(p!=m){for(let C=0;C<p;C++){const R=C<o.length?o[C]:o[C]=0,M=R+C;m<=M&&M<p&&(o[C]=R+1)}o[a.previousIndex]=m-p}}l!==f&&e(a,l,f)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Ua(e))throw new Error(`Error trying to diff '${be(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,a,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)o=e[l],a=this._trackByFn(l,o),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,o,a,l)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,a,l),r=!0),n=n._next}else i=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[_s()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,l=>{a=this._trackByFn(i,l),null!==n&&Object.is(n.trackById,a)?(r&&(n=this._verifyReinsertion(n,l,a,i)),Object.is(n.item,l)||this._addIdentityChange(n,l)):(n=this._mismatch(n,l,a,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new wA(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new uE),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uE),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class wA{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class DA{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class uE{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new DA,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lE(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class cE{constructor(){}supports(e){return e instanceof Map||Wf(e)}create(){return new SA}}class SA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||Wf(e)))throw new Error(`Error trying to diff '${be(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,n);const o=i._prev,a=i._next;return o&&(o._next=a),a&&(a._prev=o),i._next=null,i._prev=null,i}const r=new IA(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class IA{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dE(){return new Ka([new aE])}let Ka=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||dE()),deps:[[t,new ji,new Nn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=Re({token:t,providedIn:"root",factory:dE}),t})();function fE(){return new Ps([new cE])}let Ps=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||fE()),deps:[[t,new ji,new Nn]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=Re({token:t,providedIn:"root",factory:fE}),t})();function Wl(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Ft(o)),Tn(o))for(let l=10;l<o.length;l++){const f=o[l],p=f[1].firstChild;null!==p&&Wl(f[1],f,p,r)}const a=n.type;if(8&a)Wl(t,e,n.child,r);else if(32&a){const l=sf(n,e);let f;for(;f=l();)r.push(f)}else if(16&a){const l=ry(e,n);if(Array.isArray(l))r.push(...l);else{const f=Pa(e[16]);Wl(f[1],f,l,r,!0)}}n=i?n.projectionNext:n.next}return r}class Za{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Wl(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Tn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(df(e,r),go(n,r))}this._attachedToViewContainer=!1}zm(this._lView[1],this._lView)}onDestroy(e){!function(t,e,n,r){const i=jy(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Uy(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){xf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Of(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){se(!0);try{Of(t,e,n)}finally{se(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){Oa(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class RA extends Za{constructor(e){super(e),this._view=e}detectChanges(){Vy(this._view)}checkNoChanges(){!function(t){se(!0);try{Vy(t)}finally{se(!1)}}(this._view)}get context(){return null}}const NA=function(t){return function(t,e,n){if(Oi(t)&&!n){const r=Rn(t.index,e);return new Za(r,r)}return 47&t.type?new Za(e[16],e):null}(y(),d(),16==(16&t))};let gh=(()=>{class t{}return t.__NG_ELEMENT_ID__=NA,t})();const PA=[new cE],FA=new Ka([new aE]),kA=new Ps(PA);class ti{}class hE{}const $A=function(){return function(t,e){let n;const r=e[t.index];if(Tn(r))n=r;else{let i;if(8&t.type)i=Ft(r);else{const o=e[11];i=o.createComment("");const a=$n(t,e);vo(o,Cl(o,a),i,function(t,e){return St(t)?t.nextSibling(e):e.nextSibling}(o,a),!1)}e[t.index]=n=function(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}(r,e,i,t),Rl(e,n)}return new pE(n,t,e)}(y(),d())};let Rr=(()=>{class t{}return t.__NG_ELEMENT_ID__=$A,t})();const QA=Rr,pE=class extends QA{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return xs(this._hostTNode,this._hostLView)}get injector(){return new es(this._hostTNode,this._hostLView)}get parentInjector(){const e=al(this._hostTNode,this._hostLView);if(Jg(e)){const n=Xo(e,this._hostLView),r=Jo(e);return new es(n[1].data[r+8],n)}return new es(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=gE(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const i=e.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(e,n,r,i,o){const a=r||this.parentInjector;if(!o&&null==e.ngModule&&a){const f=a.get(ti,null);f&&(o=f)}const l=e.create(a,i,void 0,o);return this.insert(l.hostView,n),l}insert(e,n){const r=e._lView,i=r[1];if(function(t){return Tn(t[3])}(r)){const m=this.indexOf(e);if(-1!==m)this.detach(m);else{const _=r[3],C=new pE(_,_[6],_[3]);C.detach(C.indexOf(e))}}const o=this._adjustIndex(n),a=this._lContainer;!function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],fl(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const a=e[17];null!==a&&n!==a&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(a,e);const l=e[19];null!==l&&l.insertView(t),e[2]|=128}(i,r,a,o);const l=pf(o,a),f=r[11],p=Cl(f,a[7]);return null!==p&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Oa(t,r,n,1,i,o)}(i,a[6],f,r,p,l),e.attachToViewContainerRef(),fl(mh(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=gE(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=df(this._lContainer,n);r&&(go(mh(this._lContainer),n),zm(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=df(this._lContainer,n);return r&&null!=go(mh(this._lContainer),n)?new Za(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function gE(t){return t[8]}function mh(t){return t[8]||(t[8]=[])}const Ls={};class kE extends Hi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=un(e);return new VE(n,this.ngModule)}}function LE(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const BN=new et("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Um});class VE extends rE{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(TS).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return LE(this.componentDef.inputs)}get outputs(){return LE(this.componentDef.outputs)}create(e,n,r,i){const o=(i=i||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ls,i);return o!==Ls||r===Ls?o:e.get(n,r,i)}}}(e,i.injector):e,a=o.get(Hl,ho),l=o.get(hh,null),f=a.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=r?function(t,e,n){if(St(t))return t.selectRootElement(e,n===Vt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(f,r,this.componentDef.encapsulation):cf(a.createRenderer(null,this.componentDef),p,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(p)),_=this.componentDef.onPush?576:528,C=function(t,e){return{components:[],scheduler:t||Um,clean:dI,playerHandler:e||null,flags:0}}(),R=Tl(0,null,null,1,0,null,null,null,null,null),M=Fa(null,R,C,_,null,null,a,f,l,o);let j,F;Xu(M);try{const q=function(t,e,n,r,i,o){const a=n[1];n[20]=t;const f=fs(a,20,2,"#host",null),p=f.mergedAttrs=e.hostAttrs;null!==p&&(Al(f,p,!0),null!==t&&(il(i,t,p),null!==f.classes&&mf(i,t,f.classes),null!==f.styles&&sy(i,t,f.styles)));const m=r.createRenderer(t,e),_=Fa(n,Iy(e),null,e.onPush?64:16,n[20],f,r,m,o||null,null);return a.firstCreatePass&&(ul(va(f,n),a,e.type),Oy(a,f),Fy(f,n.length,1)),Rl(n,_),n[20]=_}(m,this.componentDef,M,a,f);if(m)if(r)il(f,m,["ng-version",ph.full]);else{const{attrs:$,classes:ue}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!br(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);$&&il(f,m,$),ue&&ue.length>0&&mf(f,m,ue.join(" "))}if(F=function(t,e){return t.data[e]}(R,20),void 0!==n){const $=F.projection=[];for(let ue=0;ue<this.ngContentSelectors.length;ue++){const me=n[ue];$.push(null!=me?Array.from(me):null)}}j=function(t,e,n,r,i){const o=n[1],a=function(t,e,n){const r=y();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ky(t,r,e,hs(t,e,1,null),n));const i=Ea(e,t,r.directiveStart,r);bn(i,e);const o=$n(r,e);return o&&bn(o,e),i}(o,n,e);if(r.components.push(a),t[8]=a,i&&i.forEach(f=>f(a,e)),e.contentQueries){const f=y();e.contentQueries(1,a,f.directiveStart)}const l=y();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ki(l.index),xy(n[1],l,0,l.directiveStart,l.directiveEnd,e),Py(e,a)),a}(q,this.componentDef,M,C,[LI]),ka(R,M,null)}finally{el()}return new WN(this.componentType,j,xs(F,M),M,F)}}class WN extends class{}{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new RA(i),this.componentType=e}get injector(){return new es(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Vs=new Map;class GN extends ti{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new kE(this);const r=Un(e),i=function(t){return t[Er]||null}(e);i&&oh(i),this._bootstrapComponents=Kr(r.bootstrap),this._r3Injector=qy(e,n,[{provide:ti,useValue:this},{provide:Hi,useValue:this.componentFactoryResolver}],be(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=it.THROW_IF_NOT_FOUND,r=ve.Default){return e===it||e===ti||e===gs?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ah extends hE{constructor(e){super(),this.moduleType=e,null!==Un(e)&&function(t){const e=new Set;!function n(r){const i=Un(r,!0),o=i.id;null!==o&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${be(e)} vs ${be(e.name)}`)}(o,Vs.get(o),r),Vs.set(o,r));const a=Kr(i.imports);for(const l of a)e.has(l)||(e.add(l),n(l))}(t)}(e)}create(e){return new GN(this.moduleType,e)}}function BE(t,e,n,r,i,o){const a=e+n;return wn(t,a,i)?function(t,e,n){return t[e]=n}(t,a+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===ke?void 0:n}(t,a+1)}function Nh(t,e){const n=h();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new er("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=fi(r.type)),a=nr(Ee);try{const l=sl(!1),f=o();return sl(l),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,d(),i,f),f}finally{nr(a)}}function Mh(t,e,n){const r=t+20,i=d(),o=function(t,e){return t[e]}(i,r);return function(t,e){Sr.isWrapped(e)&&(e=Sr.unwrap(e),t[Ne.lFrame.bindingIndex]=ke);return e}(i,function(t,e){return t[1].data[e].pure}(i,r)?BE(i,function(){const t=Ne.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n))}function xh(t){return e=>{setTimeout(t,void 0,e)}}const cr=class extends A{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,o,a;let l=e,f=n||(()=>null),p=r;if(e&&"object"==typeof e){const _=e;l=null===(i=_.next)||void 0===i?void 0:i.bind(_),f=null===(o=_.error)||void 0===o?void 0:o.bind(_),p=null===(a=_.complete)||void 0===a?void 0:a.bind(_)}this.__isAsync&&(f=xh(f),l&&(l=xh(l)),p&&(p=xh(p)));const m=super.subscribe({next:l,error:f,complete:p});return e instanceof Z&&e.add(m),m}};Symbol;const Us=new et("Application Initializer");let Bs=(()=>{class t{constructor(n){this.appInits=n,this.resolve=Bl,this.reject=Bl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Pl(o))n.push(o);else if(Xf(o)){const a=new Promise((l,f)=>{o.subscribe({complete:l,error:f})});n.push(a)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(Y(Us,8))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();const lu=new et("AppId"),GM={provide:lu,useFactory:function(){return`${qh()}${qh()}${qh()}`},deps:[]};function qh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pC=new et("Platform Initializer"),dr=new et("Platform ID"),gC=new et("appBootstrapListener");let Xl=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();const Wi=new et("LocaleId"),mC=new et("DefaultCurrencyCode");class YM{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const Gh=function(t){return new Ah(t)},KM=Gh,ZM=function(t){return Promise.resolve(Gh(t))},yC=function(t){const e=Gh(t),r=Kr(Un(t).declarations).reduce((i,o)=>{const a=un(o);return a&&i.push(new VE(a)),i},[]);return new YM(e,r)},JM=yC,XM=function(t){return Promise.resolve(yC(t))};let Do=(()=>{class t{constructor(){this.compileModuleSync=KM,this.compileModuleAsync=ZM,this.compileModuleAndAllComponentsSync=JM,this.compileModuleAndAllComponentsAsync=XM}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();const nx=(()=>Promise.resolve(0))();function zh(t){"undefined"==typeof Zone?nx.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ct{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new cr(!1),this.onMicrotaskEmpty=new cr(!1),this.onStable=new cr(!1),this.onError=new cr(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=Ue.requestAnimationFrame,e=Ue.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ue,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Kh(t),t.isCheckStableRunning=!0,Yh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Kh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,a,l)=>{try{return _C(t),n.invokeTask(i,o,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),vC(t)}},onInvoke:(n,r,i,o,a,l,f)=>{try{return _C(t),n.invoke(i,o,a,l,f)}finally{t.shouldCoalesceRunChangeDetection&&e(),vC(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,Kh(t),Yh(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ct.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ct.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,ix,Bl,Bl);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const ix={};function Yh(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Kh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function _C(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vC(t){t._nesting--,Yh(t)}class ax{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new cr,this.onMicrotaskEmpty=new cr,this.onStable=new cr,this.onError=new cr}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let Zh=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ct.assertNotInAngularZone(),zh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(Y(Ct))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})(),EC=(()=>{class t{constructor(){this._applications=new Map,Jh.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Jh.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();class ux{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let Jh=new ux,CC=!0,bC=!1;let Mr;const DC=new et("AllowMultipleToken");class Xh{constructor(e,n){this.name=e,this.token=n}}function SC(t,e,n=[]){const r=`Platform: ${e}`,i=new et(r);return(o=[])=>{let a=IC();if(!a||a.injector.get(DC,!1))if(t)t(n.concat(o).concat({provide:i,useValue:!0}));else{const l=n.concat(o).concat({provide:i,useValue:!0},{provide:La,useValue:"platform"});!function(t){if(Mr&&!Mr.destroyed&&!Mr.injector.get(DC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Mr=t.get(TC);const e=t.get(pC,null);e&&e.forEach(n=>n())}(it.create({providers:l,name:r}))}return function(t){const e=IC();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function IC(){return Mr&&!Mr.destroyed?Mr:null}let TC=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const l=function(t,e){let n;return n="noop"===t?new ax:("zone.js"===t?void 0:t)||new Ct({enableLongStackTrace:(bC=!0,CC),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),f=[{provide:Ct,useValue:l}];return l.run(()=>{const p=it.create({providers:f,parent:this.injector,name:n.moduleType.name}),m=n.create(p),_=m.injector.get(_o,null);if(!_)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return l.runOutsideAngular(()=>{const C=l.onError.subscribe({next:R=>{_.handleError(R)}});m.onDestroy(()=>{ep(this._modules,m),C.unsubscribe()})}),function(t,e,n){try{const r=n();return Pl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(_,l,()=>{const C=m.injector.get(Bs);return C.runInitializers(),C.donePromise.then(()=>(oh(m.injector.get(Wi,kl)||kl),this._moduleDoBootstrap(m),m))})})}bootstrapModule(n,r=[]){const i=RC({},r);return function(t,e,n){const r=new Ah(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(So);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${be(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(Y(it))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();function RC(t,e){return Array.isArray(e)?e.reduce(RC,t):Object.assign(Object.assign({},t),e)}let So=(()=>{class t{constructor(n,r,i,o,a){this._zone=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new _e(p=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{p.next(this._stable),p.complete()})}),f=new _e(p=>{let m;this._zone.runOutsideAngular(()=>{m=this._zone.onStable.subscribe(()=>{Ct.assertNotInAngularZone(),zh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,p.next(!0))})})});const _=this._zone.onUnstable.subscribe(()=>{Ct.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{p.next(!1)}))});return()=>{m.unsubscribe(),_.unsubscribe()}});this.isStable=k(l,f.pipe(Nt()))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let i;i=n instanceof rE?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(i.componentType);const o=function(t){return t.isBoundToModule}(i)?void 0:this._injector.get(ti),l=i.create(it.NULL,[],r||i.selector,o),f=l.location.nativeElement,p=l.injector.get(Zh,null),m=p&&l.injector.get(EC);return p&&m&&m.registerApplication(f,p),l.onDestroy(()=>{this.detachView(l.hostView),ep(this.components,l),m&&m.unregisterApplication(f)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;ep(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(gC,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(Y(Ct),Y(it),Y(_o),Y(Hi),Y(Bs))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();function ep(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class tc{}class wx{}const Dx={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Sx=(()=>{class t{constructor(n,r){this._compiler=n,this._config=r||Dx}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[r,i]=n.split("#");return void 0===i&&(i="default"),Me(255)(r).then(o=>o[i]).then(o=>xC(o,r,i)).then(o=>this._compiler.compileModuleAsync(o))}loadFactory(n){let[r,i]=n.split("#"),o="NgFactory";return void 0===i&&(i="default",o=""),Me(255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(a=>a[i+o]).then(a=>xC(a,r,i))}}return t.\u0275fac=function(n){return new(n||t)(Y(Do),Y(wx,8))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();function xC(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Fx=SC(null,"core",[{provide:dr,useValue:"unknown"},{provide:TC,deps:[it]},{provide:EC,deps:[]},{provide:Xl,deps:[]}]),Ux=[{provide:So,useClass:So,deps:[Ct,it,_o,Hi,Bs]},{provide:BN,deps:[Ct],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:Bs,useClass:Bs,deps:[[new Nn,Us]]},{provide:Do,useClass:Do,deps:[]},GM,{provide:Ka,useFactory:function(){return FA},deps:[]},{provide:Ps,useFactory:function(){return kA},deps:[]},{provide:Wi,useFactory:function(t){return oh(t=t||"undefined"!=typeof $localize&&$localize.locale||kl),t},deps:[[new as(Wi),new Nn,new ji]]},{provide:mC,useValue:"USD"}];let Hx=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(Y(So))},t.\u0275mod=jn({type:t}),t.\u0275inj=he({providers:Ux}),t})(),dc=null;function qi(){return dc}const _n=new et("DocumentToken");let Ro=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Re({factory:BP,token:t,providedIn:"platform"}),t})();function BP(){return Y(nb)}const HP=new et("Location Initialized");let nb=(()=>{class t extends Ro{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qi().getBaseHref(this._doc)}onPopState(n){const r=qi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=qi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){rb()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){rb()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(Y(_n))},t.\u0275prov=Re({factory:$P,token:t,providedIn:"platform"}),t})();function rb(){return!!window.history.pushState}function $P(){return new nb(Y(_n))}function gp(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function ib(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function bi(t){return t&&"?"!==t[0]?"?"+t:t}let Ws=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Re({factory:WP,token:t,providedIn:"root"}),t})();function WP(t){const e=Y(_n).location;return new ob(Y(Ro),e&&e.origin||"")}const mp=new et("appBaseHref");let ob=(()=>{class t extends Ws{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return gp(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+bi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const a=this.prepareExternalUrl(i+bi(o));this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,o){const a=this.prepareExternalUrl(i+bi(o));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(Y(Ro),Y(mp,8))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})(),QP=(()=>{class t extends Ws{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=gp(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let a=this.prepareExternalUrl(i+bi(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,o){let a=this.prepareExternalUrl(i+bi(o));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(Y(Ro),Y(mp,8))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})(),fc=(()=>{class t{constructor(n,r){this._subject=new cr,this._urlChangeListeners=[],this._platformStrategy=n;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ib(sb(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+bi(r))}normalize(n){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,sb(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._platformStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+bi(r)),i)}replaceState(n,r="",i=null){this._platformStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+bi(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.\u0275fac=function(n){return new(n||t)(Y(Ws),Y(Ro))},t.normalizeQueryParams=bi,t.joinWithSlash=gp,t.stripTrailingSlash=ib,t.\u0275prov=Re({factory:qP,token:t,providedIn:"root"}),t})();function qP(){return new fc(Y(Ws),Y(Ro))}function sb(t){return t.replace(/\/index.html$/,"")}var Qt=(()=>((Qt=Qt||{})[Qt.Zero=0]="Zero",Qt[Qt.One=1]="One",Qt[Qt.Two=2]="Two",Qt[Qt.Few=3]="Few",Qt[Qt.Many=4]="Many",Qt[Qt.Other=5]="Other",Qt))();const eO=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Mv(e);if(n)return n;const r=e.split("-")[0];if(n=Mv(r),n)return n;if("en"===r)return fR;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[ae.PluralCase]};class bc{}let AO=(()=>{class t extends bc{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(eO(r||this.locale)(n)){case Qt.Zero:return"zero";case Qt.One:return"one";case Qt.Two:return"two";case Qt.Few:return"few";case Qt.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(Y(Wi))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();class $O{createSubscription(e,n){return e.subscribe({next:n,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class WO{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}onDestroy(e){}}const QO=new WO,qO=new $O;let Tp=(()=>{class t{constructor(n){this._ref=n,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Pl(n))return QO;if(L_(n))return qO;throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${be(t)}'`)}(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return t.\u0275fac=function(n){return new(n||t)(Ee(gh,16))},t.\u0275pipe=gn({name:"async",type:t,pure:!1}),t})(),_b=(()=>{class t{transform(n){return JSON.stringify(n,null,2)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=gn({name:"json",type:t,pure:!1}),t})(),aF=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=jn({type:t}),t.\u0275inj=he({providers:[{provide:bc,useClass:AO}]}),t})();const Eb="browser";function Cb(t){return t===Eb}function bb(t){return"server"===t}let wb=(()=>{class t{}return t.\u0275prov=Re({token:t,providedIn:"root",factory:()=>new dF(Y(_n),window)}),t})();class dF{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Db(this.window.history)||Db(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Db(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Np extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){dc||(dc=t)}(new Np)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(mu=mu||document.querySelector("base"),mu?mu.getAttribute("href"):null);return null==n?null:function(t){wc=wc||document.createElement("a"),wc.setAttribute("href",t);const e=wc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){mu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let wc,mu=null;const Sb=new et("TRANSITION_ID"),_F=[{provide:Us,useFactory:function(t,e,n){return()=>{n.get(Bs).donePromise.then(()=>{const r=qi(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Sb,_n,it],multi:!0}];class Mp{static init(){!function(t){Jh=t}(new Mp)}addToWindow(e){Ue.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Ue.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ue.getAllAngularRootElements=()=>e.getAllRootElements(),Ue.frameworkStabilizers||(Ue.frameworkStabilizers=[]),Ue.frameworkStabilizers.push(r=>{const i=Ue.getAllAngularTestabilities();let o=i.length,a=!1;const l=function(f){a=a||f,o--,0==o&&r(a)};i.forEach(function(f){f.whenStable(l)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?qi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let vF=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();const yu=new et("EventManagerPlugins");let Sc=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const a=i[o];if(a.supports(n))return this._eventNameToPlugin.set(n,a),a}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(Y(yu),Y(Ct))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();class xp{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=qi().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let Tb=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})(),_u=(()=>{class t extends Tb{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const a=this._doc.createElement("style");a.textContent=o,i.push(r.appendChild(a))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Rb),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Rb))}}return t.\u0275fac=function(n){return new(n||t)(Y(_n))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();function Rb(t){qi().remove(t)}const Pp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Op=/%COMP%/g;function Ic(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ic(t,i,n):(i=i.replace(Op,t),n.push(i))}return n}function Mb(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Fp=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new kp(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Vt.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new OF(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case Vt.ShadowDom:return new FF(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ic(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(Y(Sc),Y(_u),Y(lu))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();class kp{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(Pp[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Pp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Pp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Kn.DashCase|Kn.Important)?e.style.setProperty(n,r,i&Kn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Kn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,Mb(r)):this.eventManager.addEventListener(e,n,Mb(r))}}class OF extends kp{constructor(e,n,r,i){super(e),this.component=r;const o=Ic(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(Op,t)}(i+"-"+r.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(Op,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class FF extends kp{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Ic(i.id,i.styles,[]);for(let a=0;a<o.length;a++){const l=document.createElement("style");l.textContent=o[a],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let kF=(()=>{class t extends xp{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(Y(_n))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();const Ob=["alt","control","meta","shift"],$F={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fb={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},WF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let QF=(()=>{class t extends xp{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),a=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qi().onAndCancel(n,o.domEventName,a))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let a="";if(Ob.forEach(f=>{const p=r.indexOf(f);p>-1&&(r.splice(p,1),a+=f+".")}),a+=o,0!=r.length||0===o.length)return null;const l={};return l.domEventName=i,l.fullKey=a,l}static getEventFullKey(n){let r="",i=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Fb.hasOwnProperty(e)&&(e=Fb[e]))}return $F[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ob.forEach(o=>{o!=i&&WF[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{t.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(Y(_n))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();const XF=SC(Fx,"browser",[{provide:dr,useValue:Eb},{provide:pC,useValue:function(){Np.makeCurrent(),Mp.init()},multi:!0},{provide:_n,useFactory:function(){return function(t){Rt=t}(document),document},deps:[]}]),e1=[[],{provide:La,useValue:"root"},{provide:_o,useFactory:function(){return new _o},deps:[]},{provide:yu,useClass:kF,multi:!0,deps:[_n,Ct,dr]},{provide:yu,useClass:QF,multi:!0,deps:[_n]},[],{provide:Fp,useClass:Fp,deps:[Sc,_u,lu]},{provide:Hl,useExisting:Fp},{provide:Tb,useExisting:_u},{provide:_u,useClass:_u,deps:[_n]},{provide:Zh,useClass:Zh,deps:[Ct]},{provide:Sc,useClass:Sc,deps:[yu,Ct]},{provide:class{},useClass:vF,deps:[]},[]];let t1=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:lu,useValue:n.appId},{provide:Sb,useExisting:lu},_F]}}}return t.\u0275fac=function(n){return new(n||t)(Y(t,12))},t.\u0275mod=jn({type:t}),t.\u0275inj=he({providers:e1,imports:[aF,Hx]}),t})();function Ce(...t){let e=t[t.length-1];return T(e)?(t.pop(),yr(t,e)):to(t)}"undefined"!=typeof window&&window;class pr extends A{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return n&&!n.closed&&e.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new v;return this._value}next(e){super.next(this._value=e)}}class Lb extends X{notifyNext(e,n,r,i,o){this.destination.next(n)}notifyError(e,n){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class l1 extends X{constructor(e,n,r){super(),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Vb(t,e,n,r,i=new l1(t,n,r)){if(!i.closed)return e instanceof _e?e.subscribe(i):Ln(e)(i)}const jb={};class d1{constructor(e){this.resultSelector=e}call(e,n){return n.subscribe(new f1(e,this.resultSelector))}}class f1 extends Lb{constructor(e,n){super(e),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(jb),this.observables.push(e)}_complete(){const e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let r=0;r<n;r++)this.add(Vb(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,n,r){const i=this.values,a=this.toRespond?i[r]===jb?--this.toRespond:this.toRespond:0;i[r]=n,0===a&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let n;try{n=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const Tc=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function vu(...t){return jr(1)(Ce(...t))}const kr=new _e(t=>t.complete());function Rc(t){return t?function(t){return new _e(e=>t.schedule(()=>e.complete()))}(t):kr}function Ac(t){return new _e(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?je(n):Rc()).subscribe(e)})}function ct(t,e){return"function"==typeof e?n=>n.pipe(ct((r,i)=>je(t(r,i)).pipe(O((o,a)=>e(r,o,i,a))))):n=>n.lift(new g1(t))}class g1{constructor(e){this.project=e}call(e,n){return n.subscribe(new m1(e,this.project))}}class m1 extends pn{constructor(e,n){super(e),this.project=n,this.index=0}_next(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(n)}_innerSub(e){const n=this.innerSubscription;n&&n.unsubscribe();const r=new vt(this),i=this.destination;i.add(r),this.innerSubscription=on(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Ub=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Di(t){return e=>0===t?Rc():e.lift(new y1(t))}class y1{constructor(e){if(this.total=e,this.total<0)throw new Ub}call(e,n){return n.subscribe(new _1(e,this.total))}}class _1 extends X{constructor(e,n){super(e),this.total=n,this.count=0}_next(e){const n=this.total,r=++this.count;r<=n&&(this.destination.next(e),r===n&&(this.destination.complete(),this.unsubscribe()))}}function Nc(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new E1(t,e,n))}}class E1{constructor(e,n,r=!1){this.accumulator=e,this.seed=n,this.hasSeed=r}call(e,n){return n.subscribe(new C1(e,this.accumulator,this.seed,this.hasSeed))}}class C1 extends X{constructor(e,n,r,i){super(e),this.accumulator=n,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const n=this.index++;let r;try{r=this.accumulator(this.seed,e,n)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function Lr(t,e){return function(r){return r.lift(new b1(t,e))}}class b1{constructor(e,n){this.predicate=e,this.thisArg=n}call(e,n){return n.subscribe(new w1(e,this.predicate,this.thisArg))}}class w1 extends X{constructor(e,n,r){super(e),this.predicate=n,this.thisArg=r,this.count=0}_next(e){let n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}n&&this.destination.next(e)}}function zi(t){return function(n){const r=new D1(t),i=n.lift(r);return r.caught=i}}class D1{constructor(e){this.selector=e}call(e,n){return n.subscribe(new S1(e,this.selector,this.caught))}}class S1 extends pn{constructor(e,n,r){super(e),this.selector=n,this.caught=r}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(o){return void super.error(o)}this._unsubscribeAndRecycle();const r=new vt(this);this.add(r);const i=on(n,r);i!==r&&this.add(i)}}}function Eu(t,e){return Et(t,e,1)}function Bp(t){return function(n){return 0===t?Rc():n.lift(new I1(t))}}class I1{constructor(e){if(this.total=e,this.total<0)throw new Ub}call(e,n){return n.subscribe(new T1(e,this.total))}}class T1 extends X{constructor(e,n){super(e),this.total=n,this.ring=new Array,this.count=0}_next(e){const n=this.ring,r=this.total,i=this.count++;n.length<r?n.push(e):n[i%r]=e}_complete(){const e=this.destination;let n=this.count;if(n>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let o=0;o<r;o++){const a=n++%r;e.next(i[a])}}e.complete()}}function Bb(t=N1){return e=>e.lift(new R1(t))}class R1{constructor(e){this.errorFactory=e}call(e,n){return n.subscribe(new A1(e,this.errorFactory))}}class A1 extends X{constructor(e,n){super(e),this.errorFactory=n,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)}}}function N1(){return new Tc}function Mc(t=null){return e=>e.lift(new M1(t))}class M1{constructor(e){this.defaultValue=e}call(e,n){return n.subscribe(new x1(e,this.defaultValue))}}class x1 extends X{constructor(e,n){super(e),this.defaultValue=n,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Ao(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Lr((i,o)=>t(i,o,r)):ft,Di(1),n?Mc(e):Bb(()=>new Tc))}function Si(){}function Fn(t,e,n){return function(i){return i.lift(new O1(t,e,n))}}class O1{constructor(e,n,r){this.nextOrObserver=e,this.error=n,this.complete=r}call(e,n){return n.subscribe(new F1(e,this.nextOrObserver,this.error,this.complete))}}class F1 extends X{constructor(e,n,r,i){super(e),this._tapNext=Si,this._tapError=Si,this._tapComplete=Si,this._tapError=r||Si,this._tapComplete=i||Si,ye(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||Si,this._tapError=n.error||Si,this._tapComplete=n.complete||Si)}_next(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class L1{constructor(e){this.callback=e}call(e,n){return n.subscribe(new V1(e,this.callback))}}class V1 extends X{constructor(e,n){super(e),this.add(new Z(n))}}class Ii{constructor(e,n){this.id=e,this.url=n}}class Hp extends Ii{constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Cu extends Ii{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hb extends Ii{constructor(e,n,r){super(e,n),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class j1 extends Ii{constructor(e,n,r){super(e,n),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class U1 extends Ii{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B1 extends Ii{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H1 extends Ii{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $1 extends Ii{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W1 extends Ii{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $b{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wb{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Q1{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q1{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class G1{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z1{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qb{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qe="primary";class Y1{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Qs(t){return new Y1(t)}const qb="ngNavigationCancelingError";function $p(t){const e=Error("NavigationCancelingError: "+t);return e[qb]=!0,e}function Z1(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const a=r[o],l=t[o];if(a.startsWith(":"))i[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ni(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Gb(t[i],e[i]))return!1;return!0}function Gb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function zb(t){return Array.prototype.concat.apply([],t)}function Yb(t){return t.length>0?t[t.length-1]:null}function vn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ri(t){return Xf(t)?t:Pl(t)?je(Promise.resolve(t)):Ce(t)}const ek={exact:function Jb(t,e,n){if(!Mo(t.segments,e.segments)||!xc(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!Jb(t.children[r],e.children[r],n))return!1;return!0},subset:Xb},Kb={exact:function(t,e){return ni(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Gb(t[n],e[n]))},ignored:()=>!0};function Zb(t,e,n){return ek[n.paths](t.root,e.root,n.matrixParams)&&Kb[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Xb(t,e,n){return ew(t,e,e.segments,n)}function ew(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Mo(i,n)||e.hasChildren()||!xc(i,n,r))}if(t.segments.length===n.length){if(!Mo(t.segments,n)||!xc(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!Xb(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(Mo(t.segments,i)&&xc(t.segments,i,r)&&t.children[qe])&&ew(t.children[qe],e,o,r)}}function xc(t,e,n){return e.every((r,i)=>Kb[n](t[i].parameters,r.parameters))}class No{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qs(this.queryParams)),this._queryParamMap}toString(){return ok.serialize(this)}}class tt{constructor(e,n){this.segments=e,this.children=n,this.parent=null,vn(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pc(this)}}class bu{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Qs(this.parameters)),this._parameterMap}toString(){return iw(this)}}function Mo(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}class Wp{}class tw{parse(e){const n=new pk(e);return new No(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){return`${`/${wu(e.root,!0)}`}${function(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Oc(n)}=${Oc(i)}`).join("&"):`${Oc(n)}=${Oc(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(t){return encodeURI(t)}(e.fragment)}`:""}`}}const ok=new tw;function Pc(t){return t.segments.map(e=>iw(e)).join("/")}function wu(t,e){if(!t.hasChildren())return Pc(t);if(e){const n=t.children[qe]?wu(t.children[qe],!1):"",r=[];return vn(t.children,(i,o)=>{o!==qe&&r.push(`${o}:${wu(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function(t,e){let n=[];return vn(t.children,(r,i)=>{i===qe&&(n=n.concat(e(r,i)))}),vn(t.children,(r,i)=>{i!==qe&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===qe?[wu(t.children[qe],!1)]:[`${i}:${wu(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[qe]?`${Pc(t)}/${n[0]}`:`${Pc(t)}/(${n.join("//")})`}}function nw(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oc(t){return nw(t).replace(/%3B/gi,";")}function Qp(t){return nw(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fc(t){return decodeURIComponent(t)}function rw(t){return Fc(t.replace(/\+/g,"%20"))}function iw(t){return`${Qp(t.path)}${function(t){return Object.keys(t).map(e=>`;${Qp(e)}=${Qp(t[e])}`).join("")}(t.parameters)}`}const lk=/^[^\/()?;=#]+/;function kc(t){const e=t.match(lk);return e?e[0]:""}const ck=/^[^=?&#]+/,fk=/^[^?&#]+/;class pk{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tt([],{}):new tt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[qe]=new tt(e,n)),r}parseSegment(){const e=kc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new bu(Fc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=kc(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=kc(this.remaining);i&&(r=i,this.capture(r))}e[Fc(n)]=Fc(r)}parseQueryParam(e){const n=function(t){const e=t.match(ck);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const a=function(t){const e=t.match(fk);return e?e[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=rw(n),o=rw(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=kc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=qe);const a=this.parseChildren();n[o]=1===Object.keys(a).length?a[qe]:new tt([],a),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ow{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=qp(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=qp(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Gp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Gp(e,this._root).map(n=>n.value)}}function qp(t,e){if(t===e.value)return e;for(const n of e.children){const r=qp(t,n);if(r)return r}return null}function Gp(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Gp(t,n);if(r.length)return r.unshift(e),r}return[]}class Ti{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Du(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class sw extends ow{constructor(e,n){super(e),this.snapshot=n,zp(this,e)}toString(){return this.snapshot.toString()}}function aw(t,e){const n=function(t,e){const a=new Lc([],{},{},"",{},qe,e,null,t.root,-1,{});return new lw("",new Ti(a,[]))}(t,e),r=new pr([new bu("",{})]),i=new pr({}),o=new pr({}),a=new pr({}),l=new pr(""),f=new qs(r,i,a,l,o,qe,e,n.root);return f.snapshot=n.root,new sw(new Ti(f,[]),n)}class qs{constructor(e,n,r,i,o,a,l,f){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=l,this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(O(e=>Qs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(O(e=>Qs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function uw(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(t){return t.reduce((e,n)=>({params:Object.assign(Object.assign({},e.params),n.params),data:Object.assign(Object.assign({},e.data),n.data),resolve:Object.assign(Object.assign({},e.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Lc{constructor(e,n,r,i,o,a,l,f,p,m,_){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=l,this.routeConfig=f,this._urlSegment=p,this._lastPathIndex=m,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lw extends ow{constructor(e,n){super(n),this.url=e,zp(this,n)}toString(){return cw(this._root)}}function zp(t,e){e.value._routerState=t,e.children.forEach(n=>zp(t,n))}function cw(t){const e=t.children.length>0?` { ${t.children.map(cw).join(", ")} } `:"";return`${t.value}${e}`}function Yp(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ni(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ni(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ni(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ni(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Kp(t,e){return ni(t.params,e.params)&&function(t,e){return Mo(t,e)&&t.every((n,r)=>ni(n.parameters,e[r].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Kp(t.parent,e.parent))}function Vc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Vc(t,r,i);return Vc(t,r)})}(t,e,n);return new Ti(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const a=o.route;return dw(e,a),a}}const r=function(t){return new qs(new pr(t.url),new pr(t.params),new pr(t.queryParams),new pr(t.fragment),new pr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Vc(t,o));return new Ti(r,i)}}function dw(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)dw(t.children[n],e.children[n])}function jc(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Su(t){return"object"==typeof t&&null!=t&&t.outlets}function Zp(t,e,n,r,i){let o={};return r&&vn(r,(a,l)=>{o[l]=Array.isArray(a)?a.map(f=>`${f}`):`${a}`}),new No(n.root===t?e:fw(n.root,t,e),o,i)}function fw(t,e,n){const r={};return vn(t.children,(i,o)=>{r[o]=i===e?n:fw(i,e,n)}),new tt(t.segments,r)}class hw{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&jc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Su);if(i&&i!==Yb(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jp{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function pw(t,e,n){if(t||(t=new tt([],{})),0===t.segments.length&&t.hasChildren())return Uc(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const a=t.segments[i],l=n[r];if(Su(l))break;const f=`${l}`,p=r<n.length-1?n[r+1]:null;if(i>0&&void 0===f)break;if(f&&p&&"object"==typeof p&&void 0===p.outlets){if(!mw(f,p,a))return o;r+=2}else{if(!mw(f,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new tt(t.segments.slice(0,r.pathIndex),{});return o.children[qe]=new tt(t.segments.slice(r.pathIndex),t.children),Uc(o,0,i)}return r.match&&0===i.length?new tt(t.segments,{}):r.match&&!t.hasChildren()?Xp(t,e,n):r.match?Uc(t,0,i):Xp(t,e,n)}function Uc(t,e,n){if(0===n.length)return new tt(t.segments,{});{const r=function(t){return Su(t[0])?t[0].outlets:{[qe]:t}}(n),i={};return vn(r,(o,a)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[a]=pw(t.children[a],e,o))}),vn(t.children,(o,a)=>{void 0===r[a]&&(i[a]=o)}),new tt(t.segments,i)}}function Xp(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Su(o)){const f=Ik(o.outlets);return new tt(r,f)}if(0===i&&jc(n[0])){r.push(new bu(t.segments[e].path,gw(n[0]))),i++;continue}const a=Su(o)?o.outlets[qe]:`${o}`,l=i<n.length-1?n[i+1]:null;a&&l&&jc(l)?(r.push(new bu(a,gw(l))),i+=2):(r.push(new bu(a,{})),i++)}return new tt(r,{})}function Ik(t){const e={};return vn(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=Xp(new tt([],{}),0,n))}),e}function gw(t){const e={};return vn(t,(n,r)=>e[r]=`${n}`),e}function mw(t,e,n){return t==n.path&&ni(e,n.parameters)}class Rk{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Yp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Du(n);e.children.forEach(o=>{const a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),vn(i,(o,a)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,n,a.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),o=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:o})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Du(e);for(const a of Object.keys(o))this.deactivateRouteAndItsChildren(o[a],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=Du(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new z1(o.value.snapshot))}),e.children.length&&this.forwardEvent(new q1(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(Yp(i),i===o)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,a.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),yw(l.route)}else{const l=function(t){for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(i.snapshot),f=l?l.module.componentFactoryResolver:null;a.attachRef=null,a.route=i,a.resolver=f,a.outlet&&a.outlet.activateWith(i,f),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,r)}}function yw(t){Yp(t.value),t.children.forEach(yw)}class eg{constructor(e,n){this.routes=e,this.module=n}}function Yi(t){return"function"==typeof t}function xo(t){return t instanceof No}const Iu=Symbol("INITIAL_VALUE");function Tu(){return ct(t=>function(...t){let e,n;return T(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&yt(t[0])&&(t=t[0]),to(t,n).lift(new d1(e))}(t.map(e=>e.pipe(Di(1),function(...t){const e=t[t.length-1];return T(e)?(t.pop(),n=>vu(t,n,e)):n=>vu(t,n)}(Iu)))).pipe(Nc((e,n)=>{let r=!1;return n.reduce((i,o,a)=>i!==Iu?i:(o===Iu&&(r=!0),r||!1!==o&&a!==n.length-1&&!xo(o)?i:o),e)},Iu),Lr(e=>e!==Iu),O(e=>xo(e)?e:!0===e),Di(1)))}let _w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Ho({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&Ha(0,"router-outlet")},directives:function(){return[ag]},encapsulation:2}),t})();function vw(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Fk(r,kk(e,r))}}function Fk(t,e){t.children&&vw(t.children,e)}function kk(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function tg(t){const e=t.children&&t.children.map(tg),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==qe&&(n.component=_w),n}function gr(t){return t.outlet||qe}function Ew(t,e){const n=t.filter(r=>gr(r)===e);return n.push(...t.filter(r=>gr(r)!==e)),n}const Cw={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Bc(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Cw):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Z1)(n,t,e);if(!o)return Object.assign({},Cw);const a={};vn(o.posParams,(f,p)=>{a[p]=f.path});const l=o.consumed.length>0?Object.assign(Object.assign({},a),o.consumed[o.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:l,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function Hc(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(r=>$c(t,e,r)&&gr(r)!==qe)}(t,n,r)){const a=new tt(e,function(t,e,n,r){const i={};i[qe]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&gr(o)!==qe){const a=new tt([],{});a._sourceSegment=t,a._segmentIndexShift=e.length,i[gr(o)]=a}return i}(t,e,r,new tt(n,t.children)));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(r=>$c(t,e,r))}(t,n,r)){const a=new tt(t.segments,function(t,e,n,r,i,o){const a={};for(const l of r)if($c(t,n,l)&&!i[gr(l)]){const f=new tt([],{});f._sourceSegment=t,f._segmentIndexShift="legacy"===o?t.segments.length:e.length,a[gr(l)]=f}return Object.assign(Object.assign({},i),a)}(t,e,n,r,t.children,i));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}const o=new tt(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function $c(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function bw(t,e,n,r){return!!(gr(t)===r||r!==qe&&$c(e,n,t))&&("**"===t.path||Bc(e,t,n).matched)}function ww(t,e,n){return 0===e.length&&!t.children[n]}class Ru{constructor(e){this.segmentGroup=e||null}}class Dw{constructor(e){this.urlTree=e}}function Wc(t){return new _e(e=>e.error(new Ru(t)))}function Sw(t){return new _e(e=>e.error(new Dw(t)))}function Bk(t){return new _e(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Wk{constructor(e,n,r,i,o){this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(ti)}apply(){const e=Hc(this.urlTree.root,[],[],this.config).segmentGroup,n=new tt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,qe).pipe(O(o=>this.createUrlTree(ng(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zi(o=>{if(o instanceof Dw)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Ru?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,qe).pipe(O(i=>this.createUrlTree(ng(i),e.queryParams,e.fragment))).pipe(zi(i=>{throw i instanceof Ru?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,r){const i=e.segments.length>0?new tt([],{[qe]:e}):e;return new No(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(O(o=>new tt([],o))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return je(i).pipe(Eu(o=>{const a=r.children[o],l=Ew(n,o);return this.expandSegmentGroup(e,l,a,o).pipe(O(f=>({segment:f,outlet:o})))}),Nc((o,a)=>(o[a.outlet]=a.segment,o),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Lr((i,o)=>t(i,o,r)):ft,Bp(1),n?Mc(e):Bb(()=>new Tc))}())}expandSegment(e,n,r,i,o,a){return je(r).pipe(Eu(l=>this.expandSegmentAgainstRoute(e,n,r,l,i,o,a).pipe(zi(p=>{if(p instanceof Ru)return Ce(null);throw p}))),Ao(l=>!!l),zi((l,f)=>{if(l instanceof Tc||"EmptyError"===l.name){if(ww(n,i,o))return Ce(new tt([],{}));throw new Ru(n)}throw l}))}expandSegmentAgainstRoute(e,n,r,i,o,a,l){return bw(i,n,o,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,o,a):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,a):Wc(n):Wc(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Sw(o):this.lineralizeSegments(r,o).pipe(Et(a=>{const l=new tt(a,{});return this.expandSegment(e,l,n,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,o,a){const{matched:l,consumedSegments:f,lastChild:p,positionalParamSegments:m}=Bc(n,i,o);if(!l)return Wc(n);const _=this.applyRedirectCommands(f,i.redirectTo,m);return i.redirectTo.startsWith("/")?Sw(_):this.lineralizeSegments(i,_).pipe(Et(C=>this.expandSegment(e,n,r,C.concat(o.slice(p)),a,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Ce(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(O(C=>(r._loadedConfig=C,new tt(i,{})))):Ce(new tt(i,{}));const{matched:a,consumedSegments:l,lastChild:f}=Bc(n,r,i);if(!a)return Wc(n);const p=i.slice(f);return this.getChildConfig(e,r,i).pipe(Et(_=>{const C=_.module,R=_.routes,{segmentGroup:M,slicedSegments:j}=Hc(n,l,p,R),F=new tt(M.segments,M.children);if(0===j.length&&F.hasChildren())return this.expandChildren(C,R,F).pipe(O(me=>new tt(l,me)));if(0===R.length&&0===j.length)return Ce(new tt(l,{}));const q=gr(r)===o;return this.expandSegment(C,F,R,j,q?qe:o,!0).pipe(O(ue=>new tt(l.concat(ue.segments),ue.children)))}))}getChildConfig(e,n,r){return n.children?Ce(new eg(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?Ce(n._loadedConfig):this.runCanLoadGuards(e.injector,n,r).pipe(Et(i=>i?this.configLoader.load(e.injector,n).pipe(O(o=>(n._loadedConfig=o,o))):function(t){return new _e(e=>e.error($p(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(n))):Ce(new eg([],e))}runCanLoadGuards(e,n,r){const i=n.canLoad;return i&&0!==i.length?Ce(i.map(a=>{const l=e.get(a);let f;if(function(t){return t&&Yi(t.canLoad)}(l))f=l.canLoad(n,r);else{if(!Yi(l))throw new Error("Invalid CanLoad guard");f=l(n,r)}return ri(f)})).pipe(Tu(),Fn(a=>{if(!xo(a))return;const l=$p(`Redirecting to "${this.urlSerializer.serialize(a)}"`);throw l.url=a,l}),O(a=>!0===a)):Ce(!0)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ce(r);if(i.numberOfChildren>1||!i.children[qe])return Bk(e.redirectTo);i=i.children[qe]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreatreUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new No(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return vn(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[o]=n[l]}else r[o]=i}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let a={};return vn(n.children,(l,f)=>{a[f]=this.createSegmentGroup(e,l,r,i)}),new tt(o,a)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}function ng(t){const e={};for(const r of Object.keys(t.children)){const o=ng(t.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function(t){if(1===t.numberOfChildren&&t.children[qe]){const e=t.children[qe];return new tt(t.segments.concat(e.segments),e.children)}return t}(new tt(t.segments,e))}class Iw{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Qc{constructor(e,n){this.component=e,this.route=n}}function Gk(t,e,n){const r=t._root;return Au(r,e?e._root:null,n,[r.value])}function qc(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Au(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Du(e);return t.children.forEach(a=>{(function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,a=e?e.value:null,l=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){const f=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Mo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Mo(t.url,e.url)||!ni(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kp(t,e)||!ni(t.queryParams,e.queryParams);case"paramsChange":default:return!Kp(t,e)}}(a,o,o.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new Iw(r)):(o.data=a.data,o._resolvedData=a._resolvedData),Au(t,e,o.component?l?l.children:null:n,r,i),f&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new Qc(l.outlet.component,a))}else a&&Nu(e,l,i),i.canActivateChecks.push(new Iw(r)),Au(t,null,o.component?l?l.children:null:n,r,i)})(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),vn(o,(a,l)=>Nu(a,n.getContext(l),i)),i}function Nu(t,e,n){const r=Du(t),i=t.value;vn(r,(o,a)=>{Nu(o,i.component?e?e.children.getContext(a):null:e,n)}),n.canDeactivateChecks.push(new Qc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class sL{}function Tw(t){return new _e(e=>e.error(t))}class uL{constructor(e,n,r,i,o,a){this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}recognize(){const e=Hc(this.urlTree.root,[],[],this.config.filter(a=>void 0===a.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,qe);if(null===n)return null;const r=new Lc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qe,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ti(r,n),o=new lw(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const n=e.value,r=uw(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,r)}processChildren(e,n){const r=[];for(const o of Object.keys(n.children)){const a=n.children[o],l=Ew(e,o),f=this.processSegmentGroup(l,a,o);if(null===f)return null;r.push(...f)}const i=Rw(r);return function(t){t.sort((e,n)=>e.value.outlet===qe?-1:n.value.outlet===qe?1:e.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(e,n,r,i){for(const o of e){const a=this.processSegmentAgainstRoute(o,n,r,i);if(null!==a)return a}return ww(n,r,i)?[]:null}processSegmentAgainstRoute(e,n,r,i){if(e.redirectTo||!bw(e,n,r,i))return null;let o,a=[],l=[];if("**"===e.path){const R=r.length>0?Yb(r).parameters:{};o=new Lc(r,R,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mw(e),gr(e),e.component,e,Aw(n),Nw(n)+r.length,xw(e))}else{const R=Bc(n,e,r);if(!R.matched)return null;a=R.consumedSegments,l=r.slice(R.lastChild),o=new Lc(a,R.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mw(e),gr(e),e.component,e,Aw(n),Nw(n)+a.length,xw(e))}const f=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(e),{segmentGroup:p,slicedSegments:m}=Hc(n,a,l,f.filter(R=>void 0===R.redirectTo),this.relativeLinkResolution);if(0===m.length&&p.hasChildren()){const R=this.processChildren(f,p);return null===R?null:[new Ti(o,R)]}if(0===f.length&&0===m.length)return[new Ti(o,[])];const _=gr(e)===i,C=this.processSegment(f,p,m,_?qe:i);return null===C?null:[new Ti(o,C)]}}function dL(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Rw(t){const e=[],n=new Set;for(const r of t){if(!dL(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=Rw(r.children);e.push(new Ti(r.value,i))}return e.filter(r=>!n.has(r))}function Aw(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Nw(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Mw(t){return t.data||{}}function xw(t){return t.resolve||{}}function rg(t){return ct(e=>{const n=t(e);return n?je(n).pipe(O(()=>e)):Ce(e)})}class vL extends class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const ig=new et("ROUTES");class Pw{constructor(e,n,r,i){this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const i=this.loadModuleFactory(n.loadChildren).pipe(O(o=>{this.onLoadEndListener&&this.onLoadEndListener(n);const a=o.create(e);return new eg(zb(a.injector.get(ig,void 0,ve.Self|ve.Optional)).map(tg),a)}),zi(o=>{throw n._loader$=void 0,o}));return n._loader$=new L(i,()=>new A).pipe(x()),n._loader$}loadModuleFactory(e){return"string"==typeof e?je(this.loader.load(e)):ri(e()).pipe(Et(n=>n instanceof hE?Ce(n):je(this.compiler.compileModuleAsync(n))))}}class EL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gs,this.attachRef=null}}class Gs{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new EL,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}class bL{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function wL(t){throw t}function DL(t,e,n){return e.parse("/")}function Ow(t,e){return Ce(null)}const SL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},IL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qn=(()=>{class t{constructor(n,r,i,o,a,l,f,p){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new A,this.errorHandler=wL,this.malformedUriErrorHandler=DL,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ow,afterPreactivation:Ow},this.urlHandlingStrategy=new bL,this.routeReuseStrategy=new vL,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=a.get(ti),this.console=a.get(Xl);const C=a.get(Ct);this.isNgZoneEnabled=C instanceof Ct&&Ct.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=new No(new tt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Pw(l,f,R=>this.triggerEvent(new $b(R)),R=>this.triggerEvent(new Wb(R))),this.routerState=aw(this.currentUrlTree,this.rootComponentType),this.transitions=new pr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(Lr(i=>0!==i.id),O(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ct(i=>{let o=!1,a=!1;return Ce(i).pipe(Fn(l=>{this.currentNavigation={id:l.id,initialUrl:l.currentRawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ct(l=>{const f=!this.navigated||l.extractedUrl.toString()!==this.browserUrlTree.toString(),p=("reload"===this.onSameUrlNavigation||f)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl);if(Gc(l.source)&&(this.browserUrlTree=l.rawUrl),p)return Ce(l).pipe(ct(m=>{const _=this.transitions.getValue();return r.next(new Hp(m.id,this.serializeUrl(m.extractedUrl),m.source,m.restoredState)),_!==this.transitions.getValue()?kr:Promise.resolve(m)}),function(t,e,n,r){return ct(i=>function(t,e,n,r,i){return new Wk(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(O(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Fn(m=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:m.urlAfterRedirects})}),function(t,e,n,r,i){return Et(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const a=new uL(t,e,n,r,i,o).recognize();return null===a?Tw(new sL):Ce(a)}catch(a){return Tw(a)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(O(a=>Object.assign(Object.assign({},o),{targetSnapshot:a}))))}(this.rootComponentType,this.config,m=>this.serializeUrl(m),this.paramsInheritanceStrategy,this.relativeLinkResolution),Fn(m=>{"eager"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(m.urlAfterRedirects,m),this.browserUrlTree=m.urlAfterRedirects);const _=new U1(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);r.next(_)}));if(f&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_,extractedUrl:C,source:R,restoredState:M,extras:j}=l,F=new Hp(_,this.serializeUrl(C),R,M);r.next(F);const q=aw(C,this.rootComponentType).snapshot;return Ce(Object.assign(Object.assign({},l),{targetSnapshot:q,urlAfterRedirects:C,extras:Object.assign(Object.assign({},j),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=l.rawUrl,this.browserUrlTree=l.urlAfterRedirects,l.resolve(null),kr}),rg(l=>{const{targetSnapshot:f,id:p,extractedUrl:m,rawUrl:_,extras:{skipLocationChange:C,replaceUrl:R}}=l;return this.hooks.beforePreactivation(f,{navigationId:p,appliedUrlTree:m,rawUrlTree:_,skipLocationChange:!!C,replaceUrl:!!R})}),Fn(l=>{const f=new B1(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(f)}),O(l=>Object.assign(Object.assign({},l),{guards:Gk(l.targetSnapshot,l.currentSnapshot,this.rootContexts)})),function(t,e){return Et(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return 0===a.length&&0===o.length?Ce(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return je(t).pipe(Et(i=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Ce(o.map(l=>{const f=qc(l,e,i);let p;if(function(t){return t&&Yi(t.canDeactivate)}(f))p=ri(f.canDeactivate(t,e,n,r));else{if(!Yi(f))throw new Error("Invalid CanDeactivate guard");p=ri(f(t,e,n,r))}return p.pipe(Ao())})).pipe(Tu()):Ce(!0)}(i.component,i.route,n,e,r)),Ao(i=>!0!==i,!0))}(a,r,i,t).pipe(Et(l=>l&&function(t){return"boolean"==typeof t}(l)?function(t,e,n,r){return je(e).pipe(Eu(i=>vu(function(t,e){return null!==t&&e&&e(new Q1(t)),Ce(!0)}(i.route.parent,r),function(t,e){return null!==t&&e&&e(new G1(t)),Ce(!0)}(i.route,r),function(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(a)).filter(a=>null!==a).map(a=>Ac(()=>Ce(a.guards.map(f=>{const p=qc(f,a.node,n);let m;if(function(t){return t&&Yi(t.canActivateChild)}(p))m=ri(p.canActivateChild(r,t));else{if(!Yi(p))throw new Error("Invalid CanActivateChild guard");m=ri(p(r,t))}return m.pipe(Ao())})).pipe(Tu())));return Ce(o).pipe(Tu())}(t,i.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Ce(r.map(o=>Ac(()=>{const a=qc(o,e,n);let l;if(function(t){return t&&Yi(t.canActivate)}(a))l=ri(a.canActivate(e,t));else{if(!Yi(a))throw new Error("Invalid CanActivate guard");l=ri(a(e,t))}return l.pipe(Ao())}))).pipe(Tu()):Ce(!0)}(t,i.route,n))),Ao(i=>!0!==i,!0))}(r,o,t,e):Ce(l)),O(l=>Object.assign(Object.assign({},n),{guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),Fn(l=>{if(xo(l.guardsResult)){const p=$p(`Redirecting to "${this.serializeUrl(l.guardsResult)}"`);throw p.url=l.guardsResult,p}const f=new H1(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(f)}),Lr(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,""),!1)),rg(l=>{if(l.guards.canActivateChecks.length)return Ce(l).pipe(Fn(f=>{const p=new $1(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(p)}),ct(f=>{let p=!1;return Ce(f).pipe(function(t,e){return Et(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ce(n);let o=0;return je(i).pipe(Eu(a=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Ce({});const o={};return je(i).pipe(Et(a=>function(t,e,n,r){const i=qc(t,e,r);return ri(i.resolve?i.resolve(e,n):i(e,n))}(t[a],e,n,r).pipe(Fn(l=>{o[a]=l}))),Bp(1),Et(()=>Object.keys(o).length===i.length?Ce(o):kr))}(t._resolve,t,e,r).pipe(O(o=>(t._resolvedData=o,t.data=Object.assign(Object.assign({},t.data),uw(t,n).resolve),null)))}(a.route,r,t,e)),Fn(()=>o++),Bp(1),Et(a=>o===i.length?Ce(n):kr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Fn({next:()=>p=!0,complete:()=>{p||(this.restoreHistory(f),this.cancelNavigationTransition(f,"At least one route resolver didn't emit any value."))}}))}),Fn(f=>{const p=new W1(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(p)}))}),rg(l=>{const{targetSnapshot:f,id:p,extractedUrl:m,rawUrl:_,extras:{skipLocationChange:C,replaceUrl:R}}=l;return this.hooks.afterPreactivation(f,{navigationId:p,appliedUrlTree:m,rawUrlTree:_,skipLocationChange:!!C,replaceUrl:!!R})}),O(l=>{const f=function(t,e,n){const r=Vc(t,e._root,n?n._root:void 0);return new sw(r,e)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return Object.assign(Object.assign({},l),{targetRouterState:f})}),Fn(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((t,e,n)=>O(r=>(new Rk(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),Fn({next(){o=!0},complete(){o=!0}}),function(t){return e=>e.lift(new L1(t))}(()=>{if(!o&&!a){const l=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,l)):this.cancelNavigationTransition(i,l)}this.currentNavigation=null}),zi(l=>{if(a=!0,function(t){return t&&t[qb]}(l)){const f=xo(l.url);f||(this.navigated=!0,this.restoreHistory(i,!0));const p=new Hb(i.id,this.serializeUrl(i.extractedUrl),l.message);r.next(p),f?setTimeout(()=>{const m=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),_={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Gc(i.source)};this.scheduleNavigation(m,"imperative",null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const f=new j1(i.id,this.serializeUrl(i.extractedUrl),l);r.next(f);try{i.resolve(this.errorHandler(l))}catch(p){i.reject(p)}}return kr}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:o,urlTree:a}=r,l={replaceUrl:!0};if(o){const f=Object.assign({},o);delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(l.state=f)}this.scheduleNavigation(a,i,o,l)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(n){var r;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(r=n.state)||void 0===r?void 0:r.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,r){if(!n)return!0;const i=r.urlTree.toString()===n.urlTree.toString();return r.transitionId!==n.transitionId||!i||!("hashchange"===r.source&&"popstate"===n.source||"popstate"===r.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){vw(n),this.config=n.map(tg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:f}=r,p=i||this.routerState.root,m=f?this.currentUrlTree.fragment:a;let _=null;switch(l){case"merge":_=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=o||null}return null!==_&&(_=this.removeEmptyProps(_)),function(t,e,n,r,i){if(0===n.length)return Zp(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new hw(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,a)=>{if("object"==typeof o&&null!=o){if(o.outlets){const l={};return vn(o.outlets,(f,p)=>{l[p]="string"==typeof f?f.split("/"):f}),[...i,{outlets:l}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===a?(o.split("/").forEach((l,f)=>{0==f&&"."===l||(0==f&&""===l?n=!0:".."===l?e++:""!=l&&i.push(l))}),i):[...i,o]},[]);return new hw(n,e,r)}(n);if(o.toRoot())return Zp(e.root,new tt([],{}),e,r,i);const a=function(t,e,n){if(t.isAbsolute)return new Jp(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const o=n.snapshot._urlSegment;return new Jp(o,o===e.root,0)}const r=jc(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Jp(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),l=a.processChildren?Uc(a.segmentGroup,a.index,o.commands):pw(a.segmentGroup,a.index,o.commands);return Zp(a.segmentGroup,l,e,r,i)}(p,this.currentUrlTree,n,_,null!=m?m:null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=xo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?Object.assign({},SL):!1===r?Object.assign({},IL):r,xo(n))return Zb(this.currentUrlTree,n,i);const o=this.parseUrl(n);return Zb(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Cu(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,o,a){var l,f;if(this.disposed)return Promise.resolve(!1);const p=this.getTransition(),m=Gc(r)&&p&&!Gc(p.source),R=(this.lastSuccessfulId===p.id||this.currentNavigation?p.rawUrl:p.urlAfterRedirects).toString()===n.toString();if(m&&R)return Promise.resolve(!0);let M,j,F;a?(M=a.resolve,j=a.reject,F=a.promise):F=new Promise((ue,me)=>{M=ue,j=me});const q=++this.navigationId;let $;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),$=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(l=this.browserPageId)&&void 0!==l?l:0:(null!==(f=this.browserPageId)&&void 0!==f?f:0)+1):$=0,this.setTransition({id:q,targetPageId:$,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:o,resolve:M,reject:j,promise:F,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),F.catch(ue=>Promise.reject(ue))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(n,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===a?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===a&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(a)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new Hb(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)(Y(cl),Y(Wp),Y(Gs),Y(fc),Y(it),Y(tc),Y(Do),Y(void 0))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();function Gc(t){return"imperative"!==t}let ag=(()=>{class t{constructor(n,r,i,o,a){this.parentContexts=n,this.location=r,this.resolver=i,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new cr,this.deactivateEvents=new cr,this.name=o||qe,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const a=(r=r||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),l=this.parentContexts.getOrCreateContext(this.name).children,f=new NL(n,l,this.location.injector);this.activated=this.location.createComponent(a,this.location.length,f),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(Ee(Gs),Ee(Rr),Ee(Hi),function(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Kg(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}}return null}(y(),t)}("name"),Ee(gh))},t.\u0275dir=jt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class NL{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===qs?this.route:e===Gs?this.childContexts:this.parent.get(e,n)}}class Fw{}class kw{preload(e,n){return Ce(null)}}let Lw=(()=>{class t{constructor(n,r,i,o,a){this.router=n,this.injector=o,this.preloadingStrategy=a,this.loader=new Pw(r,i,p=>n.triggerEvent(new $b(p)),p=>n.triggerEvent(new Wb(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Lr(n=>n instanceof Cu),Eu(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(ti);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const a=o._loadedConfig;i.push(this.processRoutes(a.module,a.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(n,o)):o.children&&i.push(this.processRoutes(n,o.children));return je(i).pipe(jr(),O(o=>{}))}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Ce(r._loadedConfig):this.loader.load(n.injector,r)).pipe(Et(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return t.\u0275fac=function(n){return new(n||t)(Y(Qn),Y(tc),Y(Do),Y(it),Y(Fw))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})(),ug=(()=>{class t{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Hp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Cu&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Qb&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new Qb(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(Y(Qn),Y(wb),Y(void 0))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();const Po=new et("ROUTER_CONFIGURATION"),Vw=new et("ROUTER_FORROOT_GUARD"),xL=[fc,{provide:Wp,useClass:tw},{provide:Qn,useFactory:function(t,e,n,r,i,o,a,l={},f,p){const m=new Qn(null,t,e,n,r,i,o,zb(a));return f&&(m.urlHandlingStrategy=f),p&&(m.routeReuseStrategy=p),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(l,m),l.enableTracing&&m.events.subscribe(_=>{var C,R;null===(C=console.group)||void 0===C||C.call(console,`Router Event: ${_.constructor.name}`),console.log(_.toString()),console.log(_),null===(R=console.groupEnd)||void 0===R||R.call(console)}),m},deps:[Wp,Gs,fc,it,tc,Do,ig,Po,[class{},new Nn],[class{},new Nn]]},Gs,{provide:qs,useFactory:function(t){return t.routerState.root},deps:[Qn]},{provide:tc,useClass:Sx},Lw,kw,class{preload(e,n){return n().pipe(zi(()=>Ce(null)))}},{provide:Po,useValue:{enableTracing:!1}}];function PL(){return new Xh("Router",Qn)}let jw=(()=>{class t{constructor(n,r){}static forRoot(n,r){return{ngModule:t,providers:[xL,Uw(n),{provide:Vw,useFactory:kL,deps:[[Qn,new Nn,new ji]]},{provide:Po,useValue:r||{}},{provide:Ws,useFactory:FL,deps:[Ro,[new as(mp),new Nn],Po]},{provide:ug,useFactory:OL,deps:[Qn,wb,Po]},{provide:Fw,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:kw},{provide:Xh,multi:!0,useFactory:PL},[lg,{provide:Us,multi:!0,useFactory:UL,deps:[lg]},{provide:Bw,useFactory:BL,deps:[lg]},{provide:gC,multi:!0,useExisting:Bw}]]}}static forChild(n){return{ngModule:t,providers:[Uw(n)]}}}return t.\u0275fac=function(n){return new(n||t)(Y(Vw,8),Y(Qn,8))},t.\u0275mod=jn({type:t}),t.\u0275inj=he({}),t})();function OL(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ug(t,e,n)}function FL(t,e,n={}){return n.useHash?new QP(t,e):new ob(t,e)}function kL(t){return"guarded"}function Uw(t){return[{provide:BD,multi:!0,useValue:t},{provide:ig,multi:!0,useValue:t}]}let lg=(()=>{class t{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new A}appInitializer(){return this.injector.get(HP,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(l=>r=l),o=this.injector.get(Qn),a=this.injector.get(Po);return"disabled"===a.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===a.initialNavigation||"enabledBlocking"===a.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?Ce(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(n){const r=this.injector.get(Po),i=this.injector.get(Lw),o=this.injector.get(ug),a=this.injector.get(Qn),l=this.injector.get(So);n===l.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&a.initialNavigation(),i.setUpPreloading(),o.init(),a.resetRootComponentType(l.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(Y(it))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();function UL(t){return t.appInitializer.bind(t)}function BL(t){return t.bootstrapListener.bind(t)}const Bw=new et("Router Initializer"),$L=[];let WL=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=jn({type:t}),t.\u0275inj=he({imports:[[jw.forRoot($L)],jw]}),t})();function cg(t,e){return new _e(e?n=>e.schedule(QL,0,{error:t,subscriber:n}):n=>n.error(t))}function QL({error:t,subscriber:e}){e.error(t)}function dg(t,e,n,r){return ye(n)&&(r=n,n=void 0),r?dg(t,e,n).pipe(O(i=>yt(i)?r(...i):r(i))):new _e(i=>{Hw(t,e,function(a){i.next(arguments.length>1?Array.prototype.slice.call(arguments):a)},i,n)})}function Hw(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const a=t;t.addEventListener(e,n,i),o=()=>a.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const a=t;t.on(e,n),o=()=>a.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const a=t;t.addListener(e,n),o=()=>a.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let a=0,l=t.length;a<l;a++)Hw(t[a],e,n,r,i)}r.add(o)}const Oo=new _e(Si);class KL extends Z{constructor(e,n){super()}schedule(e,n=0){return this}}class fg extends KL{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return n;clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,n=this.scheduler,r=n.actions,i=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&r.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null}}let $w=(()=>{class t{constructor(n,r=t.now){this.SchedulerAction=n,this.now=r}schedule(n,r=0,i){return new this.SchedulerAction(this,n).schedule(i,r)}}return t.now=()=>Date.now(),t})();class ii extends $w{constructor(e,n=$w.now){super(e,()=>ii.delegate&&ii.delegate!==this?ii.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,n=0,r){return ii.delegate&&ii.delegate!==this?ii.delegate.schedule(e,n,r):super.schedule(e,n,r)}flush(e){const{actions:n}=this;if(this.active)return void n.push(e);let r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this.active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const hg=new ii(fg),ZL=hg;class qn{constructor(e,n,r){this.kind=e,this.value=n,this.error=r,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,n,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return n&&n(this.error);case"C":return r&&r()}}accept(e,n,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,n,r)}toObservable(){switch(this.kind){case"N":return Ce(this.value);case"E":return cg(this.error);case"C":return Rc()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new qn("N",e):qn.undefinedValueNotification}static createError(e){return new qn("E",void 0,e)}static createComplete(){return qn.completeNotification}}qn.completeNotification=new qn("C"),qn.undefinedValueNotification=new qn("N",void 0);class eV{constructor(e,n){this.delay=e,this.scheduler=n}call(e,n){return n.subscribe(new pg(e,this.delay,this.scheduler))}}class pg extends X{constructor(e,n,r){super(e),this.delay=n,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const n=e.source,r=n.queue,i=e.scheduler,o=e.destination;for(;r.length>0&&r[0].time-i.now()<=0;)r.shift().notification.observe(o);if(r.length>0){const a=Math.max(0,r[0].time-i.now());this.schedule(e,a)}else this.unsubscribe(),n.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(pg.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const n=this.scheduler,r=new tV(n.now()+this.delay,e);this.queue.push(r),!1===this.active&&this._schedule(n)}_next(e){this.scheduleNotification(qn.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(qn.createComplete()),this.unsubscribe()}}class tV{constructor(e,n){this.time=e,this.notification=n}}const Mu="Service workers are disabled or not supported by this browser";class zc{constructor(e){if(this.serviceWorker=e,e){const r=dg(e,"controllerchange").pipe(O(()=>e.controller)),o=vu(Ac(()=>Ce(e.controller)),r);this.worker=o.pipe(Lr(m=>!!m)),this.registration=this.worker.pipe(ct(()=>e.getRegistration()));const p=dg(e,"message").pipe(O(m=>m.data)).pipe(Lr(m=>m&&m.type)).pipe(st(new A));p.connect(),this.events=p}else this.worker=this.events=this.registration=Ac(()=>cg(new Error("Service workers are disabled or not supported by this browser")))}postMessage(e,n){return this.worker.pipe(Di(1),Fn(r=>{r.postMessage(Object.assign({action:e},n))})).toPromise().then(()=>{})}postMessageWithStatus(e,n,r){const i=this.waitForStatus(r),o=this.postMessage(e,n);return Promise.all([i,o]).then(()=>{})}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){return this.events.pipe(Lr(r=>r.type===e))}nextEventOfType(e){return this.eventsOfType(e).pipe(Di(1))}waitForStatus(e){return this.eventsOfType("STATUS").pipe(Lr(n=>n.nonce===e),Di(1),O(n=>{if(!n.status)throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Ww=(()=>{class t{constructor(n){if(this.sw=n,this.subscriptionChanges=new A,!n.isEnabled)return this.messages=Oo,this.notificationClicks=Oo,void(this.subscription=Oo);this.messages=this.sw.eventsOfType("PUSH").pipe(O(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(O(i=>i.data)),this.pushManager=this.sw.registration.pipe(O(i=>i.pushManager));const r=this.pushManager.pipe(ct(i=>i.getSubscription()));this.subscription=k(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(n){if(!this.sw.isEnabled)return Promise.reject(new Error(Mu));const r={userVisibleOnly:!0};let i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return r.applicationServerKey=o,this.pushManager.pipe(ct(a=>a.subscribe(r)),Di(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Di(1),ct(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Mu))}decodeBase64(n){return atob(n)}}return t.\u0275fac=function(n){return new(n||t)(Y(zc))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})(),rV=(()=>{class t{constructor(n){if(this.sw=n,!n.isEnabled)return this.available=Oo,this.activated=Oo,void(this.unrecoverable=Oo);this.available=this.sw.eventsOfType("UPDATE_AVAILABLE"),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Mu));const n=this.sw.generateNonce();return this.sw.postMessageWithStatus("CHECK_FOR_UPDATES",{statusNonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Mu));const n=this.sw.generateNonce();return this.sw.postMessageWithStatus("ACTIVATE_UPDATE",{statusNonce:n},n)}}return t.\u0275fac=function(n){return new(n||t)(Y(zc))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})();class gg{}const Qw=new et("NGSW_REGISTER_SCRIPT");function iV(t,e,n,r){return()=>{if(!Cb(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)o=n.registrationStrategy();else{const[l,...f]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":o=Ce(null);break;case"registerWithDelay":o=qw(+f[0]||0);break;case"registerWhenStable":o=f[0]?k(Gw(t),qw(+f[0])):Gw(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(Ct).runOutsideAngular(()=>o.pipe(Di(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(l=>console.error("Service worker registration failed with:",l))))}}function qw(t){return Ce(null).pipe(function(t,e=ZL){const r=function(t){return t instanceof Date&&!isNaN(+t)}(t)?+t-e.now():Math.abs(t);return i=>i.lift(new eV(r,e))}(t))}function Gw(t){return t.get(So).isStable.pipe(Lr(n=>n))}function oV(t,e){return new zc(Cb(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}let sV=(()=>{class t{static register(n,r={}){return{ngModule:t,providers:[{provide:Qw,useValue:n},{provide:gg,useValue:r},{provide:zc,useFactory:oV,deps:[gg,dr]},{provide:Us,useFactory:iV,deps:[it,Qw,gg,dr],multi:!0}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=jn({type:t}),t.\u0275inj=he({providers:[Ww,rV]}),t})();var aV=Me(395),oi=Me.n(aV);let uV=1;const lV=Promise.resolve(),Yc={};function zw(t){return t in Yc&&(delete Yc[t],!0)}const Yw={setImmediate(t){const e=uV++;return Yc[e]=!0,lV.then(()=>zw(e)&&t()),e},clearImmediate(t){zw(t)}},mg=new class extends ii{flush(e){this.active=!0,this.scheduled=void 0;const{actions:n}=this;let r,i=-1,o=n.length;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while(++i<o&&(e=n.shift()));if(this.active=!1,r){for(;++i<o&&(e=n.shift());)e.unsubscribe();throw r}}}(class extends fg{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,r=0){return null!==r&&r>0?super.requestAsyncId(e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=Yw.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,n,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(e,n,r);0===e.actions.length&&(Yw.clearImmediate(n),e.scheduled=void 0)}});class Kc extends _e{constructor(e,n=0,r=mg){super(),this.source=e,this.delayTime=n,this.scheduler=r,(!function(t){return!yt(t)&&t-parseFloat(t)+1>=0}(n)||n<0)&&(this.delayTime=0),(!r||"function"!=typeof r.schedule)&&(this.scheduler=mg)}static create(e,n=0,r=mg){return new Kc(e,n,r)}static dispatch(e){const{source:n,subscriber:r}=e;return this.add(n.subscribe(r))}_subscribe(e){return this.scheduler.schedule(Kc.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function Ki(t,e=0){return function(r){return r.lift(new hV(t,e))}}class hV{constructor(e,n){this.scheduler=e,this.delay=n}call(e,n){return new Kc(n,this.delay,this.scheduler).subscribe(e)}}function Ri(t,e=0){return function(r){return r.lift(new pV(t,e))}}class pV{constructor(e,n=0){this.scheduler=e,this.delay=n}call(e,n){return n.subscribe(new Zc(e,this.scheduler,this.delay))}}class Zc extends X{constructor(e,n,r=0){super(e),this.scheduler=n,this.delay=r}static dispatch(e){const{notification:n,destination:r}=e;n.observe(r),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(Zc.dispatch,this.delay,new gV(e,this.destination)))}_next(e){this.scheduleMessage(qn.createNext(e))}_error(e){this.scheduleMessage(qn.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(qn.createComplete()),this.unsubscribe()}}class gV{constructor(e,n){this.notification=e,this.destination=n}}const Kw=new class extends ii{}(class extends fg{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(e,n,r):e.flush(this)}}),_V=Kw;class vV extends A{constructor(e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new EV(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;let a;if(this.closed)throw new v;if(this.isStopped||this.hasError?a=Z.EMPTY:(this.observers.push(e),a=new D(this,e)),i&&e.add(e=new Zc(e,i)),n)for(let l=0;l<o&&!e.closed;l++)e.next(r[l]);else for(let l=0;l<o&&!e.closed;l++)e.next(r[l].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),a}_getNow(){return(this.scheduler||_V).now()}_trimBufferThenGetEvents(){const e=this._getNow(),n=this._bufferSize,r=this._windowTime,i=this._events,o=i.length;let a=0;for(;a<o&&!(e-i[a].time<r);)a++;return o>n&&(a=Math.max(a,o-n)),a>0&&i.splice(0,a),i}}class EV{constructor(e,n){this.time=e,this.value=n}}function Zw(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},i=>i.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,a,o=0,l=!1,f=!1;return function(m){let _;o++,!i||l?(l=!1,i=new vV(t,e,r),_=i.subscribe(this),a=m.subscribe({next(C){i.next(C)},error(C){l=!0,i.error(C)},complete(){f=!0,a=void 0,i.complete()}}),f&&(a=void 0)):_=i.subscribe(this),this.add(()=>{o--,_.unsubscribe(),_=void 0,a&&!f&&n&&0===o&&(a.unsubscribe(),a=void 0,i=void 0)})}}(r))}function yg(){}class Jw{constructor(e,n=Kw){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(a){i.runGuarded(()=>{e.apply(this,[a])})},n,r)}}class wV{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yg,{},yg,yg)),n.pipe(Fn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class _g{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new Jw(Zone.current)),this.insideAngular=e.run(()=>new Jw(Zone.current,hg))}}function Xw(t){return function(n){return(n=n.lift(new wV(t.ngZone))).pipe(Ki(t.outsideAngular),Ri(t.insideAngular))}}const DV=["ngOnDestroy"],eD=(t,e,n)=>new Proxy(t,{get:(r,i)=>n.runOutsideAngular(()=>{if(t[i])return t[i];if(DV.includes(i))return()=>{};const o=e.toPromise().then(a=>{const l=a&&a[i];return"function"==typeof l?l.bind(a):l&&l.then?l.then(f=>n.run(()=>f)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,f)=>o.then(p=>p&&p(...f))})})}),Zi=new et("angularfire2.app.options"),Ji=new et("angularfire2.app.nameOrConfig"),IV=new Ya("6.0.3");function Jc(t,e,n){const i="object"==typeof n&&n||{};return i.name=i.name||"string"==typeof n&&n||"[DEFAULT]",oi().apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>oi().initializeApp(t,i))}const TV={provide:class{},useFactory:Jc,deps:[Zi,Ct,[new Nn,Ji]]};let tD=(()=>{class t{constructor(n){oi().registerVersion("angularfire",IV.full,n.toString()),oi().registerVersion("angular",ph.full)}static initializeApp(n,r){return{ngModule:t,providers:[{provide:Zi,useValue:n},{provide:Ji,useValue:r}]}}}return t.\u0275fac=function(n){return new(n||t)(Y(dr))},t.\u0275mod=jn({type:t}),t.\u0275inj=he({providers:[TV]}),t})(),nD=(()=>{class t{constructor(n,r,i,o){const a=new _g(o),l=Ce(void 0).pipe(Ki(a.outsideAngular),Ri(a.insideAngular),ct(()=>bb(i)?kr:Me.e(698).then(Me.bind(Me,698))),O(()=>Jc(n,o,r)),O(p=>p.messaging()),Zw({bufferSize:1,refCount:!1}));this.requestPermission=l.pipe(Ki(a.outsideAngular),Ri(a.insideAngular),ct(p=>oi().messaging.isSupported()?p.requestPermission():cg("Not supported."))),this.getToken=l.pipe(Ki(a.outsideAngular),Ri(a.insideAngular),ct(p=>oi().messaging.isSupported()&&"granted"===Notification.permission?p.getToken():kr),Mc(null));const f=l.pipe(Ki(a.outsideAngular),Ri(a.insideAngular),ct(p=>oi().messaging.isSupported()?new _e(m=>p.onTokenRefresh(m.next,m.error,m.complete)):kr),function(t,e){return ct(()=>t)}(this.getToken));return this.tokenChanges=l.pipe(Ki(a.outsideAngular),Ri(a.insideAngular),ct(p=>oi().messaging.isSupported()?vu(this.getToken,f):kr)),this.messages=l.pipe(Ki(a.outsideAngular),Ri(a.insideAngular),ct(p=>oi().messaging.isSupported()?new _e(m=>p.onMessage(_=>m.next(_),_=>m.error(_),()=>m.complete())):kr)),this.requestToken=Ce(void 0).pipe(ct(()=>this.requestPermission),zi(()=>Ce(null)),Et(()=>this.tokenChanges)),this.deleteToken=p=>l.pipe(Ki(a.outsideAngular),Ri(a.insideAngular),ct(m=>m.deleteToken(p)),Mc(!1)),eD(this,l,o)}}return t.\u0275fac=function(n){return new(n||t)(Y(Zi),Y(Ji,8),Y(dr),Y(Ct))},t.\u0275prov=Re({factory:function(){return new t(Y(Zi),Y(Ji,8),Y(dr),Y(Ct))},token:t,providedIn:"any"}),t})(),RV=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=jn({type:t}),t.\u0275inj=he({providers:[nD]}),t})(),rD=(()=>{class t{constructor(n){this.angularFireMessaging=n,this.currentMessage=new pr(null),this.angularFireMessaging.messages.subscribe(r=>{r.onMessage=r.onMessage.bind(r),r.onTokenRefresh=r.onTokenRefresh.bind(r)})}requestPermission(){this.angularFireMessaging.requestToken.subscribe(n=>{console.log(n)},n=>{console.error("Unable to get permission to notify.",n)})}receiveMessage(){this.angularFireMessaging.messages.subscribe(n=>{console.log("new message received. ",n),this.currentMessage.next(n)})}}return t.\u0275fac=function(n){return new(n||t)(Y(nD))},t.\u0275prov=Re({token:t,factory:t.\u0275fac}),t})(),AV=(()=>{class t{constructor(n,r){this.swPush=n,this.messagingService=r,this.title="Angular-pwa",this.VAPID_PUBLIC_KEY="BJCGXv_fXNwd5cg_4-TrIx1ceJBpQidBj7eHthJdwlp4bL-6AYzyfWR0HUZa5lsCF5O3mWTKlnTPjHooVs8QpjE"}ngOnInit(){this.messagingService.requestPermission(),this.messagingService.receiveMessage(),this.message=this.messagingService.currentMessage,console.log("Fire base message "+JSON.stringify(this.message)),this.subscribeToNotifications(),console.log("in on init"),this.swPush.messages.subscribe(r=>{console.log("message by raj 01 "+JSON.stringify(r)),this.x=r,alert("Title: "+this.x.notification.title)}),this.swPush.notificationClicks.subscribe(({})=>{alert("notificationClicks")})}subscribeToNotifications(){alert("noti"),this.swPush.requestSubscription({serverPublicKey:this.VAPID_PUBLIC_KEY}).then(n=>{console.log("Working : raj sir",n),alert(JSON.stringify(n))}).catch(n=>console.error("Could not subscribe to notifications",n))}}return t.\u0275fac=function(n){return new(n||t)(Ee(Ww),Ee(rD))},t.\u0275cmp=Ho({type:t,selectors:[["app-root"]],decls:8,vars:5,consts:[[1,"button","button-primary",3,"click"]],template:function(n,r){1&n&&(Zf(0,"button",0),$a("click",function(){return r.subscribeToNotifications()}),rh(1," Subscribe\n"),Jf(),Ha(2,"hr"),Ha(3,"hr"),rh(4),Nh(5,"json"),Nh(6,"async"),Ha(7,"router-outlet")),2&n&&(function(t){hy(h(),d(),An()+t,te())}(4),Fl(" ",Mh(5,1,Mh(6,3,r.message))," "))},directives:[ag],pipes:[_b,Tp],styles:[""]}),t})();class MV{constructor(e,n){this.compare=e,this.keySelector=n}call(e,n){return n.subscribe(new xV(e,this.compare,this.keySelector))}}class xV extends X{constructor(e,n,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}compare(e,n){return e===n}_next(e){let n;try{const{keySelector:i}=this;n=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,n)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=n,this.destination.next(e))}}class OV{constructor(e,n){this.observables=e,this.project=n}call(e,n){return n.subscribe(new FV(e,this.observables,this.project))}}class FV extends Lb{constructor(e,n,r){super(e),this.observables=n,this.project=r,this.toRespond=[];const i=n.length;this.values=new Array(i);for(let o=0;o<i;o++)this.toRespond.push(o);for(let o=0;o<i;o++)this.add(Vb(this,n[o],void 0,o))}notifyNext(e,n,r){this.values[r]=n;const i=this.toRespond;if(i.length>0){const o=i.indexOf(r);-1!==o&&i.splice(o,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const n=[e,...this.values];this.project?this._tryProject(n):this.destination.next(n)}}_tryProject(e){let n;try{n=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}class LV{constructor(e){this.predicate=e}call(e,n){return n.subscribe(new VV(e,this.predicate))}}class VV extends X{constructor(e,n){super(e),this.predicate=n,this.skipping=!0,this.index=0}_next(e){const n=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||n.next(e)}tryCallPredicate(e){try{const n=this.predicate(e,this.index++);this.skipping=Boolean(n)}catch(n){this.destination.error(n)}}}var iD=Me(614);function oD(t){return null==t}function sD(t){return"function"==typeof t.set}function aD(t,e){return sD(e)?e:t.ref(e)}function uD(t,e){if(function(t){return"string"==typeof t}(t))return e.stringCase();if(sD(t))return e.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function xu(t,e,n="on",r=hg){return new _e(i=>{let o=null;return o=t[n](e,(a,l)=>{r.schedule(()=>{i.next({snapshot:a,prevKey:l})}),"once"===n&&r.schedule(()=>i.complete())},a=>{r.schedule(()=>i.error(a))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(O(i=>{const{snapshot:o,prevKey:a}=i;let l=null;return o.exists()&&(l=o.key),{type:e,payload:o,prevKey:a,key:l}}),Nt())}function lD(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function $V(t,e){const{payload:n,prevKey:r,key:i}=e,o=lD(t,i),a=function(t,e){if(oD(e))return 0;{const n=lD(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let l=null;e.payload.forEach(f=>{const p={payload:f,type:"value",prevKey:l,key:f.key};return l=f.key,t=[...t,p],!1})}return t;case"child_added":if(o>-1){const l=t[o-1];(l&&l.key||null)!==r&&(t=t.filter(f=>f.payload.key!==n.key)).splice(a,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(a,0,e)}return t;case"child_removed":return t.filter(l=>l.payload.key!==n.key);case"child_changed":return t.map(l=>l.payload.key===i?e:l);case"child_moved":if(o>-1){const l=t.splice(o,1)[0];return(t=t.slice()).splice(a,0,l),t}return t;default:return t}}function cD(t){return(oD(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function dD(t,e,n){return function(t,e,n){return xu(t,"value","once",n).pipe(ct(r=>{const i=[Ce(r)];return e.forEach(o=>i.push(xu(t,o,"on",n))),k(...i).pipe(Nc($V,[]))}),n=>n.lift(new MV(void 0,void 0)))}(t,e=cD(e),n)}function fD(t,e,n){return k(...(e=cD(e)).map(i=>xu(t,i,"on",n)))}function hD(t,e){return function(r,i){return uD(r,{stringCase:()=>t.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function GV(t){return function(n){return n?uD(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function pD(t,e){return function(){return xu(t,"value","on",e)}}const gD=new et("angularfire2.realtimeDatabaseURL");let KV=(()=>{class t{constructor(n,r,i,o,a){this.schedulers=new _g(a),this.keepUnstableUntilFirst=Xw(this.schedulers),this.database=a.runOutsideAngular(()=>{const l=Jc(n,a,r);return iD.registerDatabase&&(0,iD.registerDatabase)(oi()),l.database(i||void 0)})}list(n,r){const i=aD(this.database,n);let o=i;return r&&(o=r(i)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:hD(r,"update"),set:hD(r,"set"),push:i=>r.push(i),remove:GV(r),snapshotChanges:i=>dD(t,i,n).pipe(e.keepUnstableUntilFirst),stateChanges:i=>fD(t,i,n).pipe(e.keepUnstableUntilFirst),auditTrail:i=>function(t,e,n){return function(t,e,n){return function(t,e){return xu(t,"value","on",e).pipe(O(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new OV(t,n))}}(e),O(([i,o])=>{const a=i.lastKeyToLoad,l=o.map(f=>f.key);return{actions:o,lastKeyToLoad:a,loadedKeys:l}}),function(t){return e=>e.lift(new LV(t))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),O(i=>i.actions))}(t,fD(t,e).pipe(Nc((i,o)=>[...i,o],[])),n)}(t,i,n).pipe(e.keepUnstableUntilFirst),valueChanges:i=>dD(t,i,n).pipe(O(a=>a.map(l=>l.payload.val())),e.keepUnstableUntilFirst)}}(o,this)}object(n){return function(t,e){return{query:t,snapshotChanges:()=>pD(t,e.schedulers.outsideAngular)().pipe(e.keepUnstableUntilFirst),update:n=>t.ref.update(n),set:n=>t.ref.set(n),remove:()=>t.ref.remove(),valueChanges:()=>pD(t,e.schedulers.outsideAngular)().pipe(e.keepUnstableUntilFirst,O(r=>r.payload.exists()?r.payload.val():null))}}(aD(this.database,n),this)}createPushId(){return this.database.ref().push().key}}return t.\u0275fac=function(n){return new(n||t)(Y(Zi),Y(Ji,8),Y(gD,8),Y(dr),Y(Ct))},t.\u0275prov=Re({factory:function(){return new t(Y(Zi),Y(Ji,8),Y(gD,8),Y(dr),Y(Ct))},token:t,providedIn:"any"}),t})(),ZV=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=jn({type:t}),t.\u0275inj=he({providers:[KV]}),t})(),JV=(()=>{class t{constructor(n,r,i,o){const a=new _g(o),l=Xw(a),f=Ce(void 0).pipe(Ri(a.outsideAngular),ct(()=>o.runOutsideAngular(()=>Me.e(952).then(Me.bind(Me,952)))),O(()=>Jc(n,o,r)),O(p=>o.runOutsideAngular(()=>p.auth())),Zw({bufferSize:1,refCount:!1}));return bb(i)?this.authState=this.user=this.idToken=this.idTokenResult=Ce(null):(f.pipe(Ao()).subscribe(),this.authState=f.pipe(ct(m=>m.getRedirectResult().then(()=>m)),ct(m=>o.runOutsideAngular(()=>new _e(m.onAuthStateChanged.bind(m)))),l),this.user=f.pipe(ct(m=>m.getRedirectResult().then(()=>m)),ct(m=>o.runOutsideAngular(()=>new _e(m.onIdTokenChanged.bind(m)))),l),this.idToken=this.user.pipe(ct(m=>m?je(m.getIdToken()):Ce(null))),this.idTokenResult=this.user.pipe(ct(m=>m?je(m.getIdTokenResult()):Ce(null)))),eD(this,f,o)}}return t.\u0275fac=function(n){return new(n||t)(Y(Zi),Y(Ji,8),Y(dr),Y(Ct))},t.\u0275prov=Re({factory:function(){return new t(Y(Zi),Y(Ji,8),Y(dr),Y(Ct))},token:t,providedIn:"any"}),t})(),XV=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=jn({type:t}),t.\u0275inj=he({providers:[JV]}),t})();const vg_firebaseConfig={apiKey:"AIzaSyA0jcIfBeY58fXPCiD6NRccp0N2dmBeqtc",authDomain:"sk-web-e14b2.firebaseapp.com",projectId:"sk-web-e14b2",storageBucket:"sk-web-e14b2.appspot.com",messagingSenderId:"255843477465",appId:"1:255843477465:web:eee64a50a32fd9b8869bc8",measurementId:"G-N2TB24J4PP"};let e2=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=jn({type:t,bootstrap:[AV]}),t.\u0275inj=he({providers:[rD,Tp],imports:[[t1,tD,ZV,XV,RV,tD.initializeApp(vg_firebaseConfig),WL,sV.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),t})();(function(){if(bC)throw new Error("Cannot enable prod mode after platform setup.");CC=!1})(),XF().bootstrapModule(e2).catch(t=>console.error(t))},796:(fn,K,Me)=>{"use strict";Me.r(K),Me.d(K,{__extends:()=>ie,__assign:()=>I,__rest:()=>fe,__decorate:()=>rt,__param:()=>yt,__metadata:()=>bt,__awaiter:()=>Gt,__generator:()=>Te,__createBinding:()=>Z,__exportStar:()=>pe,__values:()=>ne,__read:()=>J,__spread:()=>X,__spreadArrays:()=>Ze,__await:()=>xe,__asyncGenerator:()=>ot,__asyncDelegator:()=>dt,__asyncValues:()=>ft,__makeTemplateObject:()=>Ge,__importStar:()=>ze,__importDefault:()=>_e,__classPrivateFieldGet:()=>ht,__classPrivateFieldSet:()=>Je});var ye=function(v,D){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,A){b.__proto__=A}||function(b,A){for(var N in A)A.hasOwnProperty(N)&&(b[N]=A[N])})(v,D)};function ie(v,D){function b(){this.constructor=v}ye(v,D),v.prototype=null===D?Object.create(D):(b.prototype=D.prototype,new b)}var I=function(){return(I=Object.assign||function(D){for(var b,A=1,N=arguments.length;A<N;A++)for(var T in b=arguments[A])Object.prototype.hasOwnProperty.call(b,T)&&(D[T]=b[T]);return D}).apply(this,arguments)};function fe(v,D){var b={};for(var A in v)Object.prototype.hasOwnProperty.call(v,A)&&D.indexOf(A)<0&&(b[A]=v[A]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(A=Object.getOwnPropertySymbols(v);N<A.length;N++)D.indexOf(A[N])<0&&Object.prototype.propertyIsEnumerable.call(v,A[N])&&(b[A[N]]=v[A[N]])}return b}function rt(v,D,b,A){var O,N=arguments.length,T=N<3?D:null===A?A=Object.getOwnPropertyDescriptor(D,b):A;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)T=Reflect.decorate(v,D,b,A);else for(var z=v.length-1;z>=0;z--)(O=v[z])&&(T=(N<3?O(T):N>3?O(D,b,T):O(D,b))||T);return N>3&&T&&Object.defineProperty(D,b,T),T}function yt(v,D){return function(b,A){D(b,A,v)}}function bt(v,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,D)}function Gt(v,D,b,A){return new(b||(b=Promise))(function(T,O){function z(ee){try{U(A.next(ee))}catch(le){O(le)}}function Ie(ee){try{U(A.throw(ee))}catch(le){O(le)}}function U(ee){ee.done?T(ee.value):function(T){return T instanceof b?T:new b(function(O){O(T)})}(ee.value).then(z,Ie)}U((A=A.apply(v,D||[])).next())})}function Te(v,D){var A,N,T,O,b={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return O={next:z(0),throw:z(1),return:z(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function z(U){return function(ee){return function(U){if(A)throw new TypeError("Generator is already executing.");for(;b;)try{if(A=1,N&&(T=2&U[0]?N.return:U[0]?N.throw||((T=N.return)&&T.call(N),0):N.next)&&!(T=T.call(N,U[1])).done)return T;switch(N=0,T&&(U=[2&U[0],T.value]),U[0]){case 0:case 1:T=U;break;case 4:return b.label++,{value:U[1],done:!1};case 5:b.label++,N=U[1],U=[0];continue;case 7:U=b.ops.pop(),b.trys.pop();continue;default:if(!(T=(T=b.trys).length>0&&T[T.length-1])&&(6===U[0]||2===U[0])){b=0;continue}if(3===U[0]&&(!T||U[1]>T[0]&&U[1]<T[3])){b.label=U[1];break}if(6===U[0]&&b.label<T[1]){b.label=T[1],T=U;break}if(T&&b.label<T[2]){b.label=T[2],b.ops.push(U);break}T[2]&&b.ops.pop(),b.trys.pop();continue}U=D.call(v,b)}catch(ee){U=[6,ee],N=0}finally{A=T=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([U,ee])}}}function Z(v,D,b,A){void 0===A&&(A=b),v[A]=D[b]}function pe(v,D){for(var b in v)"default"!==b&&!D.hasOwnProperty(b)&&(D[b]=v[b])}function ne(v){var D="function"==typeof Symbol&&Symbol.iterator,b=D&&v[D],A=0;if(b)return b.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&A>=v.length&&(v=void 0),{value:v&&v[A++],done:!v}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(v,D){var b="function"==typeof Symbol&&v[Symbol.iterator];if(!b)return v;var N,O,A=b.call(v),T=[];try{for(;(void 0===D||D-- >0)&&!(N=A.next()).done;)T.push(N.value)}catch(z){O={error:z}}finally{try{N&&!N.done&&(b=A.return)&&b.call(A)}finally{if(O)throw O.error}}return T}function X(){for(var v=[],D=0;D<arguments.length;D++)v=v.concat(J(arguments[D]));return v}function Ze(){for(var v=0,D=0,b=arguments.length;D<b;D++)v+=arguments[D].length;var A=Array(v),N=0;for(D=0;D<b;D++)for(var T=arguments[D],O=0,z=T.length;O<z;O++,N++)A[N]=T[O];return A}function xe(v){return this instanceof xe?(this.v=v,this):new xe(v)}function ot(v,D,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,A=b.apply(v,D||[]),T=[];return N={},O("next"),O("throw"),O("return"),N[Symbol.asyncIterator]=function(){return this},N;function O(Q){A[Q]&&(N[Q]=function(de){return new Promise(function(nt,zt){T.push([Q,de,nt,zt])>1||z(Q,de)})})}function z(Q,de){try{!function(Q){Q.value instanceof xe?Promise.resolve(Q.value.v).then(U,ee):le(T[0][2],Q)}(A[Q](de))}catch(nt){le(T[0][3],nt)}}function U(Q){z("next",Q)}function ee(Q){z("throw",Q)}function le(Q,de){Q(de),T.shift(),T.length&&z(T[0][0],T[0][1])}}function dt(v){var D,b;return D={},A("next"),A("throw",function(N){throw N}),A("return"),D[Symbol.iterator]=function(){return this},D;function A(N,T){D[N]=v[N]?function(O){return(b=!b)?{value:xe(v[N](O)),done:"return"===N}:T?T(O):O}:T}}function ft(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,D=v[Symbol.asyncIterator];return D?D.call(v):(v=ne(v),b={},A("next"),A("throw"),A("return"),b[Symbol.asyncIterator]=function(){return this},b);function A(T){b[T]=v[T]&&function(O){return new Promise(function(z,Ie){!function(T,O,z,Ie){Promise.resolve(Ie).then(function(U){T({value:U,done:z})},O)}(z,Ie,(O=v[T](O)).done,O.value)})}}}function Ge(v,D){return Object.defineProperty?Object.defineProperty(v,"raw",{value:D}):v.raw=D,v}function ze(v){if(v&&v.__esModule)return v;var D={};if(null!=v)for(var b in v)Object.hasOwnProperty.call(v,b)&&(D[b]=v[b]);return D.default=v,D}function _e(v){return v&&v.__esModule?v:{default:v}}function ht(v,D){if(!D.has(v))throw new TypeError("attempted to get private field on non-instance");return D.get(v)}function Je(v,D,b){if(!D.has(v))throw new TypeError("attempted to set private field on non-instance");return D.set(v,b),b}},385:(fn,K,Me)=>{"use strict";Me.r(K),Me.d(K,{__extends:()=>ie,__assign:()=>I,__rest:()=>fe,__decorate:()=>rt,__param:()=>yt,__metadata:()=>bt,__awaiter:()=>Gt,__generator:()=>Te,__createBinding:()=>Z,__exportStar:()=>pe,__values:()=>ne,__read:()=>J,__spread:()=>X,__spreadArrays:()=>Ze,__await:()=>xe,__asyncGenerator:()=>ot,__asyncDelegator:()=>dt,__asyncValues:()=>ft,__makeTemplateObject:()=>Ge,__importStar:()=>ze,__importDefault:()=>_e,__classPrivateFieldGet:()=>ht,__classPrivateFieldSet:()=>Je});var ye=function(v,D){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,A){b.__proto__=A}||function(b,A){for(var N in A)A.hasOwnProperty(N)&&(b[N]=A[N])})(v,D)};function ie(v,D){function b(){this.constructor=v}ye(v,D),v.prototype=null===D?Object.create(D):(b.prototype=D.prototype,new b)}var I=function(){return(I=Object.assign||function(D){for(var b,A=1,N=arguments.length;A<N;A++)for(var T in b=arguments[A])Object.prototype.hasOwnProperty.call(b,T)&&(D[T]=b[T]);return D}).apply(this,arguments)};function fe(v,D){var b={};for(var A in v)Object.prototype.hasOwnProperty.call(v,A)&&D.indexOf(A)<0&&(b[A]=v[A]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(A=Object.getOwnPropertySymbols(v);N<A.length;N++)D.indexOf(A[N])<0&&Object.prototype.propertyIsEnumerable.call(v,A[N])&&(b[A[N]]=v[A[N]])}return b}function rt(v,D,b,A){var O,N=arguments.length,T=N<3?D:null===A?A=Object.getOwnPropertyDescriptor(D,b):A;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)T=Reflect.decorate(v,D,b,A);else for(var z=v.length-1;z>=0;z--)(O=v[z])&&(T=(N<3?O(T):N>3?O(D,b,T):O(D,b))||T);return N>3&&T&&Object.defineProperty(D,b,T),T}function yt(v,D){return function(b,A){D(b,A,v)}}function bt(v,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,D)}function Gt(v,D,b,A){return new(b||(b=Promise))(function(T,O){function z(ee){try{U(A.next(ee))}catch(le){O(le)}}function Ie(ee){try{U(A.throw(ee))}catch(le){O(le)}}function U(ee){ee.done?T(ee.value):function(T){return T instanceof b?T:new b(function(O){O(T)})}(ee.value).then(z,Ie)}U((A=A.apply(v,D||[])).next())})}function Te(v,D){var A,N,T,O,b={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return O={next:z(0),throw:z(1),return:z(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function z(U){return function(ee){return function(U){if(A)throw new TypeError("Generator is already executing.");for(;b;)try{if(A=1,N&&(T=2&U[0]?N.return:U[0]?N.throw||((T=N.return)&&T.call(N),0):N.next)&&!(T=T.call(N,U[1])).done)return T;switch(N=0,T&&(U=[2&U[0],T.value]),U[0]){case 0:case 1:T=U;break;case 4:return b.label++,{value:U[1],done:!1};case 5:b.label++,N=U[1],U=[0];continue;case 7:U=b.ops.pop(),b.trys.pop();continue;default:if(!(T=(T=b.trys).length>0&&T[T.length-1])&&(6===U[0]||2===U[0])){b=0;continue}if(3===U[0]&&(!T||U[1]>T[0]&&U[1]<T[3])){b.label=U[1];break}if(6===U[0]&&b.label<T[1]){b.label=T[1],T=U;break}if(T&&b.label<T[2]){b.label=T[2],b.ops.push(U);break}T[2]&&b.ops.pop(),b.trys.pop();continue}U=D.call(v,b)}catch(ee){U=[6,ee],N=0}finally{A=T=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([U,ee])}}}function Z(v,D,b,A){void 0===A&&(A=b),v[A]=D[b]}function pe(v,D){for(var b in v)"default"!==b&&!D.hasOwnProperty(b)&&(D[b]=v[b])}function ne(v){var D="function"==typeof Symbol&&Symbol.iterator,b=D&&v[D],A=0;if(b)return b.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&A>=v.length&&(v=void 0),{value:v&&v[A++],done:!v}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(v,D){var b="function"==typeof Symbol&&v[Symbol.iterator];if(!b)return v;var N,O,A=b.call(v),T=[];try{for(;(void 0===D||D-- >0)&&!(N=A.next()).done;)T.push(N.value)}catch(z){O={error:z}}finally{try{N&&!N.done&&(b=A.return)&&b.call(A)}finally{if(O)throw O.error}}return T}function X(){for(var v=[],D=0;D<arguments.length;D++)v=v.concat(J(arguments[D]));return v}function Ze(){for(var v=0,D=0,b=arguments.length;D<b;D++)v+=arguments[D].length;var A=Array(v),N=0;for(D=0;D<b;D++)for(var T=arguments[D],O=0,z=T.length;O<z;O++,N++)A[N]=T[O];return A}function xe(v){return this instanceof xe?(this.v=v,this):new xe(v)}function ot(v,D,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,A=b.apply(v,D||[]),T=[];return N={},O("next"),O("throw"),O("return"),N[Symbol.asyncIterator]=function(){return this},N;function O(Q){A[Q]&&(N[Q]=function(de){return new Promise(function(nt,zt){T.push([Q,de,nt,zt])>1||z(Q,de)})})}function z(Q,de){try{!function(Q){Q.value instanceof xe?Promise.resolve(Q.value.v).then(U,ee):le(T[0][2],Q)}(A[Q](de))}catch(nt){le(T[0][3],nt)}}function U(Q){z("next",Q)}function ee(Q){z("throw",Q)}function le(Q,de){Q(de),T.shift(),T.length&&z(T[0][0],T[0][1])}}function dt(v){var D,b;return D={},A("next"),A("throw",function(N){throw N}),A("return"),D[Symbol.iterator]=function(){return this},D;function A(N,T){D[N]=v[N]?function(O){return(b=!b)?{value:xe(v[N](O)),done:"return"===N}:T?T(O):O}:T}}function ft(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,D=v[Symbol.asyncIterator];return D?D.call(v):(v=ne(v),b={},A("next"),A("throw"),A("return"),b[Symbol.asyncIterator]=function(){return this},b);function A(T){b[T]=v[T]&&function(O){return new Promise(function(z,Ie){!function(T,O,z,Ie){Promise.resolve(Ie).then(function(U){T({value:U,done:z})},O)}(z,Ie,(O=v[T](O)).done,O.value)})}}}function Ge(v,D){return Object.defineProperty?Object.defineProperty(v,"raw",{value:D}):v.raw=D,v}function ze(v){if(v&&v.__esModule)return v;var D={};if(null!=v)for(var b in v)Object.hasOwnProperty.call(v,b)&&(D[b]=v[b]);return D.default=v,D}function _e(v){return v&&v.__esModule?v:{default:v}}function ht(v,D){if(!D.has(v))throw new TypeError("attempted to get private field on non-instance");return D.get(v)}function Je(v,D,b){if(!D.has(v))throw new TypeError("attempted to set private field on non-instance");return D.set(v,b),b}},209:(fn,K,Me)=>{"use strict";Me.r(K),Me.d(K,{__extends:()=>ie,__assign:()=>I,__rest:()=>fe,__decorate:()=>rt,__param:()=>yt,__metadata:()=>bt,__awaiter:()=>Gt,__generator:()=>Te,__createBinding:()=>Z,__exportStar:()=>pe,__values:()=>ne,__read:()=>J,__spread:()=>X,__spreadArrays:()=>Ze,__await:()=>xe,__asyncGenerator:()=>ot,__asyncDelegator:()=>dt,__asyncValues:()=>ft,__makeTemplateObject:()=>Ge,__importStar:()=>ze,__importDefault:()=>_e,__classPrivateFieldGet:()=>ht,__classPrivateFieldSet:()=>Je});var ye=function(v,D){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,A){b.__proto__=A}||function(b,A){for(var N in A)A.hasOwnProperty(N)&&(b[N]=A[N])})(v,D)};function ie(v,D){function b(){this.constructor=v}ye(v,D),v.prototype=null===D?Object.create(D):(b.prototype=D.prototype,new b)}var I=function(){return(I=Object.assign||function(D){for(var b,A=1,N=arguments.length;A<N;A++)for(var T in b=arguments[A])Object.prototype.hasOwnProperty.call(b,T)&&(D[T]=b[T]);return D}).apply(this,arguments)};function fe(v,D){var b={};for(var A in v)Object.prototype.hasOwnProperty.call(v,A)&&D.indexOf(A)<0&&(b[A]=v[A]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(A=Object.getOwnPropertySymbols(v);N<A.length;N++)D.indexOf(A[N])<0&&Object.prototype.propertyIsEnumerable.call(v,A[N])&&(b[A[N]]=v[A[N]])}return b}function rt(v,D,b,A){var O,N=arguments.length,T=N<3?D:null===A?A=Object.getOwnPropertyDescriptor(D,b):A;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)T=Reflect.decorate(v,D,b,A);else for(var z=v.length-1;z>=0;z--)(O=v[z])&&(T=(N<3?O(T):N>3?O(D,b,T):O(D,b))||T);return N>3&&T&&Object.defineProperty(D,b,T),T}function yt(v,D){return function(b,A){D(b,A,v)}}function bt(v,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,D)}function Gt(v,D,b,A){return new(b||(b=Promise))(function(T,O){function z(ee){try{U(A.next(ee))}catch(le){O(le)}}function Ie(ee){try{U(A.throw(ee))}catch(le){O(le)}}function U(ee){ee.done?T(ee.value):function(T){return T instanceof b?T:new b(function(O){O(T)})}(ee.value).then(z,Ie)}U((A=A.apply(v,D||[])).next())})}function Te(v,D){var A,N,T,O,b={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return O={next:z(0),throw:z(1),return:z(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function z(U){return function(ee){return function(U){if(A)throw new TypeError("Generator is already executing.");for(;b;)try{if(A=1,N&&(T=2&U[0]?N.return:U[0]?N.throw||((T=N.return)&&T.call(N),0):N.next)&&!(T=T.call(N,U[1])).done)return T;switch(N=0,T&&(U=[2&U[0],T.value]),U[0]){case 0:case 1:T=U;break;case 4:return b.label++,{value:U[1],done:!1};case 5:b.label++,N=U[1],U=[0];continue;case 7:U=b.ops.pop(),b.trys.pop();continue;default:if(!(T=(T=b.trys).length>0&&T[T.length-1])&&(6===U[0]||2===U[0])){b=0;continue}if(3===U[0]&&(!T||U[1]>T[0]&&U[1]<T[3])){b.label=U[1];break}if(6===U[0]&&b.label<T[1]){b.label=T[1],T=U;break}if(T&&b.label<T[2]){b.label=T[2],b.ops.push(U);break}T[2]&&b.ops.pop(),b.trys.pop();continue}U=D.call(v,b)}catch(ee){U=[6,ee],N=0}finally{A=T=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([U,ee])}}}function Z(v,D,b,A){void 0===A&&(A=b),v[A]=D[b]}function pe(v,D){for(var b in v)"default"!==b&&!D.hasOwnProperty(b)&&(D[b]=v[b])}function ne(v){var D="function"==typeof Symbol&&Symbol.iterator,b=D&&v[D],A=0;if(b)return b.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&A>=v.length&&(v=void 0),{value:v&&v[A++],done:!v}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(v,D){var b="function"==typeof Symbol&&v[Symbol.iterator];if(!b)return v;var N,O,A=b.call(v),T=[];try{for(;(void 0===D||D-- >0)&&!(N=A.next()).done;)T.push(N.value)}catch(z){O={error:z}}finally{try{N&&!N.done&&(b=A.return)&&b.call(A)}finally{if(O)throw O.error}}return T}function X(){for(var v=[],D=0;D<arguments.length;D++)v=v.concat(J(arguments[D]));return v}function Ze(){for(var v=0,D=0,b=arguments.length;D<b;D++)v+=arguments[D].length;var A=Array(v),N=0;for(D=0;D<b;D++)for(var T=arguments[D],O=0,z=T.length;O<z;O++,N++)A[N]=T[O];return A}function xe(v){return this instanceof xe?(this.v=v,this):new xe(v)}function ot(v,D,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,A=b.apply(v,D||[]),T=[];return N={},O("next"),O("throw"),O("return"),N[Symbol.asyncIterator]=function(){return this},N;function O(Q){A[Q]&&(N[Q]=function(de){return new Promise(function(nt,zt){T.push([Q,de,nt,zt])>1||z(Q,de)})})}function z(Q,de){try{!function(Q){Q.value instanceof xe?Promise.resolve(Q.value.v).then(U,ee):le(T[0][2],Q)}(A[Q](de))}catch(nt){le(T[0][3],nt)}}function U(Q){z("next",Q)}function ee(Q){z("throw",Q)}function le(Q,de){Q(de),T.shift(),T.length&&z(T[0][0],T[0][1])}}function dt(v){var D,b;return D={},A("next"),A("throw",function(N){throw N}),A("return"),D[Symbol.iterator]=function(){return this},D;function A(N,T){D[N]=v[N]?function(O){return(b=!b)?{value:xe(v[N](O)),done:"return"===N}:T?T(O):O}:T}}function ft(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,D=v[Symbol.asyncIterator];return D?D.call(v):(v=ne(v),b={},A("next"),A("throw"),A("return"),b[Symbol.asyncIterator]=function(){return this},b);function A(T){b[T]=v[T]&&function(O){return new Promise(function(z,Ie){!function(T,O,z,Ie){Promise.resolve(Ie).then(function(U){T({value:U,done:z})},O)}(z,Ie,(O=v[T](O)).done,O.value)})}}}function Ge(v,D){return Object.defineProperty?Object.defineProperty(v,"raw",{value:D}):v.raw=D,v}function ze(v){if(v&&v.__esModule)return v;var D={};if(null!=v)for(var b in v)Object.hasOwnProperty.call(v,b)&&(D[b]=v[b]);return D.default=v,D}function _e(v){return v&&v.__esModule?v:{default:v}}function ht(v,D){if(!D.has(v))throw new TypeError("attempted to get private field on non-instance");return D.get(v)}function Je(v,D,b){if(!D.has(v))throw new TypeError("attempted to set private field on non-instance");return D.set(v,b),b}},57:(fn,K,Me)=>{"use strict";Me.r(K),Me.d(K,{__extends:()=>ie,__assign:()=>I,__rest:()=>fe,__decorate:()=>rt,__param:()=>yt,__metadata:()=>bt,__awaiter:()=>Gt,__generator:()=>Te,__createBinding:()=>Z,__exportStar:()=>pe,__values:()=>ne,__read:()=>J,__spread:()=>X,__spreadArrays:()=>Ze,__await:()=>xe,__asyncGenerator:()=>ot,__asyncDelegator:()=>dt,__asyncValues:()=>ft,__makeTemplateObject:()=>Ge,__importStar:()=>ze,__importDefault:()=>_e,__classPrivateFieldGet:()=>ht,__classPrivateFieldSet:()=>Je});var ye=function(v,D){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,A){b.__proto__=A}||function(b,A){for(var N in A)A.hasOwnProperty(N)&&(b[N]=A[N])})(v,D)};function ie(v,D){function b(){this.constructor=v}ye(v,D),v.prototype=null===D?Object.create(D):(b.prototype=D.prototype,new b)}var I=function(){return(I=Object.assign||function(D){for(var b,A=1,N=arguments.length;A<N;A++)for(var T in b=arguments[A])Object.prototype.hasOwnProperty.call(b,T)&&(D[T]=b[T]);return D}).apply(this,arguments)};function fe(v,D){var b={};for(var A in v)Object.prototype.hasOwnProperty.call(v,A)&&D.indexOf(A)<0&&(b[A]=v[A]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var N=0;for(A=Object.getOwnPropertySymbols(v);N<A.length;N++)D.indexOf(A[N])<0&&Object.prototype.propertyIsEnumerable.call(v,A[N])&&(b[A[N]]=v[A[N]])}return b}function rt(v,D,b,A){var O,N=arguments.length,T=N<3?D:null===A?A=Object.getOwnPropertyDescriptor(D,b):A;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)T=Reflect.decorate(v,D,b,A);else for(var z=v.length-1;z>=0;z--)(O=v[z])&&(T=(N<3?O(T):N>3?O(D,b,T):O(D,b))||T);return N>3&&T&&Object.defineProperty(D,b,T),T}function yt(v,D){return function(b,A){D(b,A,v)}}function bt(v,D){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(v,D)}function Gt(v,D,b,A){return new(b||(b=Promise))(function(T,O){function z(ee){try{U(A.next(ee))}catch(le){O(le)}}function Ie(ee){try{U(A.throw(ee))}catch(le){O(le)}}function U(ee){ee.done?T(ee.value):function(T){return T instanceof b?T:new b(function(O){O(T)})}(ee.value).then(z,Ie)}U((A=A.apply(v,D||[])).next())})}function Te(v,D){var A,N,T,O,b={label:0,sent:function(){if(1&T[0])throw T[1];return T[1]},trys:[],ops:[]};return O={next:z(0),throw:z(1),return:z(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function z(U){return function(ee){return function(U){if(A)throw new TypeError("Generator is already executing.");for(;b;)try{if(A=1,N&&(T=2&U[0]?N.return:U[0]?N.throw||((T=N.return)&&T.call(N),0):N.next)&&!(T=T.call(N,U[1])).done)return T;switch(N=0,T&&(U=[2&U[0],T.value]),U[0]){case 0:case 1:T=U;break;case 4:return b.label++,{value:U[1],done:!1};case 5:b.label++,N=U[1],U=[0];continue;case 7:U=b.ops.pop(),b.trys.pop();continue;default:if(!(T=(T=b.trys).length>0&&T[T.length-1])&&(6===U[0]||2===U[0])){b=0;continue}if(3===U[0]&&(!T||U[1]>T[0]&&U[1]<T[3])){b.label=U[1];break}if(6===U[0]&&b.label<T[1]){b.label=T[1],T=U;break}if(T&&b.label<T[2]){b.label=T[2],b.ops.push(U);break}T[2]&&b.ops.pop(),b.trys.pop();continue}U=D.call(v,b)}catch(ee){U=[6,ee],N=0}finally{A=T=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([U,ee])}}}function Z(v,D,b,A){void 0===A&&(A=b),v[A]=D[b]}function pe(v,D){for(var b in v)"default"!==b&&!D.hasOwnProperty(b)&&(D[b]=v[b])}function ne(v){var D="function"==typeof Symbol&&Symbol.iterator,b=D&&v[D],A=0;if(b)return b.call(v);if(v&&"number"==typeof v.length)return{next:function(){return v&&A>=v.length&&(v=void 0),{value:v&&v[A++],done:!v}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")}function J(v,D){var b="function"==typeof Symbol&&v[Symbol.iterator];if(!b)return v;var N,O,A=b.call(v),T=[];try{for(;(void 0===D||D-- >0)&&!(N=A.next()).done;)T.push(N.value)}catch(z){O={error:z}}finally{try{N&&!N.done&&(b=A.return)&&b.call(A)}finally{if(O)throw O.error}}return T}function X(){for(var v=[],D=0;D<arguments.length;D++)v=v.concat(J(arguments[D]));return v}function Ze(){for(var v=0,D=0,b=arguments.length;D<b;D++)v+=arguments[D].length;var A=Array(v),N=0;for(D=0;D<b;D++)for(var T=arguments[D],O=0,z=T.length;O<z;O++,N++)A[N]=T[O];return A}function xe(v){return this instanceof xe?(this.v=v,this):new xe(v)}function ot(v,D,b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N,A=b.apply(v,D||[]),T=[];return N={},O("next"),O("throw"),O("return"),N[Symbol.asyncIterator]=function(){return this},N;function O(Q){A[Q]&&(N[Q]=function(de){return new Promise(function(nt,zt){T.push([Q,de,nt,zt])>1||z(Q,de)})})}function z(Q,de){try{!function(Q){Q.value instanceof xe?Promise.resolve(Q.value.v).then(U,ee):le(T[0][2],Q)}(A[Q](de))}catch(nt){le(T[0][3],nt)}}function U(Q){z("next",Q)}function ee(Q){z("throw",Q)}function le(Q,de){Q(de),T.shift(),T.length&&z(T[0][0],T[0][1])}}function dt(v){var D,b;return D={},A("next"),A("throw",function(N){throw N}),A("return"),D[Symbol.iterator]=function(){return this},D;function A(N,T){D[N]=v[N]?function(O){return(b=!b)?{value:xe(v[N](O)),done:"return"===N}:T?T(O):O}:T}}function ft(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b,D=v[Symbol.asyncIterator];return D?D.call(v):(v=ne(v),b={},A("next"),A("throw"),A("return"),b[Symbol.asyncIterator]=function(){return this},b);function A(T){b[T]=v[T]&&function(O){return new Promise(function(z,Ie){!function(T,O,z,Ie){Promise.resolve(Ie).then(function(U){T({value:U,done:z})},O)}(z,Ie,(O=v[T](O)).done,O.value)})}}}function Ge(v,D){return Object.defineProperty?Object.defineProperty(v,"raw",{value:D}):v.raw=D,v}function ze(v){if(v&&v.__esModule)return v;var D={};if(null!=v)for(var b in v)Object.hasOwnProperty.call(v,b)&&(D[b]=v[b]);return D.default=v,D}function _e(v){return v&&v.__esModule?v:{default:v}}function ht(v,D){if(!D.has(v))throw new TypeError("attempted to get private field on non-instance");return D.get(v)}function Je(v,D,b){if(!D.has(v))throw new TypeError("attempted to set private field on non-instance");return D.set(v,b),b}}},fn=>{fn(fn.s=622)}]);